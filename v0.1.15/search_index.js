var documenterSearchIndex = {"docs":
[{"location":"notebooks/GPS/#Testing-G4GeneralParticleSource","page":"Example GPS","title":"Testing G4GeneralParticleSource","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"See the G4GeneralParticleSource documentation for the definition of parameters.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"using Parameters\nusing Geant4\nusing Geant4.PhysicalConstants\nusing Geant4.SystemOfUnits\nusing Geant4.SystemOfUnits: deg\nusing FHist\nusing Plots\n#---Choose the Makie backend\n#using GLMakie\n#using WGLMakie\nusing CairoMakie\nusing GeometryBasics, Rotations, IGLWrap_jll  # to force loding G4Vis extension","category":"page"},{"location":"notebooks/GPS/#Detector-definition-and-drawing","page":"Example GPS","title":"Detector definition and drawing","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"# Define the detector\ninclude(joinpath(@__DIR__, \"DetectorGPS.jl\"))\n\n# Draw the detector\ndet = GPSDetector()\nworld = construct(det)\nimg = draw(world[])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/GPS/#Simulation-data","page":"Example GPS","title":"Simulation data","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"The simulation data GPSSimData struct is a set of histograms that will be filled in the user tracking action and can be visualised with the function do_plot(). It is using the macro @with_kw from the Parameters.jl package to construct an instance with all the defaults.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"const nbins = 50\n@with_kw mutable struct GPSSimData <: G4JLSimulationData\n    hKEne     = H1D(\"Energy Spectrum\", nbins, 0., 15., :MeV)\n    hRad      = H1D(\"Radial ditribution\", nbins, 0., 10., :cm)\n    hAngcosθ  = H1D(\"Angular ditribution cosθ\", nbins, -1., 1.)\n    hAngϕ     = H1D(\"Angular distribution ϕ\", nbins, 0.,360., :deg)\n    hXYpos    = H2D(\"Source X-Y distribution\", nbins, -10., 10., nbins, -10., 10., (:cm, :cm))\n    hZXpos    = H2D(\"Source Z-X distribution\", nbins, -10., 10., nbins, -10., 10., (:cm, :cm))\n    hYZpos    = H2D(\"Source Y-Z distribution\", nbins, -10., 10., nbins, -10., 10., (:cm, :cm))\n    hcosθϕ    = H2D(\"Angular cos(θ)-ϕ distribution\", nbins, -1., 1., nbins, 0., 360., (:nounit, :deg))\n    hθϕ       = H2D(\"Angular θ-ϕ distribution\", nbins, 0., 180., nbins, 0., 360., (:deg, :deg))\nend\n#---merge and empty functions----------------------------------------------------------------------\nfunction Base.merge!(x::D, y::D) where D <: G4JLSimulationData\n    for f in fieldnames(D)\n        merge!(getfield(x,f), getfield(y,f))\n    end\nend\nfunction Base.empty!(x::D) where D <: G4JLSimulationData\n    for f in fieldnames(D)\n        empty!(getfield(x,f))\n    end\nend\n#---plot function----------------------------------------------------------------------------------\nfunction do_plot(data::GPSSimData)\n    img = Plots.plot(layout=(3,3), show=true, size=(1400,1000))\n    for (i,fn) in enumerate(fieldnames(GPSSimData))\n        h = getfield(data, fn)\n        Plots.plot!(subplot=i, h.hist, title=h.title, show=true, cgrad=:plasma)\n    end\n    return img\nend","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"do_plot (generic function with 1 method)","category":"page"},{"location":"notebooks/GPS/#User-Actions","page":"Example GPS","title":"User Actions","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"The begin and end run action is used to initialise and sum (merge) the simulation data. The tracking action is used to fill the histograms.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"#---Run Actions------------------------------------------------------------------------------------\nfunction beginrun(::G4Run, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    empty!(data) \n    nothing\nend\nfunction endrun(::G4Run, app::G4JLApplication)::Nothing\n    #---end run action is called for each workwer thread and the master one\n    if G4Threading!G4GetThreadId() < 0   \n        data = app.simdata[1]\n        #---This is the master thread, so we need to add all the simuation results-----------------\n        for d in app.simdata[2:end]\n            merge!(data, d)\n        end\n    end\nend\n#---Tracking Actions-----------------------------------------------------------------------------\nfunction pretrackaction(track::G4Track, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    ekin = track |> GetKineticEnergy\n    vertex = track |> GetPosition\n    direction = track |> GetMomentumDirection\n    weight = track |> GetWeight\n\n    x = vertex |> getX\n    y = vertex |> getY\n    z = vertex |> getZ\n    θ = direction |> getTheta\n    ϕ = direction |> getPhi\n    ϕ < 0 &&  (ϕ += 2π)\n    r = vertex |> mag\n    dr = binedges(data.hRad.hist).step |> Float64\n    dv = 4π * r^2 * dr\n\n    # fill histograms\n    push!(data.hKEne, ekin)\n    push!(data.hRad, r, 1.0/dv)\n    push!(data.hAngcosθ, cos(θ))\n    push!(data.hAngϕ, ϕ)\n    push!(data.hXYpos, x, y)\n    push!(data.hZXpos, z, x)\n    push!(data.hYZpos, y, z)\n    push!(data.hcosθϕ, cos(θ), ϕ)\n    push!(data.hθϕ, θ, ϕ)\n    nothing\nend","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"pretrackaction (generic function with 1 method)","category":"page"},{"location":"notebooks/GPS/#Particle-Generator","page":"Example GPS","title":"Particle Generator","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"We create a G4JLGeneralParticleSource particle generator. The initial run will be equivalent to the G4JLParticleGun with the same parameters.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"#---Particle Gun initialization--------------------------------------------------------------------\ngps = G4JLGeneralParticleSource(particle = \"geantino\", \n                                energy = 10MeV, \n                                direction = G4ThreeVector(1,0,0), \n                                position = G4ThreeVector(1,2,1))","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"G4JLGeneralParticleSource(\"GPS\", Geant4.G4JLGPSData(nothing, @NamedTuple{particle::String, energy::Float64, direction::Geant4.CLHEP!Hep3VectorAllocated, position::Geant4.CLHEP!Hep3VectorAllocated}[(particle = \"geantino\", energy = 10.0, direction = G4ThreeVector(1.0,0.0,0.0), position = G4ThreeVector(1.0,2.0,1.0))], false, false), Geant4.initGPS, Geant4.var\"#gen#22\"(), G4JLGeneratorAction[])","category":"page"},{"location":"notebooks/GPS/#Application-definition,-configuration-and-initialization","page":"Example GPS","title":"Application definition, configuration and initialization","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"#---Create the Application-------------------------------------------------------------------------\napp = G4JLApplication(detector = GPSDetector(),                   # detector with parameters\n                      simdata = GPSSimData(),                     # simulation data structure\n                      generator = gps,                            # primary particle generator \n                      nthreads = VERSION > v\"1.9\" ? 4 : 0,        # number of threads (MT)\n                      physics_type = FTFP_BERT,                   # what physics list to instantiate\n                      #----Actions--------------------------------\n                      pretrackaction_method = pretrackaction,     # pre-tracking action\n                      beginrunaction_method = beginrun,           # begin-run action (initialize counters and histograms)\n                      endrunaction_method = endrun,               # end-run action (print summary)               \n                      );\nconfigure(app)\ninitialize(app)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n  << in Multi-threaded mode >> \n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************\n\nG4Material WARNING: duplicate name of material Vacuum\nG4Material WARNING: duplicate name of material Aluminium\nG4Material WARNING: duplicate name of material Silicon oxide","category":"page"},{"location":"notebooks/GPS/#Tests","page":"Example GPS","title":"Tests","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"Taken from examples\\extended\\eventgenerator\\exgps\\macros","category":"page"},{"location":"notebooks/GPS/#Initial-Particle-Gun","page":"Example GPS","title":"Initial Particle Gun","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"beamOn(app, 1000)\nimg = do_plot(app.simdata[1])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\n\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/GPS/#Test01","page":"Example GPS","title":"Test01","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"/gps/particle proton\n/gps/pos/type Point\n/gps/pos/centre 1. 2. 1. cm\n/gps/ang/type iso\n/gps/energy 2. MeV","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"reinitialize(app.generator;  particle=\"geantino\",\n                             energy=2MeV,\n                             pos=(type=\"Point\", centre=G4ThreeVector(1cm,2cm,1cm)),\n                             ang=(type=\"iso\"))\nbeamOn(app, 1000)\nimg = do_plot(app.simdata[1])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/GPS/#Test02","page":"Example GPS","title":"Test02","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"# square plane source\n/gps/pos/type Plane\n/gps/pos/shape Square\n/gps/pos/centre 1. 2. 1. cm\n/gps/pos/halfx 2. cm\n/gps/pos/halfy 2. cm\n\n#cosine-law distribution\n/gps/ang/type cos\n\n# linear energy distr.\n/gps/ene/type Lin\n/gps/ene/min 2. MeV\n/gps/ene/max 10. MeV\n/gps/ene/gradient 1.\n/gps/ene/intercept 1.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"reinitialize(app.generator;  particle=\"geantino\",\n                             ene=(type=\"Lin\", min=2MeV, max=10MeV, gradient=1, intercept=1),\n                             pos=(type=\"Plane\", shape=\"Square\", centre=G4ThreeVector(1cm,2cm,1cm), halfx=2cm, halfy=2cm),\n                             ang=(type=\"cos\",mintheta=10deg, maxtheta=80deg))\nbeamOn(app, 10000)\nimg = do_plot(app.simdata[1])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/GPS/#Test03","page":"Example GPS","title":"Test03","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"#rectangle plane source\n/gps/pos/type Plane\n/gps/pos/shape Rectangle\n/gps/pos/centre 0. 2. 1. cm\n/gps/pos/halfx 1. cm\n/gps/pos/halfy 3. cm\n\n# isotropic angular distri.\n/gps/ang/type iso\n\n# power-law energy distr.\n/gps/ene/type Pow\n/gps/ene/min 2. MeV\n/gps/ene/max 10. MeV\n/gps/ene/alpha -2.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"reinitialize(app.generator;  particle=\"geantino\",\n                             ene=(type=\"Pow\", min=2MeV, max=10MeV, alpha=-2),\n                             pos=(type=\"Plane\", shape=\"Rectangle\", centre=G4ThreeVector(1cm,2cm,1cm), halfx=1cm, halfy=3cm),\n                             ang=(type=\"iso\", mintheta=0deg, maxtheta=180deg))\nbeamOn(app, 10000)\nimg = do_plot(app.simdata[1])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/GPS/#Test04-and-Test05-Together","page":"Example GPS","title":"Test04 and Test05 Together","text":"","category":"section"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"source 1","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"    #circular plane source\n    /gps/pos/type Plane\n    /gps/pos/shape Circle\n    /gps/pos/centre 2. 1. 0. cm\n    /gps/pos/radius 3. cm\n\n    # cosine-law \n    /gps/ang/type cos\n\n    # exponential energy distri.\n    /gps/ene/type Exp\n    /gps/ene/min 2. MeV\n    /gps/ene/max 10. MeV\n    /gps/ene/ezero 2.","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"source 2","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"    # ellipse plane source\n    /gps/pos/type Plane\n    /gps/pos/shape Ellipse\n    /gps/pos/centre 3. 1. 0. cm\n    /gps/pos/halfx 1. cm\n    /gps/pos/halfy 2. cm\n\n    #isotropic angular distribution\n    /gps/ang/type iso\n\n    # brems energy distr.\n    /gps/ene/type Brem\n    /gps/ene/min 2. MeV\n    /gps/ene/max 10. MeV\n    /gps/ene/temp 2e12","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"reinitialize(app.generator;  sources = [(particle=\"geantino\", intensity=0.5,\n                                           ene=(type=\"Exp\", min=2MeV, max=10MeV, ezero=2.),\n                                           pos=(type=\"Plane\", shape=\"Circle\", centre=G4ThreeVector(1cm,2cm,0cm), radius=3cm),\n                                           ang=(type=\"cos\", mintheta=0deg, maxtheta=180deg)),\n                                         (particle=\"geantino\", intensity=0.5,\n                                           ene=(type=\"Brem\", min=2MeV, max=10MeV, temp=2e12),\n                                           pos=(type=\"Plane\", shape=\"Ellipse\", centre=G4ThreeVector(3cm,1cm,0cm), halfx=1cm, halfy=2cm),\n                                           ang=(type=\"iso\", mintheta=0deg, maxtheta=180deg))])\nbeamOn(app, 100000)\nimg = do_plot(app.simdata[1])\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m\n\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39mWeights was probably used but StatsBase.Histogram doesn't record # of entries\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35\u001b[39m","category":"page"},{"location":"notebooks/GPS/","page":"Example GPS","title":"Example GPS","text":"(Image: png)","category":"page"},{"location":"notebooks/HBC30/#CERN-Liquid-Hydrogen-Bubble-Chamber","page":"Example HBC30","title":"CERN Liquid Hydrogen Bubble Chamber","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"Example to simulate the CERN 30cm bubble chamber fill with liquid hydrogen and using a pion beam of 330 MeV from PS. The original device was like this:","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"(Image: )","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"using Geant4\nusing Geant4.SystemOfUnits\nusing Printf, GeometryBasics\nusing CairoMakie, Rotations, IGLWrap_jll  # to force loading G4Vis extension","category":"page"},{"location":"notebooks/HBC30/#Define-the-detector-chamber","page":"Example HBC30","title":"Define the detector chamber","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"include(\"DetectorHBC30.jl\")\nhbc30 = HBC30()","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"HBC30(300.0, 50.0, false, 192.50000000000003)","category":"page"},{"location":"notebooks/HBC30/#Define-the-simulation-data","page":"Example HBC30","title":"Define the simulation data","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"The data structure HBC30SimData will be filled by the user actions at the correct moment during the simulation. We collect the points for each track at the step bounderies together with the initial kinetic energy and particle name and charge.","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Define Simulation Data struct------------------------------------------------------------------\nstruct Track\n    particle::String\n    charge::Int\n    energy::Float64\n    points::Vector{Point3{Float64}}\nend\nmutable struct HBC30SimData <: G4JLSimulationData\n    #---Run data-----------------------------------------------------------------------------------\n    fParticle::String\n    fEkin::Float64\n    #---trigger/veto-------------------------------------------------------------------------------\n    veto::Bool\n    #---tracks-------------------------------------------------------------------------------------\n    tracks::Vector{Track}\n    HBC30SimData() = new(\"\", 0.0, false, [])\nend\n","category":"page"},{"location":"notebooks/HBC30/#Define-the-needed-user-actions","page":"Example HBC30","title":"Define the needed user actions","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"beginrun stores the particle type and initial kinetic energy of the generated primary particle\nbeginevent clear the trigger veto and the list of tracks for the current event\npretrackaction pushes a new Track with the particle name, charge, intial energy and initial point\nposttackactkion is used exclusevily to set the veto if the initial particle exists the world without a sizeable interaction\nstepaction pushes points to the latest Track in the track list","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Step action------------------------------------------------------------------------------------\nfunction stepaction(step::G4Step, app::G4JLApplication)::Nothing\n    tracks = getSIMdata(app).tracks\n    p = step |> GetPostStepPoint |> GetPosition\n    auxpoints = step |> GetPointerToVectorOfAuxiliaryPoints\n    if auxpoints != C_NULL\n        for ap in auxpoints\n            push!(tracks[end].points, Point3{Float64}(x(ap),y(ap),z(ap)))\n        end\n    end\n    push!(tracks[end].points, Point3{Float64}(x(p),y(p),z(p)))\n    return\nend\n#---Tracking pre-action---------------------------------------------------------------------------- \nfunction pretrackaction(track::G4Track, app::G4JLApplication)::Nothing\n    tracks = getSIMdata(app).tracks\n    p = GetPosition(track)[]\n    particle = track |> GetParticleDefinition\n    name = particle |> GetParticleName |> String\n    charge = particle |> GetPDGCharge |> Int\n    energy = track |> GetKineticEnergy\n    push!(tracks, Track(name, charge, energy, [Point3{Float64}(x(p),y(p),z(p))]))\n    return\nend\n#---Tracking post-action---------------------------------------------------------------------------- \nfunction posttrackaction(track::G4Track, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    id = track |> GetTrackID\n    energy = track |> GetKineticEnergy\n    if id == 1 && energy > 0.80 * data.fEkin # primary particle did not losse any energy\n        if track |> GetStep |> GetPostStepPoint |> GetPhysicalVolume == C_NULL  # Only if outside world\n            data.veto = true\n        end\n    end\n    return\nend\n#---Begin-event-action---------------------------------------------------------------------------- \nfunction beginevent(::G4Event, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    data.veto = false\n    empty!(data.tracks)\n    return\nend\n#---Begin Run Action-------------------------------------------------------------------------------\nfunction beginrun(run::G4Run, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    gun = app.generator.data.gun\n    data.fParticle = gun |> GetParticleDefinition |> GetParticleName |> String\n    data.fEkin = gun |> GetParticleEnergy\n    return\nend","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"beginrun (generic function with 1 method)","category":"page"},{"location":"notebooks/HBC30/#Define-the-primary-particle-generator,-the-magnetic-filed-and-the-application","page":"Example HBC30","title":"Define the primary particle generator, the magnetic filed and the application","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"import Geant4.SystemOfUnits:tesla\n#--------------------------------------------------------------------------------------------------\n#---Particle Gun initialization--------------------------------------------------------------------\n#--------------------------------------------------------------------------------------------------\nparticlegun = G4JLGunGenerator(particle = \"pi+\", \n                               energy = 330MeV, \n                               direction = G4ThreeVector(0,-1,0), \n                               position = G4ThreeVector(0, hbc30.worldZHalfLength,0))\n\n#--------------------------------------------------------------------------------------------------\n#---Magnetic Field initialization------------------------------------------------------------------\n#--------------------------------------------------------------------------------------------------\nbfield = G4JLUniformMagField(G4ThreeVector(0,0, 1.5tesla))\n\n#--------------------------------------------------------------------------------------------------\n#---Create the Application-------------------------------------------------------------------------\n#--------------------------------------------------------------------------------------------------\napp = G4JLApplication(; detector = hbc30,                             # detector with parameters\n                        simdata = HBC30SimData(),                     # simulation data structure\n                        generator = particlegun,                      # primary particle generator\n                        field = bfield,                               # uniform magnetic field\n                        nthreads = 0,                                 # # of threads (0 = no MT)\n                        physics_type = FTFP_BERT,                     # what physics list to instantiate\n                        stepaction_method = stepaction,               # step action method\n                        begineventaction_method = beginevent,         # begin-event action (initialize per-event data)\n                        pretrackaction_method = pretrackaction,       # pre-tracking action\n                        posttrackaction_method = posttrackaction,     # post-tracking action\n                        beginrunaction_method = beginrun              # begin run action\n                      );","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************","category":"page"},{"location":"notebooks/HBC30/#Draw-and-trigger-functions","page":"Example HBC30","title":"Draw and trigger functions","text":"","category":"section"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Draw functions---------------------------------------------------------------------------------\nfunction drawdetector(s, app)\n    world = GetWorldVolume()\n    Geant4.draw!(s, world)\nend\n\nfunction drawevent(s, app)\n    data = app.simdata[1]\n    # clear previous plots from previous event\n    tobe = [p for p in plots(s) if p isa Lines || p isa Makie.Text]  # The event is made of lines and text \n    for p in tobe\n        delete!(s,p)\n    end\n    # draw new event\n    for t in data.tracks\n        style = abs(t.charge) > 0. ? :solid : :dot\n        lines!(s, t.points, linestyle=style)\n        if t.energy > data.fEkin/20\n            text!(s, t.points[end], text=t.particle)\n        end\n    end\nend\n\n#---Very simplistic trigger to get interesting events to plot--------------------------------------\nfunction nexttrigger(app)\n    data = app.simdata[1]\n    beamOn(app,1)\n    n = 1\n    while data.veto\n        beamOn(app,1)\n        n += 1\n    end\n    println(\"Got a trigger after $n generated particles\")\nend","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"nexttrigger (generic function with 1 method)","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Configure, Initialize and Run------------------------------------------------------------------                      \nconfigure(app)\ninitialize(app)\n\nui`/tracking/storeTrajectory 2` # store auxiliary points to smooth trajectory","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":" G4ChordFinder: stepperDriverId: 2\n\n\n\n\n\n0","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Draw detector and first event that triggers\nfig = Figure(size=(2048,2028))\ns = LScene(fig[1,1])\n\ndrawdetector(s, app)\nnexttrigger(app); drawevent(s, app)\n\ndisplay(\"image/png\", fig)","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"Got a trigger after 42 generated particles","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"(Image: png)","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"#---Change the energy and type of particle and draw the next event\nSetParticleEnergy(particlegun, 1GeV)\nSetParticleByName(particlegun, \"e-\")\n\nfig = Figure(size=(2048,2028))\ns = LScene(fig[1,1])\n\ndrawdetector(s, app)\nnexttrigger(app); drawevent(s, app)\n\ndisplay(\"image/png\", fig)","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"Got a trigger after 9 generated particles","category":"page"},{"location":"notebooks/HBC30/","page":"Example HBC30","title":"Example HBC30","text":"(Image: png)","category":"page"},{"location":"notebooks/B1/#Basic/B1-Example","page":"Example B1","title":"Basic/B1 Example","text":"","category":"section"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"Import the Geant4 and Geant4.SystemOfUnits modules","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"using Geant4\nusing Geant4.SystemOfUnits","category":"page"},{"location":"notebooks/B1/#Define-the-function-that-will-construct-the-detector-geometry.","page":"Example B1","title":"Define the function that will construct the detector geometry.","text":"","category":"section"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"The setup consists of a an envelope of box shape containing two volumes: a spherical cone and a trapezoid.","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"In this example we use  some common materials materials for medical applications. The envelope is made of water and the two inner volumes are made from tissue and bone materials. The materials are created with the help of the G4NistManager class, which allows to build a material from the NIST database using their names. All available materials can be found in the Geant4 User's Guide for Application Developers, Appendix 10: Geant4 Materials Database.","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"include(\"DetectorB1.jl\")\n\ndetdesc = G4JLDetectorConstruction(constructB1Detector)\nphysics = QBBC()\n#SetVerboseLevel(physics, 1)","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"<<< Reference Physics List QBBC \n\n\n\n\n\nGeant4.QBBCAllocated(Ptr{Nothing} @0x00000000021f0b00)","category":"page"},{"location":"notebooks/B1/#User-Actions","page":"Example B1","title":"User Actions","text":"","category":"section"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"# User Actions\nfunction buildApp(self::G4JLActionInitialization, ::Nothing)\n    # Create particle gun\n    particle_gun = G4JLParticleGun()  \n    # Setup particle gun\n    pg = GetGun(particle_gun)\n    SetParticleByName(pg, \"e-\")\n    SetParticleEnergy(pg, 100MeV)\n    SetParticleMomentumDirection(pg, G4ThreeVector(0,0,1))\n    SetParticlePosition(pg, G4ThreeVector(0,0,-16cm))\n    # Register and relinquish ownership\n    SetUserAction(self, move!(particle_gun))\n  end\n  app = G4JLActionInitialization(buildApp)","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"Geant4.G4JLActionInitializationAllocated(Ptr{Nothing} @0x0000000001290210)","category":"page"},{"location":"notebooks/B1/#Instantiate-RunManager-and-initialize","page":"Example B1","title":"Instantiate RunManager and initialize","text":"","category":"section"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"# Construct the default run manager and set initializers\nrunManager = G4RunManager()\n\n# Register User initialization objects and relinquish ownership\nSetUserInitialization(runManager, move!(detdesc))\nSetUserInitialization(runManager, move!(physics))\nSetUserInitialization(runManager, move!(app))\n\n# Get the pointer to the User Interface manager\nUImanager = G4UImanager!GetUIpointer();","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************","category":"page"},{"location":"notebooks/B1/#Execute-the-commands-to-initialize-and-run-few-events","page":"Example B1","title":"Execute the commands to initialize and run few events","text":"","category":"section"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"# Initialize kernel\nApplyCommand(UImanager, \"/run/initialize\")\n\n# Change verbosity\n#ApplyCommand(UImanager, \"/control/verbose 2\")\n#ApplyCommand(UImanager, \"/run/verbose 2\")\n#ApplyCommand(UImanager, \"/event/verbose 0\")\nApplyCommand(UImanager, \"/tracking/verbose 1\")\n\n# gamma 6 MeV to the direction (0.,0.,1.)\nApplyCommand(UImanager, \"/gun/particle gamma\")\nApplyCommand(UImanager, \"/gun/energy 6 MeV\")\n\n# go\nApplyCommand(UImanager, \"/run/beamOn 1\")","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"Checking overlaps for volume Envelope:0 (G4Box) ... OK! \nChecking overlaps for volume Shape1:0 (G4Cons) ... OK! \nChecking overlaps for volume Shape2:0 (G4Trd) ... OK! \n### HadronInelasticQBBC Construct Process:\n    Emin(FTFP)= 3 GeV; Emax(FTFP)= 100000 GeV\n    Emin(BERT)= 1 GeV; Emax(BERT)= 6 GeV; Emax(BERTpions)= 12 GeV;\n    Emin(BIC) = 0 GeV; Emax(BIC)= 1.5 GeV.\n=======================================================================\n======                 Electromagnetic Physics Parameters      ========\n=======================================================================\nLPM effect enabled                                 1\nEnable creation and use of sampling tables         0\nApply cuts on all EM processes                     0\nUse combined TransportationWithMsc                 Disabled\nUse general process                                1\nEnable linear polarisation for gamma               0\nEnable photoeffect sampling below K-shell          1\nEnable sampling of quantum entanglement            0\nX-section factor for integral approach             0.8\nMin kinetic energy for tables                      100 eV \nMax kinetic energy for tables                      100 TeV\nNumber of bins per decade of a table               7\nVerbose level                                      1\nVerbose level for worker thread                    0\nBremsstrahlung energy threshold above which \n  primary e+- is added to the list of secondary    100 TeV\nBremsstrahlung energy threshold above which primary\n  muon/hadron is added to the list of secondary    100 TeV\nLowest triplet kinetic energy                      1 MeV\nEnable sampling of gamma linear polarisation       0\n5D gamma conversion model type                     0\n5D gamma conversion model on isolated ion          0\nLivermore data directory                           epics_2017\n=======================================================================\n======                 Ionisation Parameters                   ========\n=======================================================================\nStep function for e+-                              (0.2, 1 mm)\nStep function for muons/hadrons                    (0.2, 0.1 mm)\nStep function for light ions                       (0.2, 0.1 mm)\nStep function for general ions                     (0.2, 0.1 mm)\nLowest e+e- kinetic energy                         1 keV\nLowest muon/hadron kinetic energy                  1 keV\nUse ICRU90 data                                    0\nFluctuations of dE/dx are enabled                  1\nType of fluctuation model for leptons and hadrons  Urban\nUse built-in Birks satuaration                     0\nBuild CSDA range enabled                           0\nUse cut as a final range enabled                   0\nEnable angular generator interface                 0\nMax kinetic energy for CSDA tables                 1 GeV\nMax kinetic energy for NIEL computation            0 eV \nLinear loss limit                                  0.01\nRead data from file for e+e- pair production by mu 0\n=======================================================================\n======                 Multiple Scattering Parameters          ========\n=======================================================================\nType of msc step limit algorithm for e+-           1\nType of msc step limit algorithm for muons/hadrons 0\nMsc lateral displacement for e+- enabled           1\nMsc lateral displacement for muons and hadrons     0\nUrban msc model lateral displacement alg96         1\nRange factor for msc step limit for e+-            0.04\nRange factor for msc step limit for muons/hadrons  0.2\nGeometry factor for msc step limitation of e+-     2.5\nSafety factor for msc step limit for e+-           0.6\nSkin parameter for msc step limitation of e+-      1\nLambda limit for msc step limit for e+-            1 mm\nUse Mott correction for e- scattering              0\nFactor used for dynamic computation of angular \n  limit between single and multiple scattering     1\nFixed angular limit between single \n  and multiple scattering                          3.1416 rad\nUpper energy limit for e+- multiple scattering     100 MeV\nType of electron single scattering model           0\nType of nuclear form-factor                        1\nScreening factor                                   1\n=======================================================================\n\nphot:  for gamma SubType=12 BuildTable=0\n      LambdaPrime table from 200 keV to 100 TeV in 61 bins \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n LivermorePhElectric : Emin=    0 eV  Emax=  100 TeV  SauterGavrila Fluo\n\ncompt:  for gamma SubType=13 BuildTable=1\n      Lambda table from 100 eV  to 1 MeV, 7 bins/decade, spline: 1\n      LambdaPrime table from 1 MeV to 100 TeV in 56 bins \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n       Klein-Nishina : Emin=    0 eV  Emax=  100 TeV\n\nconv:  for gamma SubType=14 BuildTable=1\n      Lambda table from 1.022 MeV to 100 TeV, 18 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n     BetheHeitlerLPM : Emin=    0 eV  Emax=  100 TeV  ModifiedTsai\n\nRayl:  for gamma SubType=11 BuildTable=1\n      Lambda table from 100 eV  to 150 keV, 7 bins/decade, spline: 0\n      LambdaPrime table from 150 keV to 100 TeV in 62 bins \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n   LivermoreRayleigh : Emin=    0 eV  Emax=  100 TeV  CullenGenerator\n\nmsc:  for e-  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            UrbanMsc : Emin=    0 eV  Emax=  100 MeV Nbins=42 100 eV  - 100 MeV\n          StepLim=UseSafety Rfact=0.04 Gfact=2.5 Sfact=0.6 DispFlag:1 Skin=1 Llim=1 mm\n        WentzelVIUni : Emin=  100 MeV Emax=  100 TeV Nbins=42 100 MeV - 100 TeV\n          StepLim=UseSafety Rfact=0.04 Gfact=2.5 Sfact=0.6 DispFlag:1 Skin=1 Llim=1 mm\n\neIoni:  for e-  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        MollerBhabha : Emin=    0 eV  Emax=  100 TeV\n\neBrem:  for e-  XStype:4  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      LPM flag: 1 for E > 1 GeV,  VertexHighEnergyTh(GeV)= 100000\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n             eBremSB : Emin=    0 eV  Emax=    1 GeV  ModifiedTsai\n            eBremLPM : Emin=    1 GeV Emax=  100 TeV  ModifiedTsai\n\nCoulombScat:  for e- XStype:1 SubType=1 BuildTable=1\n      Lambda table from 100 MeV to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=  100 MeV Emax=  100 TeV\n\nmsc:  for e+  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            UrbanMsc : Emin=    0 eV  Emax=  100 MeV Nbins=42 100 eV  - 100 MeV\n          StepLim=UseSafety Rfact=0.04 Gfact=2.5 Sfact=0.6 DispFlag:1 Skin=1 Llim=1 mm\n        WentzelVIUni : Emin=  100 MeV Emax=  100 TeV Nbins=42 100 MeV - 100 TeV\n          StepLim=UseSafety Rfact=0.04 Gfact=2.5 Sfact=0.6 DispFlag:1 Skin=1 Llim=1 mm\n\neIoni:  for e+  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        MollerBhabha : Emin=    0 eV  Emax=  100 TeV\n\neBrem:  for e+  XStype:4  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      LPM flag: 1 for E > 1 GeV,  VertexHighEnergyTh(GeV)= 100000\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n             eBremSB : Emin=    0 eV  Emax=    1 GeV  ModifiedTsai\n            eBremLPM : Emin=    1 GeV Emax=  100 TeV  ModifiedTsai\n\nannihil:  for e+ XStype:2 SubType=5 BuildTable=0\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            eplus2gg : Emin=    0 eV  Emax=  100 TeV\n\nCoulombScat:  for e+ XStype:1 SubType=1 BuildTable=1\n      Lambda table from 100 MeV to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=  100 MeV Emax=  100 TeV\n\nmsc:  for proton  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for proton  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               Bragg : Emin=    0 eV  Emax=    2 MeV\n          BetheBloch : Emin=    2 MeV Emax=  100 TeV\n\nhBrems:  for proton  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for proton  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 17x1001; from 7.50618 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for proton XStype:1 SubType=1 BuildTable=1\n      Lambda table from threshold  to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for GenericIon  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            UrbanMsc : Emin=    0 eV  Emax=  100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nionIoni:  for GenericIon  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.02\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            BraggIon : Emin=    0 eV  Emax=    2 MeV\n          BetheBloch : Emin=    2 MeV Emax=  100 TeV\n\nmsc:  for alpha  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            UrbanMsc : Emin=    0 eV  Emax=  100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nionIoni:  for alpha  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.02\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            BraggIon : Emin=    0 eV  Emax=7.9452 MeV\n          BetheBloch : Emin=7.9452 MeV Emax=  100 TeV\n\nmsc:  for anti_proton  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for anti_proton  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            ICRU73QO : Emin=    0 eV  Emax=    2 MeV\n          BetheBloch : Emin=    2 MeV Emax=  100 TeV\n\nhBrems:  for anti_proton  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for anti_proton  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 17x1001; from 7.50618 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for anti_proton XStype:1 SubType=1 BuildTable=1\n      Lambda table from threshold  to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for kaon+  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for kaon+  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               Bragg : Emin=    0 eV  Emax=1.05231 MeV\n          BetheBloch : Emin=1.05231 MeV Emax=  100 TeV\n\nhBrems:  for kaon+  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for kaon+  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 18x1001; from 3.94942 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for kaon+ XStype:1 SubType=1 BuildTable=1\n      Lambda table from threshold  to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for kaon-  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for kaon-  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            ICRU73QO : Emin=    0 eV  Emax=1.05231 MeV\n          BetheBloch : Emin=1.05231 MeV Emax=  100 TeV\n\nhBrems:  for kaon-  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for kaon-  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 18x1001; from 3.94942 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for kaon- XStype:1 SubType=1 BuildTable=1\n      Used Lambda table of kaon+\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for mu+  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nmuIoni:  for mu+  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               Bragg : Emin=    0 eV  Emax=  200 keV\n        MuBetheBloch : Emin=  200 keV Emax=  100 TeV\n\nmuBrems:  for mu+  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n              MuBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nmuPairProd:  for mu+  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 21x1001; from 0.85 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n          muPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for mu+ XStype:1 SubType=1 BuildTable=1\n      Lambda table from threshold  to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for mu-  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nmuIoni:  for mu-  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            ICRU73QO : Emin=    0 eV  Emax=  200 keV\n        MuBetheBloch : Emin=  200 keV Emax=  100 TeV\n\nmuBrems:  for mu-  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n              MuBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nmuPairProd:  for mu-  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 21x1001; from 0.85 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n          muPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for mu- XStype:1 SubType=1 BuildTable=1\n      Used Lambda table of mu+\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for pi+  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for pi+  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               Bragg : Emin=    0 eV  Emax=297.505 keV\n          BetheBloch : Emin=297.505 keV Emax=  100 TeV\n\nhBrems:  for pi+  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for pi+  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 20x1001; from 1.11656 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for pi+ XStype:1 SubType=1 BuildTable=1\n      Lambda table from threshold  to 100 TeV, 7 bins/decade, spline: 0\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\nmsc:  for pi-  SubType= 10\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n        WentzelVIUni : Emin=    0 eV  Emax=  100 TeV Nbins=84 100 eV  - 100 TeV\n          StepLim=Minimal Rfact=0.2 Gfact=2.5 Sfact=0.6 DispFlag:0 Skin=1 Llim=1 mm\n\nhIoni:  for pi-  XStype:3  SubType=2\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      StepFunction=(0.2, 0.1 mm), integ: 3, fluct: 1, linLossLim= 0.01\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n            ICRU73QO : Emin=    0 eV  Emax=297.505 keV\n          BetheBloch : Emin=297.505 keV Emax=  100 TeV\n\nhBrems:  for pi-  XStype:1  SubType=3\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n               hBrem : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nhPairProd:  for pi-  XStype:1  SubType=4\n      dE/dx and range tables from 100 eV  to 100 TeV in 84 bins\n      Lambda tables from threshold to 100 TeV, 7 bins/decade, spline: 1\n      Sampling table 20x1001; from 1.11656 GeV to 100 TeV \n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n           hPairProd : Emin=    0 eV  Emax=  100 TeV  ModifiedMephi\n\nCoulombScat:  for pi- XStype:1 SubType=1 BuildTable=1\n      Used Lambda table of pi+\n      ThetaMin(p) < Theta(degree) < 180, pLimit(GeV^1)= 0.139531\n      ===== EM models for the G4Region  DefaultRegionForTheWorld ======\n  eCoulombScattering : Emin=    0 eV  Emax=  100 TeV\n\n====================================================================\n                  HADRONIC PROCESSES SUMMARY (verbose level 1)\n-----------------------------------------------------------------------\n                           Hadronic Processes for B-\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: B-Inelastic\n        Model:                      FTFP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for D-\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: D-Inelastic\n        Model:                      FTFP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for GenericIon\n  Process: ionInelastic\n        Model:  Binary Light Ion Cascade: 0 eV /n ---> 6 GeV/n\n        Model:                      FTFP: 3 GeV/n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n  Process: ionElastic\n        Model:          NNDiffuseElastic: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for He3\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n  Process: He3Inelastic\n        Model:  Binary Light Ion Cascade: 0 eV /n ---> 6 GeV/n\n        Model:                      FTFP: 3 GeV/n ---> 100 TeV/n\n     Cr_sctns:     G4ParticleInelasticXS: 0 eV  ---> 25.6 PeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for alpha\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n  Process: alphaInelastic\n        Model:  Binary Light Ion Cascade: 0 eV /n ---> 6 GeV/n\n        Model:                      FTFP: 3 GeV/n ---> 100 TeV/n\n     Cr_sctns:     G4ParticleInelasticXS: 0 eV  ---> 25.6 PeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_He3\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100.1 MeV/n\n        Model:              AntiAElastic: 100 MeV/n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_He3Inelastic\n        Model:                      FTFP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_alpha\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100.1 MeV/n\n        Model:              AntiAElastic: 100 MeV/n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_alphaInelastic\n        Model:                      FTFP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_deuteron\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100.1 MeV/n\n        Model:              AntiAElastic: 100 MeV/n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_deuteronInelastic\n        Model:                      FTFP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-------------------------------------------------------------------------\n                           Hadronic Processes for anti_hypertriton\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_lambda\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: anti_lambdaInelastic\n        Model:                      FTFP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_neutron\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100.1 MeV\n        Model:              AntiAElastic: 100 MeV ---> 100 TeV\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_neutronInelastic\n        Model:                      FTFP: 0 eV  ---> 100 TeV\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_proton\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100.1 MeV\n        Model:              AntiAElastic: 100 MeV ---> 100 TeV\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_protonInelastic\n        Model:                      FTFP: 0 eV  ---> 100 TeV\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for anti_triton\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100.1 MeV/n\n        Model:              AntiAElastic: 100 MeV/n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: anti_tritonInelastic\n        Model:                      FTFP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:              AntiAGlauber: 0 eV  ---> 25.6 PeV\n  Process: hFritiofCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for deuteron\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n  Process: dInelastic\n        Model:  Binary Light Ion Cascade: 0 eV /n ---> 6 GeV/n\n        Model:                      FTFP: 3 GeV/n ---> 100 TeV/n\n     Cr_sctns:     G4ParticleInelasticXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for e+\n  Process: positronNuclear\n        Model:   G4ElectroVDNuclearModel: 0 eV  ---> 1 PeV\n     Cr_sctns:          ElectroNuclearXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for e-\n  Process: electronNuclear\n        Model:   G4ElectroVDNuclearModel: 0 eV  ---> 1 PeV\n     Cr_sctns:          ElectroNuclearXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for gamma\n  Process: photonNuclear\n        Model:               GammaNPreco: 0 eV  ---> 200 MeV\n        Model:            BertiniCascade: 199 MeV ---> 6 GeV\n        Model:           TheoFSGenerator: 3 GeV ---> 100 TeV\n     Cr_sctns:            GammaNuclearXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for kaon+\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: kaon+Inelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 0 eV  ---> 6 GeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for kaon-\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: kaon-Inelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 0 eV  ---> 6 GeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: hBertiniCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for lambda\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: lambdaInelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 0 eV  ---> 6 GeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for mu+\n  Process: muonNuclear\n        Model:      G4MuonVDNuclearModel: 0 eV  ---> 1 PeV\n     Cr_sctns:     KokoulinMuonNuclearXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for mu-\n  Process: muonNuclear\n        Model:      G4MuonVDNuclearModel: 0 eV  ---> 1 PeV\n     Cr_sctns:     KokoulinMuonNuclearXS: 0 eV  ---> 100 TeV\n  Process: muMinusCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for neutron\n  Process: hadElastic\n        Model:             hElasticCHIPS: 0 eV  ---> 100 TeV\n     Cr_sctns:        G4NeutronElasticXS: 0 eV  ---> 100 TeV\n  Process: neutronInelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 1 GeV ---> 6 GeV\n        Model:            Binary Cascade: 0 eV  ---> 1.5 GeV\n     Cr_sctns:      G4NeutronInelasticXS: 0 eV  ---> 100 TeV\n  Process: nCapture\n        Model:               nRadCapture: 0 eV  ---> 100 TeV\n     Cr_sctns:        G4NeutronCaptureXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for pi+\n  Process: hadElastic\n        Model:           hElasticGlauber: 0 eV  ---> 100 TeV\n     Cr_sctns:  BarashenkovGlauberGribov: 0 eV  ---> 100 TeV\n  Process: pi+Inelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 1 GeV ---> 12 GeV\n        Model:            Binary Cascade: 0 eV  ---> 1.5 GeV\n     Cr_sctns:  BarashenkovGlauberGribov: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for pi-\n  Process: hadElastic\n        Model:           hElasticGlauber: 0 eV  ---> 100 TeV\n     Cr_sctns:  BarashenkovGlauberGribov: 0 eV  ---> 100 TeV\n  Process: pi-Inelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 1 GeV ---> 12 GeV\n        Model:            Binary Cascade: 0 eV  ---> 1.5 GeV\n     Cr_sctns:  BarashenkovGlauberGribov: 0 eV  ---> 100 TeV\n  Process: hBertiniCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for proton\n  Process: hadElastic\n        Model:             hElasticCHIPS: 0 eV  ---> 100 TeV\n     Cr_sctns:  BarashenkovGlauberGribov: 0 eV  ---> 100 TeV\n  Process: protonInelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 1 GeV ---> 6 GeV\n        Model:            Binary Cascade: 0 eV  ---> 1.5 GeV\n     Cr_sctns:     G4ParticleInelasticXS: 0 eV  ---> 100 TeV\n-----------------------------------------------------------------------\n                           Hadronic Processes for sigma-\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV  ---> 100 TeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: sigma-Inelastic\n        Model:                      FTFP: 3 GeV ---> 100 TeV\n        Model:            BertiniCascade: 0 eV  ---> 6 GeV\n     Cr_sctns:            Glauber-Gribov: 0 eV  ---> 100 TeV\n  Process: hBertiniCaptureAtRest\n-----------------------------------------------------------------------\n                           Hadronic Processes for triton\n  Process: hadElastic\n        Model:              hElasticLHEP: 0 eV /n ---> 100 TeV/n\n     Cr_sctns:  Glauber-Gribov Nucl-nucl: 0 eV  ---> 25.6 PeV\n  Process: tInelastic\n        Model:  Binary Light Ion Cascade: 0 eV /n ---> 6 GeV/n\n        Model:                      FTFP: 3 GeV/n ---> 100 TeV/n\n     Cr_sctns:     G4ParticleInelasticXS: 0 eV  ---> 25.6 PeV\n=======================================================================\n======       Geant4 Native Pre-compound Model Parameters       ========\n=======================================================================\nType of pre-compound inverse x-section              3\nPre-compound model active                           1\nPre-compound excitation low energy                  100 keV\nPre-compound excitation high energy                 30 MeV\nAngular generator for pre-compound model            1\nUse NeverGoBack option for pre-compound model       0\nUse SoftCutOff option for pre-compound model        0\nUse CEM transitions for pre-compound model          1\nUse GNASH transitions for pre-compound model        0\nUse HETC submodel for pre-compound model            0\n=======================================================================\n======       Nuclear De-excitation Module Parameters           ========\n=======================================================================\nType of de-excitation inverse x-section             3\nType of de-excitation factory                       Evaporation+GEM\nNumber of de-excitation channels                    68\nMin excitation energy                               10 eV \nMin energy per nucleon for multifragmentation       200 GeV\nLimit excitation energy for Fermi BreakUp           20 MeV\nLevel density (1/MeV)                               0.075\nUse simple level density model                      1\nUse discrete excitation energy of the residual      1\nTime limit for long lived isomeres                  1 ns \nIsomer production flag                              1\nInternal e- conversion flag                         1\nStore e- internal conversion data                   0\nCorrelated gamma emission flag                      0\nMax 2J for sampling of angular correlations         10\n=======================================================================\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 1,   Parent ID = 0\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0        0        0     -160         6        0        0         0       World initStep\n    1        0        0     -150         6        0       10        10    Envelope Transportation\n    2        0        0     -100         6        0       50        60      Shape1 Transportation\n    3        0        0      -40         6        0       60       120    Envelope Transportation\n    4        0        0       40         6        0       80       200      Shape2 Transportation\n    5        0        0      100         6        0       60       260    Envelope Transportation\n    6        0        0      120         0        0     19.7       280    Envelope conv\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e+,   Track ID = 3,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0        0        0      120      2.63        0        0         0    Envelope initStep\n    1    0.287   -0.054      124      1.97    0.658     4.38      4.38    Envelope eIoni\n    2     1.97    -1.02      126      1.25    0.722     3.57      7.96    Envelope eIoni\n    3     3.98   -0.525      125     0.846    0.403     2.66      10.6    Envelope eIoni\n    4     5.52   -0.303      125      0.47    0.376     2.11      12.7    Envelope eIoni\n    5     5.97    0.428      125         0     0.47     1.43      14.1    Envelope eIoni\n    6     5.97    0.428      125         0        0        0      14.1    Envelope annihil\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 5,   Parent ID = 3\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     5.97    0.428      125     0.511        0        0         0    Envelope initStep\n    1     14.3     14.5      115     0.216        0     19.1      19.1    Envelope compt\n    2    -43.5     14.3      107     0.179        0     58.3      77.4    Envelope compt\n    3    -51.7   0.0612      100     0.179        0     17.9      95.3      Shape2 Transportation\n    4    -56.9    -8.91     95.5     0.126        0     11.3       107      Shape2 compt\n    5    -53.4    -11.5      100     0.126        0     6.22       113    Envelope Transportation\n    6    -14.3    -40.4      150     0.126        0     69.8       183       World Transportation\n    7     9.19    -57.8      180     0.126        0     41.9       224  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 8,   Parent ID = 5\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -56.9    -8.91     95.5    0.0535        0        0         0      Shape2 initStep\n    1    -56.9    -8.91     95.5         0   0.0535   0.0285    0.0285      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 7,   Parent ID = 5\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -43.5     14.3      107    0.0371        0        0         0    Envelope initStep\n    1    -43.5     14.3      107         0   0.0371   0.0257    0.0257    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 6,   Parent ID = 5\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     14.3     14.5      115     0.295        0        0         0    Envelope initStep\n    1     14.6     14.8      115         0    0.295    0.825     0.825    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 4,   Parent ID = 3\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     5.97    0.428      125     0.511        0        0         0    Envelope initStep\n    1    -3.03    -14.9      136     0.436        0     20.7      20.7    Envelope compt\n    2    -94.3    -74.8      150     0.436        0      110       131       World Transportation\n    3     -120    -91.7      154     0.436        0       31       162  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 9,   Parent ID = 4\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -3.03    -14.9      136     0.075        0        0         0    Envelope initStep\n    1    -3.01    -14.9      136         0    0.075   0.0881    0.0881    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 2,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0        0        0      120      2.35        0        0         0    Envelope initStep\n    1    -3.18    0.599      121      1.77    0.577     4.01      4.01    Envelope eIoni\n    2    -5.35    0.371      123       1.2    0.569      3.3      7.31    Envelope eIoni\n    3    -6.68      1.1      125     0.761    0.441     2.58      9.89    Envelope eIoni\n    4    -7.97     1.59      125     0.187    0.574     1.97      11.9    Envelope eIoni\n    5    -8.11     1.58      125         0    0.187    0.407      12.3    Envelope eIoni\n\n\n\n\n\n0","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"ApplyCommand(UImanager, \"/gun/particle e+\")\nApplyCommand(UImanager, \"/gun/energy 60 MeV\")\nApplyCommand(UImanager, \"/run/beamOn 1\")","category":"page"},{"location":"notebooks/B1/","page":"Example B1","title":"Example B1","text":"*********************************************************************************************************\n* G4Track Information:   Particle = e+,   Track ID = 1,   Parent ID = 0\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0        0        0     -160        60        0        0         0       World initStep\n    1        0        0     -150        60  0.00202       10        10    Envelope Transportation\n    2    0.459    0.277     -134      55.3     2.56     15.9      25.9    Envelope eBrem\n    3   -0.521     2.15     -100        49     6.24     34.3      60.2      Shape1 Transportation\n    4     3.14     6.53    -80.2      44.5     3.95     20.6      80.8      Shape1 eIoni\n    5      4.3     7.36      -76      43.2    0.791     4.49      85.3      Shape1 eIoni\n    6     5.68     8.66    -69.8      41.7      1.2     6.44      91.7      Shape1 eIoni\n    7     6.22      9.2    -67.3      40.5     0.49     2.67      94.4      Shape1 eIoni\n    8     9.19     12.2    -52.8      35.9     3.08       15       109      Shape1 eIoni\n    9     11.5     14.6      -40      33.4     2.53     13.3       123    Envelope Transportation\n   10     12.4     17.1    -30.7      31.4     1.66     9.66       132    Envelope eIoni\n   11     12.5     17.8      -28      28.5    0.419     2.78       135    Envelope eIoni\n   12     10.4     22.7     6.34      22.7     5.85       35       170    Envelope eIoni\n   13     4.05     20.8     33.5      18.1     4.57     28.1       198    Envelope eIoni\n   14      1.5     19.3       40        17     1.12      7.2       205      Shape2 Transportation\n   15    -4.27     14.7     50.5      12.9     4.14       13       218      Shape2 eIoni\n   16    -5.85     9.68       59      9.87     2.99     10.2       229      Shape2 eIoni\n   17    -6.21     7.52     61.1      5.37    0.885     3.04       232      Shape2 eBrem\n   18     -6.7     4.27     64.5      3.86      1.5     5.08       237      Shape2 eIoni\n   19     -8.8     1.28     64.6      2.75     1.11     4.02       241      Shape2 eIoni\n   20    -11.3    0.408     65.4      1.85    0.899     3.23       244      Shape2 eIoni\n   21      -12    0.491     65.9      1.61    0.197    0.814       245      Shape2 eBrem\n   22    -13.2    0.614     67.2     0.908    0.705     2.37       247      Shape2 eIoni\n   23    -13.5    0.877     68.3     0.324    0.584     1.71       249      Shape2 eIoni\n   24    -13.3    0.912     68.5         0    0.324    0.539       249      Shape2 eIoni\n   25    -13.3    0.912     68.5         0        0        0       249      Shape2 annihil\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 13,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -13.3    0.912     68.5     0.511        0        0         0      Shape2 initStep\n    1      -60     7.12     82.3     0.511        0     49.1      49.1    Envelope Transportation\n    2     -100     12.4     94.2     0.511        0     42.1      91.1       World Transportation\n    3     -120     15.1      100     0.511        0       21       112  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 12,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -13.3    0.912     68.5     0.511        0        0         0      Shape2 initStep\n    1      3.2    -1.29     63.6     0.463        0     17.4      17.4      Shape2 compt\n    2     30.3     7.38     48.1     0.272        0     32.4      49.8      Shape2 compt\n    3       60     20.5     84.7     0.272        0     48.8      98.6    Envelope Transportation\n    4      100     38.1      134     0.272        0     65.9       164       World Transportation\n    5      120     46.9      159     0.272        0     32.9       197  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 15,   Parent ID = 12\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     30.3     7.38     48.1     0.191        0        0         0      Shape2 initStep\n    1     30.4     7.39       48         0    0.191    0.244     0.244      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 14,   Parent ID = 12\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0      3.2    -1.29     63.6    0.0477        0        0         0      Shape2 initStep\n    1     3.21     -1.3     63.6         0   0.0477   0.0233    0.0233      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 11,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0      -12    0.491     65.9    0.0393        0        0         0      Shape2 initStep\n    1    -17.2    0.202     70.4         0 0.000538      6.9       6.9      Shape2 phot\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 16,   Parent ID = 11\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -17.2    0.202     70.4    0.0388        0        0         0      Shape2 initStep\n    1    -17.2    0.196     70.4         0   0.0388   0.0162    0.0162      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 10,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -6.21     7.52     61.1      3.62        0        0         0      Shape2 initStep\n    1    -5.85    -3.21     70.5      2.05        0     14.2      14.2      Shape2 compt\n    2   -0.994    -15.7      100      2.05        0     32.4      46.7    Envelope Transportation\n    3    0.775    -20.2      111      1.08        0     11.8      58.5    Envelope compt\n    4    -1.83    -10.2      150      1.08        0     40.6        99       World Transportation\n    5    -3.82    -2.61      180      1.08        0       31       130  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 18,   Parent ID = 10\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    0.775    -20.2      111     0.966        0        0         0    Envelope initStep\n    1     1.26    -21.6      112     0.468    0.498     2.27      2.27    Envelope eIoni\n    2     1.58    -21.8      111     0.178     0.29     1.43       3.7    Envelope eIoni\n    3     1.74    -21.8      111         0    0.178    0.374      4.07    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 17,   Parent ID = 10\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -5.85    -3.21     70.5      1.57        0        0         0      Shape2 initStep\n    1    -6.04    -4.93     70.9     0.973    0.595     2.31      2.31      Shape2 eIoni\n    2    -6.77    -4.16     71.4     0.178    0.796     1.77      4.09      Shape2 eIoni\n    3    -6.74    -4.25     71.4         0    0.178    0.216       4.3      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 9,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     12.5     17.8      -28      2.43        0        0         0    Envelope initStep\n    1     13.4     16.7    -24.5      1.59    0.849     4.11      4.11    Envelope eIoni\n    2       13       17    -21.9      1.17    0.411     3.07      7.18    Envelope eIoni\n    3     11.9     16.1    -20.3     0.722    0.452     2.54      9.72    Envelope eIoni\n    4     10.7     15.5    -20.1     0.423      0.3     1.91      11.6    Envelope eIoni\n    5     10.6       16    -19.5         0    0.423     1.31      12.9    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 8,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     12.4     17.1    -30.7     0.336        0        0         0    Envelope initStep\n    1     12.9       17    -30.4         0    0.336        1         1    Envelope eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 7,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     9.19     12.2    -52.8      1.53        0        0         0      Shape1 initStep\n    1       11     13.1    -51.4     0.726    0.799      2.8       2.8      Shape1 eIoni\n    2     11.8     13.5    -50.4     0.336     0.39     1.81      4.62      Shape1 eIoni\n    3     12.3     13.6    -50.5         0    0.336    0.881       5.5      Shape1 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 6,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     6.22      9.2    -67.3     0.653        0        0         0      Shape1 initStep\n    1     6.47     8.45    -66.3     0.264    0.388      1.7       1.7      Shape1 eIoni\n    2     6.76     8.31    -66.2         0    0.264    0.612      2.31      Shape1 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 5,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     5.68     8.66    -69.8     0.357        0        0         0      Shape1 initStep\n    1     5.32     8.95    -69.5         0    0.357    0.962     0.962      Shape1 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 4,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0      4.3     7.36      -76     0.458        0        0         0      Shape1 initStep\n    1     5.01     7.15    -75.7     0.113    0.345      1.3       1.3      Shape1 eIoni\n    2     4.98     7.19    -75.6         0    0.113    0.155      1.45      Shape1 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 3,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0     3.14     6.53    -80.2     0.602        0        0         0      Shape1 initStep\n    1     4.06      6.2    -79.7      0.22    0.382     1.61      1.61      Shape1 eIoni\n    2     4.24     6.31    -79.6         0     0.22     0.46      2.07      Shape1 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = gamma,   Track ID = 2,   Parent ID = 1\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    0.459    0.277     -134      2.17        0        0         0    Envelope initStep\n    1   -0.628     2.12     -100      2.17        0     34.2      34.2      Shape1 Transportation\n    2    -2.22     4.81    -50.1      1.32        0       50      84.2      Shape1 compt\n    3    -6.91    0.938      -40      1.32        0     11.8        96    Envelope Transportation\n    4    -44.2    -29.8       40      1.32        0     93.5       189      Shape2 Transportation\n    5    -59.8    -42.7     73.4     0.953        0       39       229      Shape2 compt\n    6      -60    -42.8     73.6     0.953        0    0.314       229    Envelope Transportation\n    7     -100    -62.5     97.8     0.953        0     50.8       280       World Transportation\n    8     -120    -72.4      110     0.953        0     25.4       305  OutOfWorld Transportation\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 20,   Parent ID = 2\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -59.8    -42.7     73.4     0.368        0        0         0      Shape2 initStep\n    1    -59.7    -42.7     73.6      0.28   0.0873     0.15      0.15      Shape2 msc\n    2    -59.7    -42.6     73.7     0.223   0.0572    0.154     0.304      Shape2 msc\n    3    -59.5    -42.7     73.7         0    0.223    0.311     0.615      Shape2 eIoni\n\n*********************************************************************************************************\n* G4Track Information:   Particle = e-,   Track ID = 19,   Parent ID = 2\n*********************************************************************************************************\n\nStep#    X(mm)    Y(mm)    Z(mm) KinE(MeV)  dE(MeV) StepLeng TrackLeng  NextVolume ProcName\n    0    -2.22     4.81    -50.1     0.844        0        0         0      Shape1 initStep\n    1    -1.73      5.4      -49     0.557    0.287     1.61      1.61      Shape1 eIoni\n    2    -1.45     5.34      -48     0.247     0.31     1.52      3.13      Shape1 eIoni\n    3    -1.19      5.4    -48.2         0    0.247    0.551      3.68      Shape1 eIoni\n\n\n\n\n\n0","category":"page"},{"location":"releases/#Release-Notes","page":"Release Notes","title":"Release Notes","text":"","category":"section"},{"location":"releases/#0.1.15","page":"Release Notes","title":"0.1.15","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"Fixes:\nReturned threadid is -2 for non-multithreaded builds of Geant4","category":"page"},{"location":"releases/#0.1.14","page":"Release Notes","title":"0.1.14","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New Features:\nAdded function getfield(pos::G4ThreeVector, bfield::G4JLMagneticField)\nAdded G4JLEmptyDetector as default detector (for testing and tutorials)\nbuild some protection to re-use physics lists in case re-creating an G4JLApplication ","category":"page"},{"location":"releases/#0.1.13","page":"Release Notes","title":"0.1.13","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New Features:\nAdded wrappers for PhysicsLists classes: G4DecayPhysics, G4EmStandardPhysics, G4RadioactiveDecayPhysics\nImplemented user stacking action\nAdded examples basic/B3a","category":"page"},{"location":"releases/#0.1.12","page":"Release Notes","title":"0.1.12","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"Moved the examples to new repository https://github.com/JuliaHEP/G4Examples.jl\nFixes:\nVeto CLHEP::HepRandomEngine::get to avoid clash with Base.get\nDisable finalizer for class G4JLStateDependent. Fixes event display.","category":"page"},{"location":"releases/#0.1.11","page":"Release Notes","title":"0.1.11","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"Migrated to Julia 1.10\nUsing the latest version of WrapIt to generate the CxxWrap wrappers\nNew features\nAdded G4JLGeneralParticleSource, which makes use of the Geant4 G4GeneralParticleSource class for generation of primary particles for simulations. See documentation.\nAdded a new extension module G4Hist that defines convenient histogram types (H1D and H2D) on top of FHist.jl. See documentation. ","category":"page"},{"location":"releases/#0.1.10","page":"Release Notes","title":"0.1.10","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New features\nProvide an EventDisplay as a building block of the application. New evtdisplay argument in the constructor. \nAdded new wrapped classes to support event displays: G4EventManager, G4TrajectoryContainer, G4VTrajectory, G4VTrajectoryPoint, G4StateManager, G4VStateDependent G4ApplicationState","category":"page"},{"location":"releases/#0.1.9","page":"Release Notes","title":"0.1.9","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"Changes needed for running ATLTileCalTB example ","category":"page"},{"location":"releases/#0.1.8","page":"Release Notes","title":"0.1.8","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New features:\nAdded all example scripts as tests, so that the CI will systematically execute them.\nAdded new wrapped classes: G4LogicalVolumeStore, G4MaterialPropertiesTable, G4OpticalParameters, G4OpticalSurface, G4LogicalBorderSurface, G4LogicalSkinSurface, G4VProcess, G4ProcessType, G4Random, G4EmStandardPhysics_option4, G4OpticalPhysics, G4OpBoundaryProcess, G4ProcessManager, G4ProcessVector\nAdded Geant4.PhysicalConstants sub-module\nAdded testRandom to the test suite\nAdded Scintillation example with scintillating crystals and optical photons\nFixes:\nFixed broken [visualization] examples\nImprove HBC30 example to visualize trajectories in a more smooth manner. Moved it under ext/G4Vis/examples","category":"page"},{"location":"releases/#0.1.7","page":"Release Notes","title":"0.1.7","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New features:\nSupport for ARM64 (MacOS M1). Implemented workaround for closures in @safe_cfunction, which were for supported in this  platform. \nAdded support for magnetic field. Additional keyword argument in the G4JLApplication. Added example HBC30 for a simulation of a liquid hydrogen bubble chamber.\nAdded drawing capabilities for G4Polyhedra, G4EllipticalTube, G4Ellipsoid\nFixes:\nFix example WaterPhantom to added to new callback closures","category":"page"},{"location":"releases/#0.1.6","page":"Release Notes","title":"0.1.6","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New features:\nRestructured G4Vis as an extension of Geant4.jl. It is automatically loaded when all the required weak dependencies are satisfied (e.g. \"Makie\", \"Colors\", \"StaticArrays\", \"Rotations\", \"LinearAlgebra\")\nAdded missing basic solids including the BooleanSolid\nUsing the IGLWrap_jll binary wrapper to libigl C++ library to draw boolean solids.\nAdded notebook ext/G4Vis/Solids.ipynb to exercise and draw all possible solids (some are still missing)","category":"page"},{"location":"releases/#0.1.5","page":"Release Notes","title":"0.1.5","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"New features:\nSupport for Multi-threading. New parameter in G4JLApplication to set the number of threads. Default is serial, nthreads = 0\nAdded verbosity level with the argument verbose in G4JLApplication\nFixes:\nFix continuous pre-compilation after moving to Julia 1.9\nFix for embedded figures in notebooks","category":"page"},{"location":"releases/#0.1.4","page":"Release Notes","title":"0.1.4","text":"","category":"section"},{"location":"releases/","page":"Release Notes","title":"Release Notes","text":"Added support for scoring with G4JLScoringMesh function\nAdded generation of documentation including running the jupyter notebooks","category":"page"},{"location":"notebooks/TestEm3/#TestEM3-Example","page":"Example TestEm3","title":"TestEM3 Example","text":"","category":"section"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"using Geant4\nusing Geant4.SystemOfUnits\nusing FHist, Printf, Plots","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Define Detector Parameters struct--------------------------------------------------------------\ninclude(joinpath(@__DIR__, \"DetectorTestEm3.jl\"))","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Define Simulation Data struct------------------------------------------------------------------\n# In this example we share the same data structiure for all worker threads, so we need to protect \n# with a lock\nmutable struct TestEm3SimData <: G4JLSimulationData\n    #---Run data-----------------------------------------------------------------------------------\n    fParticle::CxxPtr{G4ParticleDefinition}\n    fEkin::Float64\n    \n    fChargedStep::Int32\n    fNeutralStep::Int32\n\n    fN_gamma::Int32\n    fN_elec::Int32\n    fN_pos::Int32\n\n    fEnergyDeposit::Vector{Float64}     # Energy deposit per event\n    fTrackLengthCh::Vector{Float64}     # Track length per event\n\n    fEdepEventHistos::Vector{Hist1D}\n    fTrackLengthChHistos::Vector{Hist1D}\n    fEdepHistos::Vector{Hist1D}\n    fAbsorLabel::Vector{String}\n\n    TestEm3SimData() = new()\nend\n#---add function-----------------------------------------------------------------------------------\nfunction add!(x::TestEm3SimData, y::TestEm3SimData)\n    x.fChargedStep += y.fChargedStep\n    x.fNeutralStep += y.fNeutralStep\n    x.fN_gamma += y.fN_gamma\n    x.fN_elec += y.fN_elec\n    x.fN_pos += y.fN_pos\n    x.fEdepEventHistos += y.fEdepEventHistos\n    x.fTrackLengthChHistos += y.fTrackLengthChHistos\n    x.fEdepHistos += y.fEdepHistos\nend","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"add! (generic function with 1 method)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Plot the Sumulation data-----------------------------------------------------------------------\nfunction do_plot(data::TestEm3SimData)\n    (;fEdepHistos, fEdepEventHistos, fTrackLengthChHistos, fAbsorLabel) = data\n    lay = @layout [°; ° °]\n    p = plot(layout=lay, show=true, size=(1000,800))\n    for (h, l) in zip(fEdepHistos, fAbsorLabel)\n        plot!(subplot=1, h, title=\"Energy Deposition\", xlabel=\"layer #\", label=l, show=true)\n    end\n    for (h, l) in zip(fEdepEventHistos, fAbsorLabel)\n        plot!(subplot=2, h, title=\"Energy/event Distribution\", label=l, xlabel=\"MeV\")\n    end\n    for (h, l) in zip(fTrackLengthChHistos, fAbsorLabel)\n        plot!(subplot=3, h, title=\"Track Lengh Distribution\", label=l, xlabel=\"mm\")\n    end\n    display(\"image/png\", p)\nend","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"do_plot (generic function with 1 method)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Particle Gun initialization--------------------------------------------------------------------\nparticlegun = G4JLGunGenerator(particle = \"e-\", \n                               energy = 1GeV, \n                               direction = G4ThreeVector(1,0,0), \n                               position = G4ThreeVector(0,0,0))  # temporary potition, will update once the detector is constructed\n","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"G4JLGunGenerator(\"ParticleGun\", Geant4.G4JLParticleGunData(nothing, \"e-\", G4ThreeVector(1.0,0.0,0.0), G4ThreeVector(0.0,0.0,0.0), 1000.0), Geant4.var\"#init#19\"(), Geant4.var\"#gen#20\"(), G4JLGeneratorAction[])","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#--------------------------------------------------------------------------------------------------\n#----Actions---------------------------------------------------------------------------------------\n#--------------------------------------------------------------------------------------------------\n#---Step action------------------------------------------------------------------------------------\nfunction stepaction(step::G4Step, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    detector = app.detector\n    prepoint = GetPreStepPoint(step)\n    endPoint = GetPostStepPoint(step)\n    track = GetTrack(step)\n \n    # Return if step in not in the world volume\n    prepoint |> GetPhysicalVolume |> GetLogicalVolume |> GetMaterial == detector.fWorldMaterial && return nothing\n \n    particle = GetDefinition(track)\n    charge  = GetPDGCharge(particle)\n    stepl = 0.\n    if charge != 0.\n        stepl = GetStepLength(step)\n        data.fChargedStep += 1\n    else\n        data.fNeutralStep += 1\n    end\n    edep = GetTotalEnergyDeposit(step) * GetWeight(track)\n    absorNum  = GetCopyNumber(GetTouchable(prepoint), 0)\n    layerNum  = GetCopyNumber(GetTouchable(prepoint), 1) + 1  # replicas copynumber starts at 0\n\n    data.fEnergyDeposit[absorNum] += edep\n    data.fTrackLengthCh[absorNum] += stepl \t\n\n    push!(data.fEdepHistos[absorNum], layerNum, edep)\n    nothing\nend\n\n#---Tracking pre-action----------------------------------------------------------------------------\nlet G4Gamma, G4Electron, G4Positron, first=true\nglobal function pretrackaction(track::G4Track, app::G4JLApplication)::Nothing\n    if first\n        G4Gamma    = FindParticle(\"gamma\")\n        G4Electron = FindParticle(\"e-\")\n        G4Positron = FindParticle(\"e+\")\n        first = false\n    end\n    data = getSIMdata(app)\n    d = GetDefinition(track)\n    if d === G4Gamma \n        data.fN_gamma += 1\n    elseif d === G4Electron\n        data.fN_elec +=1\n    elseif d === G4Positron\n        data.fN_pos += 1\n    end\n    nothing\nend\nend\n#---Tracking post-action---------------------------------------------------------------------------\nfunction posttrackaction(track::G4Track, ::G4JLApplication)::Nothing\n  return\nend\n#---Begin Run Action-------------------------------------------------------------------------------\nfunction beginrun(run::G4Run, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    (; fNbOfAbsor, fNbOfLayers, fAbsorMaterial, fAbsorThickness) = app.detector\n    gun = app.generator.data.gun\n    data.fParticle = GetParticleDefinition(gun)\n    data.fEkin = GetParticleEnergy(gun)\n    data.fN_gamma = data.fN_elec = data.fN_pos = 0\n    data.fChargedStep = data.fNeutralStep = 0\n    # init arrays\n    data.fEnergyDeposit = zeros(fNbOfAbsor)\n    data.fTrackLengthCh = zeros(fNbOfAbsor)\n    data.fEdepHistos = [Hist1D(Float64; bins=0.:1.0:fNbOfLayers) for i in 1:fNbOfAbsor]\n    data.fEdepEventHistos = [Hist1D(;bins=0:10:1000) for i in 1:fNbOfAbsor]\n    data.fTrackLengthChHistos = [Hist1D(;bins=0:20:2000) for i in 1:fNbOfAbsor]\n    data.fAbsorLabel = [\"$(fAbsorThickness[i])mm of $(fAbsorMaterial[i] |> GetName |> String)\" for i in 1:fNbOfAbsor]\n    return\nend\n#---End Run Action---------------------------------------------------------------------------------\nfunction endrun(run::G4Run, app::G4JLApplication)::Nothing\n    #---end run action is called for each workwer thread and the master onc\n    if G4Threading!G4GetThreadId() < 0   \n        data = app.simdata[1]\n        #---This is the master thread, so we need to add all the simuation results-----------------\n        for d in app.simdata[2:end]\n            add!(data, d)\n        end\n        nEvt = GetNumberOfEvent(run)\n        norm = nEvt > 0 ? 1/nEvt : 1.\n\n        @printf \"------------------------------------------------------------\\n\"\n        @printf \" Beam particle %s E = %.2f GeV\\n\" String(GetParticleName(data.fParticle)) data.fEkin/GeV \n        @printf \" Mean number of gamma          %.2f\\n\" data.fN_gamma*norm \n        @printf \" Mean number of e-             %.2f\\n\" data.fN_elec*norm \n        @printf \" Mean number of e+             %.2f\\n\" data.fN_pos*norm \n        @printf \" Mean number of charged steps  %f\\n\"   data.fChargedStep*norm \n        @printf \" Mean number of neutral steps  %f\\n\"   data.fNeutralStep*norm \n        @printf \"------------------------------------------------------------\\n\"\n    else\n        G4JL_println(\"end-run  for worker $(G4Threading!G4GetThreadId())\") \n    end\nend\n#---Begin Event Action-----------------------------------------------------------------------------\nfunction beginevent(evt::G4Event, app::G4JLApplication)\n    data = getSIMdata(app)\n    fill!(data.fEnergyDeposit, 0.0)\n    fill!(data.fTrackLengthCh, 0.0)\n    return\nend\n#---End Event Action-------------------------------------------------------------------------------\nfunction endevent(evt::G4Event, app::G4JLApplication)\n    data = getSIMdata(app)\n    (; fNbOfAbsor, fNbOfLayers) = app.detector\n    for i in 1:fNbOfAbsor\n        push!(data.fEdepEventHistos[i], data.fEnergyDeposit[i])\n        push!(data.fTrackLengthChHistos[i], data.fTrackLengthCh[i])\n    end\n    return\nend\n","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"endevent (generic function with 1 method)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Create the Application-------------------------------------------------------------------------\napp = G4JLApplication(detector = TestEm3Detector(),               # detector with parameters\n                      simdata = TestEm3SimData(),                 # simulation data structure\n                      generator = particlegun,                    # primary particle generator\n                      nthreads = 8,                               # number of threads (MT)\n                      physics_type = FTFP_BERT,                   # what physics list to instantiate\n                      #----Actions--------------------------------\n                      stepaction_method = stepaction,             # step action method\n                      pretrackaction_method = pretrackaction,     # pre-tracking action\n                      posttrackaction_method = posttrackaction,   # post-tracking action\n                      beginrunaction_method = beginrun,           # begin-run action (initialize counters and histograms)\n                      endrunaction_method = endrun,               # end-run action (print summary)               \n                      begineventaction_method = beginevent,       # begin-event action (initialize per-event data)\n                      endeventaction_method = endevent            # end-event action (fill histogram per event data)\n                      );\n              \n\n#ui\"/tracking/verbose 1\"","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n  << in Multi-threaded mode >> \n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"#---Configure, Initialize and Run------------------------------------------------------------------                      \nconfigure(app)\ninitialize(app)\nSetParticlePosition(particlegun, G4ThreeVector(-app.detector.fWorldSizeX/2,0,0))  # Only now is known the size of the 'world'","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"Building Geometry now!!!\n\n\n### G4LevelReader: broken transition 0 from level 24 to 24 for isotope Z= 89 A= 219 - use ground level","category":"page"},{"location":"notebooks/TestEm3/#Start-the-initial-run","page":"Example TestEm3","title":"Start the initial run","text":"","category":"section"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"beamOn(app, 1000)\ndo_plot(app.simdata[1])","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"G4WT6 > end-run  for worker 6\nG4WT2 > end-run  for worker 2\nG4WT0 > end-run  for worker 0\nG4WT4 > end-run  for worker 4\nG4WT7 > end-run  for worker 7\nG4WT3 > end-run  for worker 3\nG4WT1 > end-run  for worker 1\nG4WT5 > end-run  for worker 5\n------------------------------------------------------------\n Beam particle e- E = 1.00 GeV\n\n\n Mean number of gamma          520.61\n Mean number of e-             894.80\n Mean number of e+             53.32\n Mean number of charged steps  3727.175000\n Mean number of neutral steps  3724.099000\n------------------------------------------------------------","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"(Image: png)","category":"page"},{"location":"notebooks/TestEm3/#Change-the-particle-gun-energy","page":"Example TestEm3","title":"Change the particle gun energy","text":"","category":"section"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"SetParticleEnergy(particlegun, 100MeV)\nbeamOn(app, 100)\ndo_plot(app.simdata[1])","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"G4WT7 > end-run  for worker 7\nG4WT1 > end-run  for worker 1\nG4WT4 > end-run  for worker 4\nG4WT2 > end-run  for worker 2\nG4WT3 > end-run  for worker 3\nG4WT0 > end-run  for worker 0\nG4WT6 > end-run  for worker 6\nG4WT5 > end-run  for worker 5\n------------------------------------------------------------\n Beam particle e- E = 0.10 GeV\n Mean number of gamma          51.22\n Mean number of e-             89.88\n Mean number of e+             4.77\n Mean number of charged steps  369.980000\n Mean number of neutral steps  374.400000\n------------------------------------------------------------","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"(Image: png)","category":"page"},{"location":"notebooks/TestEm3/#Change-the-geometry-and-re-start-the-run","page":"Example TestEm3","title":"Change the geometry and re-start the run","text":"","category":"section"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"reinitialize(app, TestEm3Detector(absorThickness = [2.3mm, 5.7mm, 1mm],\n                                  absorMaterial = [\"G4_Pb\", \"G4_lAr\", \"G4_Al\"]))\nbeamOn(app, 100)\ndo_plot(app.simdata[1])","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"Building Geometry now!!!\nG4WT3 > end-run  for worker 3\nG4WT1 > end-run  for worker 1\nG4WT4 > end-run  for worker 4\nG4WT7 > end-run  for worker 7\nG4WT0 > end-run  for worker 0\nG4WT6 > end-run  for worker 6\nG4WT5 > end-run  for worker 5\nG4WT2 > end-run  for worker 2\n------------------------------------------------------------\n Beam particle e- E = 0.10 GeV\n Mean number of gamma          48.94\n Mean number of e-             86.95\n Mean number of e+             4.43\n Mean number of charged steps  406.210000\n Mean number of neutral steps  461.200000\n------------------------------------------------------------","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"(Image: png)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"@time beamOn(app, 10000)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"G4WT3 > end-run  for worker 3\nG4WT4 > end-run  for worker 4\nG4WT2 > end-run  for worker 2\nG4WT5 > end-run  for worker 5\nG4WT1 > end-run  for worker 1\nG4WT7 > end-run  for worker 7\nG4WT6 > end-run  for worker 6\nG4WT0 > end-run  for worker 0\n------------------------------------------------------------\n Beam particle e- E = 0.10 GeV\n Mean number of gamma          49.38\n Mean number of e-             87.43\n Mean number of e+             4.65\n Mean number of charged steps  396.380500\n Mean number of neutral steps  468.174500\n------------------------------------------------------------\n  6.130967 seconds (20.23 M allocations: 309.024 MiB)","category":"page"},{"location":"notebooks/TestEm3/#Change-the-definition-of-the-action-and-re-start","page":"Example TestEm3","title":"Change the definition of the action and re-start","text":"","category":"section"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"function posttrackaction(track::G4Track, ::G4JLApplication)::Nothing\n    G4JL_println(\"Track ID: $(GetTrackID(track)) ended\")\nend\nbeamOn(app, 3)","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"G4WT0 > end-run  for worker 0\nG4WT7 > end-run  for worker 7\nG4WT1 > end-run  for worker 1\nG4WT6 > end-run  for worker 6\nG4WT5 > end-run  for worker 5\nG4WT4 > Track ID: 1 ended\nG4WT2 > Track ID: 1 ended\nG4WT4 > Track ID: 7 ended\nG4WT4 > Track ID: 8 ended\nG4WT3 > Track ID: 1 ended\nG4WT4 > Track ID: 6 ended\nG4WT2 > Track ID: 16 ended\nG4WT4 > Track ID: 5 ended\nG4WT3 > Track ID: 18 ended\nG4WT4 > Track ID: 9 ended\nG4WT3 > Track ID: 21 ended\nG4WT3 > Track ID: 20 ended\nG4WT2 > Track ID: 18 ended\nG4WT4 > Track ID: 4 ended\nG4WT2 > Track ID: 21 ended\nG4WT4 > Track ID: 10 ended\nG4WT2 > Track ID: 23 ended\nG4WT2 > Track ID: 22 ended\nG4WT2 > Track ID: 20 ended\nG4WT3 > Track ID: 19 ended\nG4WT2 > Track ID: 24 ended\nG4WT3 > Track ID: 17 ended\nG4WT2 > Track ID: 19 ended\nG4WT4 > Track ID: 3 ended\nG4WT3 > Track ID: 16 ended\nG4WT3 > Track ID: 22 ended\nG4WT3 > Track ID: 23 ended\nG4WT2 > Track ID: 17 ended\nG4WT2 > Track ID: 26 ended\nG4WT2 > Track ID: 28 ended\nG4WT3 > Track ID: 15 ended\nG4WT2 > Track ID: 27 ended\nG4WT3 > Track ID: 24 ended\nG4WT3 > Track ID: 14 ended\nG4WT2 > Track ID: 25 ended\nG4WT3 > Track ID: 25 ended\nG4WT2 > Track ID: 30 ended\nG4WT2 > Track ID: 29 ended\nG4WT2 > Track ID: 15 ended\nG4WT2 > Track ID: 14 ended\nG4WT3 > Track ID: 13 ended\nG4WT2 > Track ID: 31 ended\nG4WT3 > Track ID: 28 ended\nG4WT2 > Track ID: 13 ended\nG4WT3 > Track ID: 27 ended\nG4WT2 > Track ID: 32 ended\nG4WT3 > Track ID: 26 ended\nG4WT2 > Track ID: 12 ended\nG4WT2 > Track ID: 34 ended\nG4WT3 > Track ID: 12 ended\nG4WT2 > Track ID: 33 ended\nG4WT3 > Track ID: 29 ended\nG4WT3 > Track ID: 11 ended\nG4WT4 > Track ID: 12 ended\nG4WT3 > Track ID: 30 ended\nG4WT2 > Track ID: 11 ended\nG4WT2 > Track ID: 37 ended\nG4WT4 > Track ID: 33 ended\nG4WT2 > Track ID: 36 ended\nG4WT4 > Track ID: 34 ended\nG4WT4 > Track ID: 32 ended\nG4WT3 > Track ID: 10 ended\nG4WT4 > Track ID: 35 ended\nG4WT2 > Track ID: 35 ended\nG4WT4 > Track ID: 31 ended\nG4WT2 > Track ID: 40 ended\nG4WT4 > Track ID: 36 ended\nG4WT2 > Track ID: 41 ended\nG4WT2 > Track ID: 39 ended\nG4WT4 > Track ID: 30 ended\nG4WT3 > Track ID: 32 ended\nG4WT3 > Track ID: 37 ended\nG4WT4 > Track ID: 37 ended\nG4WT3 > Track ID: 38 ended\nG4WT2 > Track ID: 42 ended\nG4WT4 > Track ID: 29 ended\nG4WT2 > Track ID: 38 ended\nG4WT4 > Track ID: 38 ended\nG4WT3 > Track ID: 36 ended\nG4WT2 > Track ID: 43 ended\nG4WT3 > Track ID: 40 ended\nG4WT2 > Track ID: 10 ended\nG4WT4 > Track ID: 28 ended\nG4WT2 > Track ID: 45 ended\nG4WT2 > Track ID: 44 ended\nG4WT2 > Track ID: 9 ended\nG4WT4 > Track ID: 40 ended\nG4WT3 > Track ID: 39 ended\nG4WT2 > Track ID: 46 ended\nG4WT3 > Track ID: 35 ended\nG4WT2 > Track ID: 8 ended\nG4WT2 > Track ID: 7 ended\nG4WT3 > Track ID: 41 ended\nG4WT4 > Track ID: 39 ended\nG4WT4 > Track ID: 42 ended\nG4WT3 > Track ID: 34 ended\nG4WT3 > Track ID: 45 ended\nG4WT4 > Track ID: 41 ended\nG4WT3 > Track ID: 44 ended\nG4WT3 > Track ID: 43 ended\nG4WT4 > Track ID: 27 ended\nG4WT2 > Track ID: 48 ended\nG4WT4 > Track ID: 43 ended\nG4WT2 > Track ID: 59 ended\nG4WT2 > Track ID: 60 ended\nG4WT2 > Track ID: 58 ended\nG4WT4 > Track ID: 26 ended\nG4WT2 > Track ID: 62 ended\nG4WT2 > Track ID: 61 ended\nG4WT4 > Track ID: 45 ended\nG4WT2 > Track ID: 57 ended\nG4WT3 > Track ID: 42 ended\nG4WT4 > Track ID: 44 ended\nG4WT2 > Track ID: 64 ended\nG4WT4 > Track ID: 25 ended\nG4WT2 > Track ID: 63 ended\nG4WT4 > Track ID: 46 ended\nG4WT2 > Track ID: 56 ended\nG4WT4 > Track ID: 24 ended\nG4WT2 > Track ID: 65 ended\nG4WT3 > Track ID: 33 ended\nG4WT4 > Track ID: 47 ended\nG4WT2 > Track ID: 55 ended\nG4WT3 > Track ID: 46 ended\nG4WT2 > Track ID: 67 ended\nG4WT4 > Track ID: 23 ended\nG4WT2 > Track ID: 66 ended\nG4WT4 > Track ID: 52 ended\nG4WT2 > Track ID: 54 ended\nG4WT4 > Track ID: 51 ended\nG4WT2 > Track ID: 69 ended\nG4WT4 > Track ID: 50 ended\nG4WT2 > Track ID: 68 ended\nG4WT4 > Track ID: 49 ended\nG4WT2 > Track ID: 53 ended\nG4WT2 > Track ID: 71 ended\nG4WT3 > Track ID: 31 ended\nG4WT2 > Track ID: 70 ended\nG4WT4 > Track ID: 48 ended\nG4WT3 > Track ID: 52 ended\nG4WT2 > Track ID: 52 ended\nG4WT4 > Track ID: 22 ended\nG4WT2 > Track ID: 74 ended\nG4WT2 > Track ID: 73 ended\nG4WT3 > Track ID: 54 ended\nG4WT2 > Track ID: 72 ended\nG4WT4 > Track ID: 53 ended\nG4WT3 > Track ID: 53 ended\nG4WT2 > Track ID: 51 ended\nG4WT2 > Track ID: 76 ended\nG4WT2 > Track ID: 75 ended\nG4WT4 > Track ID: 21 ended\nG4WT2 > Track ID: 50 ended\nG4WT2 > Track ID: 80 ended\nG4WT2 > Track ID: 79 ended\nG4WT2 > Track ID: 78 ended\nG4WT2 > Track ID: 77 ended\nG4WT2 > Track ID: 49 ended\nG4WT2 > Track ID: 84 ended\nG4WT2 > Track ID: 83 ended\nG4WT2 > Track ID: 82 ended\nG4WT2 > Track ID: 81 ended\nG4WT3 > Track ID: 51 ended\nG4WT3 > Track ID: 56 ended\nG4WT4 > Track ID: 55 ended\nG4WT3 > Track ID: 55 ended\nG4WT4 > Track ID: 63 ended\nG4WT3 > Track ID: 57 ended\nG4WT4 > Track ID: 64 ended\nG4WT4 > Track ID: 62 ended\nG4WT4 > Track ID: 66 ended\nG4WT4 > Track ID: 65 ended\nG4WT2 > Track ID: 47 ended\nG4WT2 > Track ID: 86 ended\nG4WT2 > Track ID: 87 ended\nG4WT4 > Track ID: 61 ended\nG4WT2 > Track ID: 85 ended\nG4WT4 > Track ID: 67 ended\nG4WT4 > Track ID: 70 ended\nG4WT2 > Track ID: 91 ended\nG4WT4 > Track ID: 69 ended\nG4WT2 > Track ID: 90 ended\nG4WT2 > Track ID: 89 ended\nG4WT4 > Track ID: 68 ended\nG4WT4 > Track ID: 71 ended\nG4WT4 > Track ID: 72 ended\nG4WT4 > Track ID: 60 ended\nG4WT2 > Track ID: 88 ended\nG4WT4 > Track ID: 74 ended\nG4WT2 > Track ID: 95 ended\nG4WT2 > Track ID: 96 ended\nG4WT2 > Track ID: 94 ended\nG4WT2 > Track ID: 97 ended\nG4WT2 > Track ID: 93 ended\nG4WT2 > Track ID: 98 ended\nG4WT2 > Track ID: 92 ended\nG4WT2 > Track ID: 99 ended\nG4WT4 > Track ID: 73 ended\nG4WT4 > Track ID: 59 ended\nG4WT2 > Track ID: 6 ended\nG4WT3 > Track ID: 50 ended\nG4WT4 > Track ID: 75 ended\nG4WT3 > Track ID: 49 ended\nG4WT2 > Track ID: 101 ended\nG4WT4 > Track ID: 58 ended\nG4WT4 > Track ID: 76 ended\nG4WT2 > Track ID: 100 ended\nG4WT4 > Track ID: 57 ended\nG4WT4 > Track ID: 78 ended\nG4WT4 > Track ID: 77 ended\nG4WT4 > Track ID: 56 ended\nG4WT2 > Track ID: 5 ended\nG4WT3 > Track ID: 59 ended\nG4WT2 > Track ID: 103 ended\nG4WT3 > Track ID: 61 ended\nG4WT2 > Track ID: 102 ended\nG4WT4 > Track ID: 54 ended\nG4WT3 > Track ID: 63 ended\nG4WT2 > Track ID: 104 ended\nG4WT3 > Track ID: 62 ended\nG4WT4 > Track ID: 84 ended\nG4WT2 > Track ID: 106 ended\nG4WT2 > Track ID: 105 ended\nG4WT4 > Track ID: 85 ended\nG4WT4 > Track ID: 83 ended\nG4WT3 > Track ID: 60 ended\nG4WT4 > Track ID: 87 ended\nG4WT2 > Track ID: 4 ended\nG4WT3 > Track ID: 64 ended\nG4WT3 > Track ID: 58 ended\nG4WT4 > Track ID: 86 ended\nG4WT4 > Track ID: 88 ended\nG4WT4 > Track ID: 89 ended\nG4WT2 > Track ID: 108 ended\nG4WT2 > Track ID: 107 ended\nG4WT2 > Track ID: 110 ended\nG4WT4 > Track ID: 82 ended\nG4WT2 > Track ID: 113 ended\nG4WT2 > Track ID: 112 ended\nG4WT4 > Track ID: 90 ended\nG4WT2 > Track ID: 111 ended\nG4WT3 > Track ID: 48 ended\nG4WT2 > Track ID: 109 ended\nG4WT4 > Track ID: 81 ended\nG4WT2 > Track ID: 114 ended\nG4WT2 > Track ID: 3 ended\nG4WT3 > Track ID: 47 ended\nG4WT4 > Track ID: 91 ended\nG4WT3 > Track ID: 66 ended\nG4WT2 > Track ID: 115 ended\nG4WT4 > Track ID: 80 ended\nG4WT4 > Track ID: 92 ended\nG4WT3 > Track ID: 65 ended\nG4WT2 > Track ID: 2 ended\nG4WT3 > Track ID: 9 ended\nG4WT2 > Track ID: 118 ended\nG4WT4 > Track ID: 79 ended\nG4WT2 > Track ID: 117 ended\nG4WT4 > Track ID: 95 ended\nG4WT4 > Track ID: 94 ended\nG4WT4 > Track ID: 93 ended\nG4WT4 > Track ID: 20 ended\nG4WT2 > Track ID: 116 ended\nG4WT4 > Track ID: 96 ended\nG4WT2 > end-run  for worker 2\nG4WT3 > Track ID: 68 ended\nG4WT4 > Track ID: 19 ended\nG4WT3 > Track ID: 67 ended\nG4WT4 > Track ID: 98 ended\nG4WT3 > Track ID: 8 ended\nG4WT3 > Track ID: 7 ended\nG4WT3 > Track ID: 69 ended\nG4WT3 > Track ID: 6 ended\nG4WT3 > Track ID: 71 ended\nG4WT3 > Track ID: 76 ended\nG4WT3 > Track ID: 77 ended\nG4WT3 > Track ID: 75 ended\nG4WT3 > Track ID: 78 ended\nG4WT3 > Track ID: 74 ended\nG4WT3 > Track ID: 79 ended\nG4WT3 > Track ID: 73 ended\nG4WT3 > Track ID: 80 ended\nG4WT4 > Track ID: 97 ended\nG4WT3 > Track ID: 81 ended\nG4WT3 > Track ID: 82 ended\nG4WT4 > Track ID: 99 ended\nG4WT4 > Track ID: 100 ended\nG4WT4 > Track ID: 18 ended\nG4WT4 > Track ID: 101 ended\nG4WT3 > Track ID: 72 ended\nG4WT3 > Track ID: 70 ended\nG4WT3 > Track ID: 86 ended\nG4WT3 > Track ID: 88 ended\nG4WT3 > Track ID: 87 ended\nG4WT3 > Track ID: 85 ended\nG4WT3 > Track ID: 90 ended\nG4WT3 > Track ID: 89 ended\nG4WT3 > Track ID: 84 ended\nG4WT3 > Track ID: 83 ended\nG4WT3 > Track ID: 91 ended\nG4WT3 > Track ID: 5 ended\nG4WT3 > Track ID: 92 ended\nG4WT3 > Track ID: 4 ended\nG4WT4 > Track ID: 17 ended\nG4WT3 > Track ID: 93 ended\nG4WT4 > Track ID: 16 ended\nG4WT4 > Track ID: 15 ended\nG4WT3 > Track ID: 3 ended\nG4WT4 > Track ID: 102 ended\nG4WT4 > Track ID: 14 ended\nG4WT4 > Track ID: 106 ended\nG4WT4 > Track ID: 105 ended\nG4WT3 > Track ID: 95 ended\nG4WT4 > Track ID: 104 ended\nG4WT4 > Track ID: 103 ended\nG4WT3 > Track ID: 100 ended\nG4WT4 > Track ID: 13 ended\nG4WT4 > Track ID: 108 ended\nG4WT4 > Track ID: 107 ended\nG4WT3 > Track ID: 103 ended\nG4WT3 > Track ID: 102 ended\nG4WT3 > Track ID: 101 ended\nG4WT3 > Track ID: 99 ended\nG4WT3 > Track ID: 104 ended\nG4WT3 > Track ID: 98 ended\nG4WT3 > Track ID: 106 ended\nG4WT3 > Track ID: 105 ended\nG4WT3 > Track ID: 97 ended\nG4WT4 > Track ID: 11 ended\nG4WT3 > Track ID: 107 ended\nG4WT4 > Track ID: 113 ended\nG4WT4 > Track ID: 114 ended\nG4WT4 > Track ID: 112 ended\nG4WT4 > Track ID: 115 ended\nG4WT3 > Track ID: 96 ended\nG4WT3 > Track ID: 110 ended\nG4WT4 > Track ID: 111 ended\nG4WT3 > Track ID: 109 ended\nG4WT4 > Track ID: 117 ended\nG4WT4 > Track ID: 119 ended\nG4WT4 > Track ID: 120 ended\nG4WT3 > Track ID: 108 ended\nG4WT4 > Track ID: 118 ended\nG4WT4 > Track ID: 122 ended\nG4WT4 > Track ID: 121 ended\nG4WT4 > Track ID: 116 ended\nG4WT4 > Track ID: 110 ended\nG4WT4 > Track ID: 124 ended\nG4WT4 > Track ID: 123 ended\nG4WT4 > Track ID: 109 ended\nG4WT4 > Track ID: 125 ended\nG4WT3 > Track ID: 94 ended\nG4WT4 > Track ID: 2 ended\nG4WT4 > Track ID: 127 ended\nG4WT3 > Track ID: 111 ended\nG4WT4 > Track ID: 129 ended\nG4WT3 > Track ID: 112 ended\nG4WT4 > Track ID: 130 ended\nG4WT4 > Track ID: 128 ended\nG4WT4 > Track ID: 132 ended\nG4WT3 > Track ID: 2 ended\nG4WT4 > Track ID: 131 ended\nG4WT3 > Track ID: 115 ended\nG4WT4 > Track ID: 126 ended\nG4WT3 > Track ID: 114 ended\nG4WT4 > Track ID: 133 ended\nG4WT4 > end-run  for worker 4\nG4WT3 > Track ID: 113 ended\nG4WT3 > Track ID: 117 ended\nG4WT3 > Track ID: 118 ended\nG4WT3 > Track ID: 116 ended\nG4WT3 > Track ID: 119 ended\nG4WT3 > end-run  for worker 3\n------------------------------------------------------------\n Beam particle e- E = 0.10 GeV\n\n\n Mean number of gamma          44.00\n Mean number of e-             76.00\n Mean number of e+             3.33\n Mean number of charged steps  422.666667\n Mean number of neutral steps  322.666667\n------------------------------------------------------------","category":"page"},{"location":"notebooks/TestEm3/","page":"Example TestEm3","title":"Example TestEm3","text":"","category":"page"},{"location":"api/#Public-API","page":"Public API","title":"Public API","text":"","category":"section"},{"location":"api/","page":"Public API","title":"Public API","text":"Documentation for Geant4.jl public interface.","category":"page"},{"location":"api/#Index-Types","page":"Public API","title":"Index - Types","text":"","category":"section"},{"location":"api/","page":"Public API","title":"Public API","text":"Pages   = [\"api.md\"]\nModules = [Geant4]\nOrder   = [:type]","category":"page"},{"location":"api/#Index-Functions","page":"Public API","title":"Index - Functions","text":"","category":"section"},{"location":"api/","page":"Public API","title":"Public API","text":"Pages   = [\"api.md\"]\nModules = [Geant4]\nOrder   = [:function]","category":"page"},{"location":"api/#Types","page":"Public API","title":"Types","text":"","category":"section"},{"location":"api/","page":"Public API","title":"Public API","text":"Modules = [Geant4]\nOrder = [:type]","category":"page"},{"location":"api/#Geant4.G4JLApplication-Tuple{}","page":"Public API","title":"Geant4.G4JLApplication","text":"G4JLApplication(<keyword arguments>)\n\nInitialize a G4JLApplication with its associated tyopes and methods.\n\nArguments\n\ndetector::G4JLDetector: detector description object\nsimdata=G4JLNoData(): simulation data object\ngenerator=G4JLParticleGun(): primary particle generator\nfield=nothing: magnetic field\nevtdisplay=nothing: event display (visualization)\nnthreads=0: number of Geant4 worker threads ( >0 implies MT)\nverbose=0 : default verbority level (physics, ...)\nrunmanager_type=G4RunManager: run manager type\nbuilder_type=G4JLDetectorConstruction: detector builder type (the default should be fine most cases)\nphysics_type=FTFP_BERT: physics list type\nstepaction_type=G4JLSteppingAction: stepping action type (the default should be fine most cases)\ntrackaction_type=G4JLTrackingAction: rtacking action type (the default should be fine most cases)\nrunaction_type=G4JLRunAction: run action type (the default should be fine most cases)\neventaction_type=G4JLEventAction: event action type (the default should be fine most cases)\nstepaction_method=nothing: stepping action method with signature (::G4Step, ::G4JLApplication)::Nothing\npretrackaction_method=nothing: pre-tracking action method with signature (::G4Track, ::G4JLApplication)::Nothing\nposttrackaction_method=nothing: post-tracking action method with signature (::G4Track, ::G4JLApplication)::Nothing\nbeginrunaction_method=nothing: begin run action method with signature (::G4Run, ::G4JLApplication)::Nothing\nendrunaction_method=nothing: end run action method with signature (::G4Run, ::G4JLApplication)::Nothing\nbegineventaction_method=nothing: begin event action method with signature (::G4Event, ::G4JLApplication)::Nothing\nendeventaction_method=nothing: end event action method with signature (::G4Event, ::G4JLApplication)::Nothing\nstackaction_method=nothing: stacking classification of new track with signature (::G4Track, ::G4JLApplication)::G4ClassificationOfNewTrack\nstatechange_method=nothing: state change notifycation method with  signature (from::G4ApplicationState, to::G4ApplicationState, ::G4JLApplication)::Bool\nsdetectors::Vector{}=[]: vector of pairs lv::String => sd::G4JLSensitiveDetector to associate logical volumes to sensitive detector\nscorers::Vector{}=[]: vector of G4JLScoringMeshs\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.G4JLDetectorGDML-Tuple{String}","page":"Public API","title":"Geant4.G4JLDetectorGDML","text":"G4JLDetectorGDML(gdmlfile::String; check_overlap::Bool, validate_schema::Bool, init_method::Union{Function,Nothing})\n\nInitialize a G4JLDetector from a GDML file. The GDML file is parsed at this moment.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.G4JLMagneticField","page":"Public API","title":"Geant4.G4JLMagneticField","text":"Custom Magnetic Field\n\n\n\n\n\n","category":"type"},{"location":"api/#Geant4.G4JLMagneticField-Union{Tuple{T}, Tuple{String, T}} where T<:G4JLFieldData","page":"Public API","title":"Geant4.G4JLMagneticField","text":"G4JLMagneticField(name::String, data::DATA; <keyword arguments>) where DATA<:G4JLGeneratorData\n\nCreate a G4JLMagneticField with its name and associated DATA structure\n\nArguments\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.G4JLPrimaryGenerator-Union{Tuple{T}, Tuple{String, T}} where T<:G4JLGeneratorData","page":"Public API","title":"Geant4.G4JLPrimaryGenerator","text":"G4JLPrimaryGenerator(name::String, data::DATA; <keyword arguments>) where DATA<:G4JLGeneratorData\n\nCreatre a G4JLPrimaryGenerator with its name and associated DATA structure\n\nArguments\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.G4JLScoringMesh-Union{Tuple{M}, Tuple{String, M}} where M<:Geant4.AbstractMesh","page":"Public API","title":"Geant4.G4JLScoringMesh","text":"G4JLScoringMesh(name, mesh; <keyword arguments>)\n\nCreate a scoring mesh to be added to the Geant4 application.\n\nArguments\n\nname::String: scoring mech name\nmesh::AbstractMesh: mesh instance. Either a BoxMesh or CylinderMesh\nbins::Tuple: tuple with number on bins in x, y, z (default 30, 30, 30)\ntranslation::Tuple: position (x,y,z) with respect the mesh respect to the world volume. Default is  (0,0,0).\nrotation::Tuple: rotation of the mesh with respect the world volume. Default (0,0,0)\nquantities::Vector: vector of quanties to be scored (e.g. energyDeposit, doseDeposit, nOfStep)\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.G4JLSensitiveDetector-Union{Tuple{T}, Tuple{String, T}} where T<:G4JLSDData","page":"Public API","title":"Geant4.G4JLSensitiveDetector","text":"G4JLSensitiveDetector(name::String, data::DATA; <keyword arguments>) where DATA<:G4JLSDData\n\nInitialize a G4JLSensitiveDetector with its name and associated DATA structure.\n\nArguments\n\nname::String: Sensitive detector name\ndata::DATA: Data structure associted to the sensitive detector\nprocesshits_method=nothing: processHit function with signature: (data::DATA, step::G4Step, ::G4TouchableHistory)::Bool\ninitialize_method=nothing: intialize function with signature: (data::DATA, ::G4HCofThisEvent)::Nothing\nendofevent_method=nothing: endOfEvent function with signature: (data::DATA, ::G4HCofThisEvent)::Nothing \n\n\n\n\n\n","category":"method"},{"location":"api/#Functions","page":"Public API","title":"Functions","text":"","category":"section"},{"location":"api/","page":"Public API","title":"Public API","text":"Modules = [Geant4]\nOrder = [:function]","category":"page"},{"location":"api/#Geant4.GetVolume-Tuple{String}","page":"Public API","title":"Geant4.GetVolume","text":"GetVolume(name::String)\n\nGet the  the G4LogicalVolume with this name.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.GetWorldVolume-Tuple{}","page":"Public API","title":"Geant4.GetWorldVolume","text":"GetWorldVolume()\n\nGet the world volume of the currently instantiated detector geometry.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.beamOn-Tuple{G4JLApplication, Int64}","page":"Public API","title":"Geant4.beamOn","text":"beamOn(app::G4JLApplication, nevents::Int)\n\nStart a new run with nevents events.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.configure-Tuple{G4JLApplication}","page":"Public API","title":"Geant4.configure","text":"configure(app::G4JLApplication)\n\nConfigure the Geant4 application. It sets the declared user actions, event generator, and physcis list. \n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.getSDdata-Tuple{Any, Any}","page":"Public API","title":"Geant4.getSDdata","text":"getSDdata(app::G4JLApplication, name::String)\n\nGet the data associated to the Sentitive Detector with a given name taking into account the current worker thread ID \n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.getSIMdata-Tuple{Any}","page":"Public API","title":"Geant4.getSIMdata","text":"getSIMdata(app::G4JLApplication)\n\nGet the Simulation Data taking into account the current worker thread ID \n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.getfield-Tuple{CLHEP!Hep3Vector, G4JLMagneticField}","page":"Public API","title":"Geant4.getfield","text":"getfield(pos::G4ThreeVector, bfield::G4JLMagneticField)\n\nFunction to exercise a custom magnetic field\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.initialize-Tuple{G4JLApplication}","page":"Public API","title":"Geant4.initialize","text":"initialize(app::G4JLApplication)\n\nInitialize the Geant4 application. It initializes the RunManager, which constructs the detector geometry, and sets  the declared sensitive detectors.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.move!-Tuple{Any}","page":"Public API","title":"Geant4.move!","text":"move!(o)\n\nMove ownerhip of C++ object to receiver. The object cannot not be used anymore after this call.\n\n\n\n\n\n","category":"method"},{"location":"api/#Geant4.reinitialize-Tuple{G4JLApplication, G4JLDetector}","page":"Public API","title":"Geant4.reinitialize","text":"reinitialize(app::G4JLApplication, det::G4JLDetector)\n\nRe-initialize the Geant4 application with a new detector defintion.\n\n\n\n\n\n","category":"method"},{"location":"notebooks/Solids/#Geant4-Solids","page":"Example Solids","title":"Geant4 Solids","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Notebook to exercise all the types of solids defined in Geant4. This is the full list:","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"G4Box\nG4Tubs\nG4CutTubs\nG4Para\nG4Trap\nG4Sphere\nG4Orb\nG4Torus\nG4Polycone\nG4Polyhedra\nG4EllipticalTube\nG4Ellipsoid\nG4Cons\nBooleans\nG4SubtractionSolid\nG4IntersectionSolid\nG4UnionSolid","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"using Geant4\nusing Geant4.SystemOfUnits\nusing CairoMakie\nusing GeometryBasics, Rotations, IGLWrap_jll  # to force loding G4Vis extension","category":"page"},{"location":"notebooks/Solids/#G4Box","page":"Example Solids","title":"G4Box","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"box = G4Box(\"Box\", 2,3,4)\nimg = draw(box;color=:green)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Tubs","page":"Example Solids","title":"G4Tubs","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Cylindrical Section or Tube","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"name::String\nrmin::Float64\nrmax::Float64\ndz::Float64\nϕ₀::Float64\nΔϕ::Float64","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"tub1 = G4Tubs(\"tub1\",0,10,10,0,2π)\nimg = draw(tub1, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"tub2 = G4Tubs(\"tub2\",5,10,10,0, 2π/3)\nimg = draw(tub2, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4CutTubs","page":"Example Solids","title":"G4CutTubs","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Cylindrical Cut Section. A cut in Z can be applied to a cylindrical section to obtain a cut tube. ","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Arguments:","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"name::String\nrmin::Float64\nrmax::Float64\ndz::Float64\nϕ₀::Float64\nΔϕ::Float64\nlownormal::G4ThreeVector\nhighnormal::G4ThreeVector","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"ctub = G4CutTubs(\"ctub\", 12, 20, 20, 0, 3π/2, G4ThreeVector(0,-0.7,-0.71), G4ThreeVector(0.7,0,0.71))\nimg = draw(ctub, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Cons","page":"Example Solids","title":"G4Cons","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"name::String\nrmin1::Float64\nrmax1::Float64\nrmin2::Float64\nrmax2::Float64\ndz::Float64\nϕ₀::Float64\nΔϕ::Float64","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"cone1 = G4Cons(\"cone1\", 0, 10, 0, 5, 10, 0, 2π)\nimg = draw(cone1, color=:blue, wireframe=true)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"cone1 = G4Cons(\"cone1\", 5, 10, 20, 25, 40, 0, 3π/4)\nimg = draw(cone1, color=:blue, wireframe=true)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"cone1 = G4Cons(\"cone1\", 5, 10, 2, 5, 5, 0, π/2)\nimg = draw(cone1, color=:orange, shading=true)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"\u001b[33m\u001b[1m┌ \u001b[22m\u001b[39m\u001b[33m\u001b[1mWarning: \u001b[22m\u001b[39m`shading = true` is not valid. Use `Makie.automatic`, `NoShading`, `FastShading` or `MultiLightShading`. Defaulting to `MakieCore.Automatic()`.\n\u001b[33m\u001b[1m└ \u001b[22m\u001b[39m\u001b[90m@ Makie ~/.julia/packages/Makie/ND0gA/src/lighting.jl:243\u001b[39m","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Para","page":"Example Solids","title":"G4Para","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"A parallelepiped is constructed using: | parameter | description | | :–––– | :––––– | | dx,dy,dz | Half-length in x,y,z | | alpha | Angle formed by the Y axis and by the plane joining the centre of the faces parallel to the Z-X plane at -dy and +dy | | theta | Polar angle of the line joining the centres of the faces at -dz and +dz in Z | | phi | Azimuthal angle of the line joining the centres of the faces at -dz and +dz in Z |","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"para = G4Para(\"para\", 20,30,30, 0, π/4, π/6)\n#drawDistanceToOut(para, 100000)\nimg = draw(para, wireframe=true)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Trd","page":"Example Solids","title":"G4Trd","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"function GeometryBasics.coordinates(trd::G4Trd, facets=6)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"x1::Float64   XHalfLength1\nx2::Float64   XHalfLength2\ny1::Float64   YHalfLength1\ny2::Float64   YHalfLength2\nz::Float64    ZHalfLength","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"trd1 = G4Trd(\"trd1\", 10, 5, 10, 5, 5)\nimg = draw(trd1, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Trap","page":"Example Solids","title":"G4Trap","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"To build a generic trapezoid, the G4Trap class is provided. G4Trap is a solid with six trapezoidal faces, it has two bases parallel to the XY-plane and four lateral faces. The bases are located at the same distance from the XY-plane, but on opposite sides from it. Each of the bases has two edges parallel the X-axis. Let’s call the line joining middle point of these edges - the centre line of the base, and the middle point of this line - the centre of the base. An important property of G4Trap is that the line joining the centres of the bases goes through the origin of the local coordinate system.","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nz Half Z length - distance from the origin to the bases\ntheta Polar angle of the line joining the centres of the bases at -/+z\nphi Azimuthal angle of the line joining the centre of the base at -pDz to the centre of the base at +z\ny1, y2 Half Y length of the base at -z. +z\nx1, x2, x3, x4 Half X length at smaller, bigger Y of the base at -z, +z\nalpha1, alpha2 Angle between the Y-axis and the centre line of the base at -z. +z","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"trap = G4Trap(\"trap\", 60, 20deg, 5deg, 40, 30, 40, 10deg, 16, 10, 14, 10deg)\nimg = draw(trap, wireframe=true, color=:green)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Sphere","page":"Example Solids","title":"G4Sphere","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"rmin::Float64 inner radius\nrmax::Float64 outer radius\nϕ₀::Float64 origin phi angle [0,2π]\nΔϕ::Float64 delta phi angle\nθ₀::Float64 origin theta angle [0,π]\nΔθ::Float64 delta theta angle","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"sph = G4Sphere(\"sphere\", 7,10, 0, pi/2, pi/4, pi/2 )\nimg = draw(sph, wireframe=true, color=:gray)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Orb","page":"Example Solids","title":"G4Orb","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Complete sphere","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"orb = G4Orb(\"orb\", 10)\nimg = draw(orb, wireframe=false, color=:green)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Torus","page":"Example Solids","title":"G4Torus","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nrmin Inside radius\nrmax Outside radius\nrtor Swept radius of torus\nϕ₀ Starting phi angle in radians ( ϕ₀+Δϕ <= 2π, ϕ₀ > -2π)\nΔϕ Delta angle of the segment in radians","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"torus = G4Torus(\"torus\", 40, 60, 200, 0, π/2)\nimg = draw(torus, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"img = drawDistanceToOut(torus, 100000)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Polycone","page":"Example Solids","title":"G4Polycone","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nϕ₀ Starting phi angle in radians ( ϕ₀+Δϕ <= 2π, ϕ₀ > -2π)\nΔϕ Delta angle of the segment in radians\nnumZPlanes Number of Z planes\nzPlane Position of Z planes, with Z in increasing order\nrInner Tangent distance to inner surface\nrOuter Tangent distance to outer surface","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"pcon = G4Polycone(\"pcone\", π/4, 3π/2, 9,\n                  [ 5., 7., 9., 11., 25., 27., 29., 31., 37. ],\n                  [ 0., 0., 0., 0., 0., 0., 0., 0., 0. ],\n                  [ 0., 10., 10., 5. , 5., 10. , 10. , 2., 2.]\n                 )","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"Geant4.G4PolyconeAllocated(Ptr{Nothing} @0x00000000042e28d0)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"img = draw(pcon, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Polyhedra","page":"Example Solids","title":"G4Polyhedra","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nϕ₀ Starting phi angle in radians ( ϕ₀+Δϕ <= 2π, ϕ₀ > -2π)\nΔϕ Delta angle of the segment in radians\nnumZPlanes Number of Z planes\nnumSides ! Number of sides \nzPlane Position of Z planes, with Z in increasing order\nrInner Tangent distance to inner surface\nrOuter Tangent distance to outer surface","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"pgon = G4Polyhedra(\"pgon\", -π/4, 5π/4, 3, 7,\n                  [ 0., 5., 8., 13. , 30., 32., 35. ],\n                  [ 0., 0., 0., 0., 0., 0., 0. ],\n                  [ 0., 15., 15., 4., 4., 10., 10.])\nimg = draw(pgon, wireframe=true, color=:blue)\ndisplay(\"image/png\", img)                  ","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4EllipticalTube","page":"Example Solids","title":"G4EllipticalTube","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"A tube with an elliptical cross section with elliptical semi-major and semi-minor axes along the X and Y cartesian axes.","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nxSemiAxis Half length of axis along X\nySemiAxis Half length of axis along Y\nDz Half length Z","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"etub = G4EllipticalTube(\"etube\", 5., 10., 20.)\nimg = draw(etub, wireframe=true, color=:green)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4Ellipsoid","page":"Example Solids","title":"G4Ellipsoid","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"The general ellipsoid with possible cut in Z","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"parameter description\nxSemiAxis Half length of axis along X\nySemiAxis Half length of axis along Y\nzSemiAxis Semiaxis in Z\nzBottomCut lower cut plane level, Z\nzTopCut upper cut plane level, Z","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"ellip = G4Ellipsoid(\"ellip\", 10., 20., 50., -10., 40.)\nimg = draw(ellip, wireframe=true, color=:green)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4SubtractionSolid","page":"Example Solids","title":"G4SubtractionSolid","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"box1 = G4Box(\"box1\", 10,10,10)\ntub1 = G4Tubs(\"tub1\",0,7,11,0,2π)\nsub1 = G4SubtractionSolid(\"sub1\", CxxPtr(box1), CxxPtr(tub1))\nimg = draw(sub1, wireframe=true, color=:green)\n!isnothing(img) && display(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"img = drawDistanceToOut(sub1, 100000)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/#G4IntersectionSolid","page":"Example Solids","title":"G4IntersectionSolid","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"box1 = G4Box(\"box1\", 10,10,10)\nt1 = G4Transform3D(G4RotationMatrix(π/4,0,0), G4ThreeVector())\ninter1 = G4IntersectionSolid(\"inter1\", CxxPtr(box1), CxxPtr(box1), t1)\nimg = draw(inter1, wireframe=true, color=:green)\n!isnothing(img) && display(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"img = drawDistanceToOut(inter1, 100000)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"<a id='G4UnionSolid'></a>","category":"page"},{"location":"notebooks/Solids/#G4UnionSolid","page":"Example Solids","title":"G4UnionSolid","text":"","category":"section"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"tub1 = G4Tubs(\"tub1\",0,5,10,0,2π)\nt1 = G4Transform3D(G4RotationMatrix(0,π/2,0), G4ThreeVector())\nunion1 = G4UnionSolid(\"union1\", CxxPtr(tub1), CxxPtr(tub1), t1)\nimg = draw(union1, wireframe=false, color=:green)\n!isnothing(img) && display(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"img = drawDistanceToOut(union1, 100000)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/Solids/","page":"Example Solids","title":"Example Solids","text":"(Image: png)","category":"page"},{"location":"notebooks/B3a/#Basic/B3a-Example","page":"Example B3a","title":"Basic/B3a Example","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"It is equivalent to the B2a example in Geant4 but re-written with a new more Julia friendly interface. See README file for the example.","category":"page"},{"location":"notebooks/B3a/#Load-modules","page":"Example B3a","title":"Load modules","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"In this example we only need to load the general Geant4 module and the SystemOfUnits one. Please note that not all the units are exported from the SystemOfUnits therefore we explicitly import the ones that ar used in this example. ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"using Geant4\nusing Geant4.SystemOfUnits:  cm, cm3, mm, pGy, eplus, keV, g, eV","category":"page"},{"location":"notebooks/B3a/#Define-Detector","page":"Example B3a","title":"Define Detector","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"We use here a separated file to define the geometry of the detector. It uses the G4 geometry classes, therefore is not too different from the C++ code found in the original example. ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"include(joinpath(@__DIR__, \"DetectorB3.jl\"))","category":"page"},{"location":"notebooks/B3a/#Physics-List","page":"Example B3a","title":"Physics List","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"We could use already made physics lists such as FTFP_BERT or QGS_BIC, but in this example we construct one by selecting the required physics. This is done by providing a struct type inheriting from the type G4VUserPhysicsList, and in the constructor construct a G4VModularPhysicsList instance add register the needed physics. We do not need to create an instance at this moment, we need just to provide the type to the G4JLApplication, which will instantiate it at the appropriate moment in the initialization sequence. ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"struct PhysicsB3a <: G4VUserPhysicsList\n    function PhysicsB3a(verbose)\n        pl = G4VModularPhysicsList()\n        RegisterPhysics(pl, move!(G4DecayPhysics(verbose)))           # Default physics\n        RegisterPhysics(pl, move!(G4EmStandardPhysics(verbose)))      # EM physics\n        RegisterPhysics(pl, move!(G4RadioactiveDecayPhysics(verbose))) # Radioactive decay\n        return pl\n    end\nend","category":"page"},{"location":"notebooks/B3a/#Primary-Particle-Generator","page":"Example B3a","title":"Primary Particle Generator","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"In this example the user provides a custom made primary particle generator using the G4ParticleGun class. A custom particle generator consists of three elements:","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"A custom data structure to hold the configuration parameters of the generator. In this case the struct GeneratorB3aData keeps the Z, A, charge, direction, etc.  of the ion that will be created.\nA user function (_init) to initialize the generator called by the toolkit at initialization time. In this case, we crate an instance of G4ParticleGun that will be used later at each event to create the vertex and primary particle.\nA user function (_gen) that will be called for each event. In this particular case we also do a late initialization of the creation of the ion since it needs to be done after the physics lists is configured.","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Both user functions receive the generate data with the configuration parameters as one of the input arguments. The final step is to instantiate an object of the type G4JLPrimaryGenerator with the configuration data and both user functions.  Please note that user data has been declared with @with_kw, which provides a constructor with all keywords arguments defaults. See Parameters.jl module for the details.   ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"@with_kw mutable struct GeneratorB3aData <: G4JLGeneratorData\n    gun::Union{Nothing, CxxPtr{G4ParticleGun}} = nothing\n    ion::Union{Nothing, CxxPtr{G4ParticleDefinition}} = nothing\n    Z::Int64 = 9\n    A::Int64 = 18\n    ionCharge::Float64 = 0eplus\n    excitEnergy::Float64 = 0keV\n    position::G4ThreeVector = G4ThreeVector(4cm,4cm,4cm)\n    direction::G4ThreeVector = G4ThreeVector(1,0,0)\nend\nfunction GeneratorB3a(;kwargs...)\n    data = GeneratorB3aData(;kwargs...)\n    function _init(data::GeneratorB3aData, ::Any)\n        gun = data.gun = move!(G4ParticleGun())\n        SetParticleMomentumDirection(gun, G4ThreeVector(1,0,0))\n        SetParticleEnergy(gun, 1eV)\n    end\n    function _gen(evt::G4Event, data::GeneratorB3aData)::Nothing\n        if isnothing(data.ion)  # late initialize (after physics processes)\n            ion = data.ion = GetIon(data.Z, data.A, data.excitEnergy)\n            SetParticleDefinition(data.gun, ion)\n            SetParticleCharge(data.gun, data.ionCharge)\n        end\n        position = data.position + G4ThreeVector((rand()-0.5)*1cm, (rand()-0.5)*1cm, (rand()-0.5)*1cm)\n        SetParticlePosition(data.gun, position)\n        GeneratePrimaryVertex(data.gun, CxxPtr(evt))\n    end\n    G4JLPrimaryGenerator(\"GeneratorB3a\", data; init_method=_init, generate_method=_gen)\nend","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"GeneratorB3a (generic function with 1 method)","category":"page"},{"location":"notebooks/B3a/#Define-the-simulation-data-structures","page":"Example B3a","title":"Define the simulation data structures","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"The main outcome of the simulation is a custom struct with what the user wants to obtain. This is typically a set of counters, histograms, etc. In this example we want to to collect the number of 'good' events (two crystals with energy deposited >500keV) and the accumulated dose in the 'patient' volume. These are the two members of the struct. In addition, if the user wants to run in MT mode, it needs to provide a add! function to reduce the results that has been obtained by the different worker threads. In this case is very simple, we just need to sum both counters.      ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"mutable struct SimDataB3a <: G4JLSimulationData\n    #---Run data\n    goodEvents::Int64\n    sumDose::Float64\n    SimDataB3a() = new(0,0)\nend\nfunction add!(x::SimDataB3a, y::SimDataB3a)\n    x.goodEvents += y.goodEvents\n    x.sumDose += y.sumDose\nend","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"add! (generic function with 1 method)","category":"page"},{"location":"notebooks/B3a/#Sensitive-Detector-Crystal","page":"Example B3a","title":"Sensitive Detector Crystal","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"We will collect the energy deposited in the crystals a 'sensitive detector'. This is done, similarly to the way we have created the custom primary particle generator by providing three elements:","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"A custom data structure with what data we want to collect every time a particle enters the 'sensitive detector'. In this case, we want to fill a dictionary with the crystal number and the accumulated deposited energy.\nA custom function to initialize the data structure, that is called for each event. In this case, the user simply empties the dictionary. \nA custom function to collect the information that is called for each particle entering the associated volume. In this function, the use navigates the G4 data structures to obtain the required information.","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Both functions receive the custom data structure as one of the arguments. The final step is to instance a G4JLSensitiveDetector with the 3 elements. ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"struct CrystalData <: G4JLSDData\n    edep::Dict{Int64,Float64} # (CopyNo, Edep)\n    CrystalData() = new(Dict{Int64,Float64}())\nend\nfunction c_initialize(::G4HCofThisEvent, data::CrystalData)::Nothing\n    empty!(data.edep)\n    return\nend\nfunction c_processHits(step::G4Step, ::G4TouchableHistory, data::CrystalData)::Bool\n    edep = step |> GetTotalEnergyDeposit\n    edep <  0. && return false\n    copy = step |> GetPreStepPoint |> GetTouchable |> GetCopyNumber\n    data.edep[copy] = haskey(data.edep, copy) ? data.edep[copy] + edep : edep\n    return true\nend\n#---Create SD instance\ncrystalSD = G4JLSensitiveDetector(\"CrystalSD\", CrystalData();          # SD name an associated data are mandatory\n                                   processhits_method=c_processHits,   # process hist method (also mandatory)\n                                   initialize_method=c_initialize)     # intialize method\n","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Geant4.G4JLProtoSD{CrystalData}(\"CrystalSD\", CrystalData(Dict{Int64, Float64}()), c_processHits, c_initialize, nothing)","category":"page"},{"location":"notebooks/B3a/#Sensitive-Detector-Patient","page":"Example B3a","title":"Sensitive Detector Patient","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"This is similar to the previous one but for the 'patient' volume. In this case we simply sum the dose produced by each particle entering the volume.","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"mutable struct PatientData <: G4JLSDData\n    dose::Float64\n    PatientData() = new(0)\nend\nfunction p_initialize(::G4HCofThisEvent, data::PatientData)::Nothing\n    data.dose = 0\n    return\nend\nfunction p_processHits(step::G4Step, ::G4TouchableHistory, data::PatientData)::Bool\n    edep = step |> GetTotalEnergyDeposit\n    edep <  0. && return false\n    volume  = step |> GetPreStepPoint |> GetTouchable |> GetSolid |> GetCubicVolume\n    density = step |> GetPreStepPoint |> GetMaterial |> GetDensity\n    data.dose += edep /(density * volume)\n    return true\nend\n#---Create SD instance\npatientSD = G4JLSensitiveDetector(\"PatientSD\", PatientData();           # SD name an associated data are mandatory\n                                   processhits_method=p_processHits,    # process hist method (also mandatory)\n                                   initialize_method=p_initialize)      # intialize method\n","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Geant4.G4JLProtoSD{PatientData}(\"PatientSD\", PatientData(0.0), p_processHits, p_initialize, nothing)","category":"page"},{"location":"notebooks/B3a/#User-Actions","page":"Example B3a","title":"User Actions","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"User actions at the proper moment during the execution of the simulation. ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Run actions: in this example we use the run actions to initialize the simulation data (beginrun) and print the results of the run (endrun). Please note that the end on run action is called by each worker thread, therefore we need to use the master one (thread_id == -1) to accumulate the results of all workers. This is done by calling the defined add! function. \nEvent action: the event action is used to get the data from the sensitive detector structure, which can be accessed with getSDdata(app, \"CrystalSD\") or getSDdata(app, \"PatientSD\") with CrystalSD and PatientSD being the names given to the sensitive detectors, and accumulate it in the simulation data. \nStacking action: it is used to kill neutrinos that we do not need to track.  ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"function beginrun(run::G4Run, app::G4JLApplication)::Nothing\n    data = getSIMdata(app)\n    data.goodEvents = 0\n    data.sumDose = 0.\n    nothing\nend\n\nfunction endrun(run::G4Run, app::G4JLApplication)::Nothing\n    partName = app.generator.data.gun |> GetParticleDefinition |> GetParticleName |> String\n    #---end run action is called for each workwer thread and the master one\n    if G4Threading!G4GetThreadId() < 0\n        data = app.simdata[1]\n        #---This is the master thread, so we need to add all the simuation results-----------------\n        for d in app.simdata[2:end]\n            add!(data, d)\n        end\n        noEvents = run |> GetNumberOfEvent\n        G4JL_println(\"\"\"\n                     --------------------End of Run------------------------------\n                      The run was $noEvents $partName Nb of 'good' e+ annihilations: $(data.goodEvents)\n                      Total dose in patient : $(data.sumDose/pGy) pGy\n                     ------------------------------------------------------------ \n                     \"\"\")\n    end\nend \n#---Event Action\nfunction endevent(evt::G4Event, app::G4JLApplication)\n    edep = getSDdata(app, \"CrystalSD\").edep\n    dose = getSDdata(app, \"PatientSD\").dose\n    data = getSIMdata(app)\n    if count(>(500keV), values(edep)) == 2\n        data.goodEvents += 1\n    end\n    data.sumDose += dose\n    return\nend\n#---Stacking Action\nlet G4NeutrinoE, first=true\nglobal function stacking(trk::G4Track, app::G4JLApplication)::G4ClassificationOfNewTrack\n    if first  # emulation of C++ static \n        G4NeutrinoE = FindParticle(\"nu_e\")\n        first = false\n    end\n    (trk |> GetParentID) == 0 && return fUrgent               # keep primary particle\n    (trk |> GetDefinition) == G4NeutrinoE && return fKill     # kill neutrino\n    return fUrgent\nend\nend","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"stacking (generic function with 1 method)","category":"page"},{"location":"notebooks/B3a/#Geant4-Application","page":"Example B3a","title":"Geant4 Application","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Finally we create an instance of G4JLApplication with all the defined elements: detector, simulation data, generator, type of the physics list, the user actions and the mapping between sensitive detector and volume in the geometry.  ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"#---Application------------------------------------------------------------------------------------\napp = G4JLApplication(; detector = DetectorB3(),                      # detector with parameters\n                        simdata = SimDataB3a(),                       # simulation data structure\n                        generator = GeneratorB3a(),                   # primary particle generator\n                        nthreads = 0,                                 # # of threads (0 = no MT)\n                        physics_type = PhysicsB3a,                    # what physics list to instantiate\n                        #evtdisplay =  display,                        # set event display \n                        endeventaction_method = endevent,             # end-event action (fill histograms per event)\n                        beginrunaction_method = beginrun,             # begin run action\n                        endrunaction_method = endrun,                 # end run action\n                        stackaction_method = stacking,                # track classification action\n                        sdetectors = [\"CrystalLV+\" => crystalSD,\n                                      \"PatientLV\" => patientSD]       # mapping of LVs to SDs (+ means multiple LVs with same name)\n                      );\n\nconfigure(app)\ninitialize(app)","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************\n\ncryst_mat = CxxPtr{G4Material}(Ptr{G4Material} @0x0000000002aaf730)\nChecking overlaps for volume crystal:0 (G4Box) ... OK! \nChecking overlaps for volume crystal:1 (G4Box) ... OK! \nChecking overlaps for volume crystal:2 (G4Box) ... OK! \nChecking overlaps for volume crystal:3 (G4Box) ... OK! \nChecking overlaps for volume crystal:4 (G4Box) ... OK! \nChecking overlaps for volume crystal:5 (G4Box) ... OK! \nChecking overlaps for volume crystal:6 (G4Box) ... OK! \nChecking overlaps for volume crystal:7 (G4Box) ... OK! \nChecking overlaps for volume crystal:8 (G4Box) ... OK! \nChecking overlaps for volume crystal:9 (G4Box) ... OK! \nChecking overlaps for volume crystal:10 (G4Box) ... OK! \nChecking overlaps for volume crystal:11 (G4Box) ... OK! \nChecking overlaps for volume crystal:12 (G4Box) ... OK! \nChecking overlaps for volume crystal:13 (G4Box) ... OK! \nChecking overlaps for volume crystal:14 (G4Box) ... OK! \nChecking overlaps for volume crystal:15 (G4Box) ... OK! \nChecking overlaps for volume crystal:16 (G4Box) ... OK! \nChecking overlaps for volume crystal:17 (G4Box) ... OK! \nChecking overlaps for volume crystal:18 (G4Box) ... OK! \nChecking overlaps for volume crystal:19 (G4Box) ... OK! \nChecking overlaps for volume crystal:20 (G4Box) ... OK! \nChecking overlaps for volume crystal:21 (G4Box) ... OK! \nChecking overlaps for volume crystal:22 (G4Box) ... OK! \nChecking overlaps for volume crystal:23 (G4Box) ... OK! \nChecking overlaps for volume crystal:24 (G4Box) ... OK! \nChecking overlaps for volume crystal:25 (G4Box) ... OK! \nChecking overlaps for volume crystal:26 (G4Box) ... OK! \nChecking overlaps for volume crystal:27 (G4Box) ... OK! \nChecking overlaps for volume crystal:28 (G4Box) ... OK! \nChecking overlaps for volume crystal:29 (G4Box) ... OK! \nChecking overlaps for volume crystal:30 (G4Box) ... OK! \nChecking overlaps for volume crystal:31 (G4Box) ... OK! \nChecking overlaps for volume ring:0 (G4Tubs) ... OK! \nChecking overlaps for volume ring:1 (G4Tubs) ... OK! \nChecking overlaps for volume ring:2 (G4Tubs) ... OK! \nChecking overlaps for volume ring:3 (G4Tubs) ... OK! \nChecking overlaps for volume ring:4 (G4Tubs) ... OK! \nChecking overlaps for volume ring:5 (G4Tubs) ... OK! \nChecking overlaps for volume ring:6 (G4Tubs) ... OK! \nChecking overlaps for volume ring:7 (G4Tubs) ... OK! \nChecking overlaps for volume ring:8 (G4Tubs) ... OK! \nChecking overlaps for volume Detector:0 (G4Tubs) ... OK! \nChecking overlaps for volume Patient:0 (G4Tubs) ... OK!","category":"page"},{"location":"notebooks/B3a/#Display-Detector","page":"Example B3a","title":"Display Detector","text":"","category":"section"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"In case we want to visualize the detector, the user can trigger the loading of the visualization extension by loading this 3 modules.  ","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"using CairoMakie, Rotations, IGLWrap_jll  # to force loding G4Vis extension\n\nworld = GetWorldVolume()\nimg = draw(world)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"(Image: png)","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"Execute a run with 10000 events","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"beamOn(app, 10000)","category":"page"},{"location":"notebooks/B3a/","page":"Example B3a","title":"Example B3a","text":"======================================================================\n======          Radioactive Decay Physics Parameters           =======\n======================================================================\nmin MeanLife (from G4NuclideTable)                1 ns \nMax life time (from G4DeexPrecoParameters)        1000 ps \nInternal e- conversion flag                       1\nStored internal conversion coefficients           1\nEnabled atomic relaxation mode                    1\nEnable correlated gamma emission                  0\nMax 2J for sampling of angular correlations       10\nAtomic de-excitation enabled                      1\nAuger electron emission enabled                   1\nCheck EM cuts disabled for atomic de-excitation   1\nUse Bearden atomic level energies                 0\nUse ANSTO fluorescence model                      0\nThreshold for very long decay time at rest        1 y  \n======================================================================\n\n====================================================================\n                  HADRONIC PROCESSES SUMMARY (verbose level 1)\n-------------------------------------------------------------------------\n                           Hadronic Processes for GenericIon\n  Process: Radioactivation\n--------------------End of Run------------------------------\n The run was 10000 F18 Nb of 'good' e+ annihilations: 1274\n Total dose in patient : 308.0759527682265 pGy\n------------------------------------------------------------","category":"page"},{"location":"notebooks/B2a/#Basic/B2a-Example","page":"Example B2a","title":"Basic/B2a Example","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"It is equivalent to the B2a example in Geant4 but re-written with a new more Julia friendly interface. The core of the example is to create an instance of the type G4JLApplication with all the essential elements defined (detector and geometry, physics list, primary particles generator, actions, simulated data being accumulated, mapping of logical volumes to sensitive detectors, etc.) ","category":"page"},{"location":"notebooks/B2a/#Import-the-Geant4-and-Geant4.SystemOfUnits-modules","page":"Example B2a","title":"Import the Geant4 and Geant4.SystemOfUnits modules","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"using Geant4\nusing Geant4.SystemOfUnits\nusing Printf, GeometryBasics","category":"page"},{"location":"notebooks/B2a/#Define-the-Detector-Parameters-and-Geometry","page":"Example B2a","title":"Define the Detector Parameters and Geometry","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"We include a file to define de structure B2aDetector and the construction method B2aConstruct to make the notebook more manageable","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"include(joinpath(@__DIR__, \"DetectorB2a.jl\"))","category":"page"},{"location":"notebooks/B2a/#Define-TrackerHit-structure","page":"Example B2a","title":"Define TrackerHit structure","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"struct TrackerHit\n    trackID::Int32\n    chamberNb::Int32\n    edep::Float64\n    pos::Point3{Float64}\nend\nfunction Base.show(io::IO, hit::TrackerHit)\n    (;trackID, chamberNb, edep, pos) = hit\n    @printf(io, \"\\ntrackID: %3d chamberNb: %2d Edep: %.3f MeV Position: (%3f, %3f, %3f)\", trackID, chamberNb, edep/MeV, pos...) \nend","category":"page"},{"location":"notebooks/B2a/#Define-Sensitive-Detector-for-the-chambers","page":"Example B2a","title":"Define Sensitive Detector for the chambers","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"It implies to define a data structure where to accumulate the TrackerHits for each event, and the callback functions:","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"intilialize called at the beginning of each event\nendOfEvent called at the end of the event\nprocessHit  called for each hit (step ending in the associated logical volume) to be processed","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"all of the callback functions get the declared data structure as first argument ","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"#---SD collected data------------------------------------------------------------------------------\nstruct B2aSDData <: G4JLSDData\n    trackerHits::Vector{TrackerHit}\n    B2aSDData() = new([])\nend\n#---Initialize method------------------------------------------------------------------------------\nfunction _initialize(::G4HCofThisEvent, data::B2aSDData)::Nothing\n    empty!(data.trackerHits)\n    return\nend\n#---End of Event method----------------------------------------------------------------------------\nfunction _endOfEvent(::G4HCofThisEvent, data::B2aSDData)::Nothing\n    return\nend\n#---Process Hit method-----------------------------------------------------------------------------\nfunction _processHits(step::G4Step, ::G4TouchableHistory, data::B2aSDData)::Bool\n    edep = step |> GetTotalEnergyDeposit\n    edep <  0. && return false\n    pos = step |> GetPostStepPoint |> GetPosition\n    push!(data.trackerHits, TrackerHit(step |> GetTrack |> GetTrackID,\n                                       step |> GetPreStepPoint |> GetTouchable |> GetCopyNumber,\n                                       edep,\n                                       Point3{Float64}(x(pos),y(pos),z(pos))))\n    return true\nend","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"_processHits (generic function with 1 method)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"And create a specialized instance of G4JLSensitiveDetector ","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"#---Create SD instance-----------------------------------------------------------------------------\nchamber_SD = G4JLSensitiveDetector(\"Chamber_SD\", B2aSDData();           # SD name an associated data are mandatory\n                                    processhits_method=_processHits,    # process hist method (also mandatory)\n                                    initialize_method=_initialize,      # intialize method\n                                    endofevent_method=_endOfEvent);     # end of event method\n","category":"page"},{"location":"notebooks/B2a/#Define-an-End-Event-Action","page":"Example B2a","title":"Define an End Event Action","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"This is collect all results each event. Only printing at this time. ","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"#---End Event Action-------------------------------------------------------------------------------\nfunction endeventaction(evt::G4Event, app::G4JLApplication)\n    hits = getSDdata(app, \"Chamber_SD\").trackerHits\n    eventID = evt |> GetEventID\n    if eventID < 10 || eventID % 100 == 0\n      G4JL_println(\"Event: $eventID with $(length(hits)) hits stored in this event\")\n    end\n    return\n  end","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"endeventaction (generic function with 1 method)","category":"page"},{"location":"notebooks/B2a/#Define-the-primary-particle-generator-(Particle-Gun)","page":"Example B2a","title":"Define the primary particle generator (Particle Gun)","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"particlegun = G4JLGunGenerator(particle = \"proton\", \n                               energy = 3GeV, \n                               direction = G4ThreeVector(0,0,1), \n                               position = G4ThreeVector(0,0,-2940.0))","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"G4JLGunGenerator(\"ParticleGun\", Geant4.G4JLParticleGunData(nothing, \"proton\", G4ThreeVector(0.0,0.0,1.0), G4ThreeVector(0.0,0.0,-2940.0), 3000.0), Geant4.var\"#init#19\"(), Geant4.var\"#gen#20\"(), G4JLGeneratorAction[])","category":"page"},{"location":"notebooks/B2a/#Instantiate-a-G4JLApplication-with-all-the-elements","page":"Example B2a","title":"Instantiate a G4JLApplication with all the elements","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"The G4RunManager is created at this moment","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"#---Create the Application-------------------------------------------------------------------------\napp = G4JLApplication( detector = B2aDetector(nChambers=5),          # detector with parameters\n                       generator = particlegun,                      # primary particle generator\n                       nthreads = 4,                                 # number of threads (MT)\n                       physics_type = FTFP_BERT,                     # what physics list to instantiate\n                       endeventaction_method = endeventaction,       # end event action\n                       sdetectors = [\"Chamber_LV+\" => chamber_SD]    # mapping of LVs to SDs (+ means multiple LVs with same name)\n                      );             ","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n  << in Multi-threaded mode >> \n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************","category":"page"},{"location":"notebooks/B2a/#Final-steps","page":"Example B2a","title":"Final steps","text":"","category":"section"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"Configure the application, initialize the run and fire the beam for 0 events to finalize all initializations","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"configure(app)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"initialize(app)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"Checking overlaps for volume Target:0 (G4Tubs) ... OK! \nChecking overlaps for volume Tracker:0 (G4Tubs) ... OK! \nChecking overlaps for volume Chamber_PV:1 (G4Tubs) ... OK! \nChecking overlaps for volume Chamber_PV:2 (G4Tubs) ... OK! \nChecking overlaps for volume Chamber_PV:3 (G4Tubs) ... OK! \nChecking overlaps for volume Chamber_PV:4 (G4Tubs) ... OK! \nChecking overlaps for volume Chamber_PV:5 (G4Tubs) ... OK!","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"beamOn(app, 0)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"#---Forcing the loading of G4Vis extension------------------------------------------\nusing CairoMakie, Rotations, IGLWrap_jll  # to force loding G4Vis extension\n\nworld = GetWorldVolume()\nimg = draw(world)\ndisplay(\"image/png\", img)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"(Image: png)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"beamOn(app,10)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"G4WT2 > Event: 0 with 71 hits stored in this event\nG4WT3 > Event: 1 with 170 hits stored in this event\nG4WT1 > Event: 3 with 160 hits stored in this event\nG4WT2 > Event: 4 with 91 hits stored in this event\nG4WT0 > Event: 2 with 112 hits stored in this event\nG4WT3 > Event: 5 with 80 hits stored in this event\nG4WT0 > Event: 8 with 61 hits stored in this event\nG4WT2 > Event: 7 with 145 hits stored in this event\nG4WT1 > Event: 6 with 117 hits stored in this event\nG4WT3 > Event: 9 with 117 hits stored in this event","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"@time beamOn(app,1000)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"G4WT1 > Event: 0 with 59 hits stored in this event\nG4WT1 > Event: 1 with 89 hits stored in this event\nG4WT1 > Event: 2 with 115 hits stored in this event\nG4WT1 > Event: 3 with 650 hits stored in this event\nG4WT1 > Event: 4 with 13 hits stored in this event\nG4WT1 > Event: 5 with 497 hits stored in this event\nG4WT1 > Event: 6 with 94 hits stored in this event\nG4WT1 > Event: 7 with 76 hits stored in this event\nG4WT1 > Event: 8 with 158 hits stored in this event\nG4WT1 > Event: 9 with 87 hits stored in this event\nG4WT0 > Event: 100 with 93 hits stored in this event\nG4WT1 > Event: 200 with 225 hits stored in this event\nG4WT3 > Event: 300 with 25 hits stored in this event\nG4WT1 > Event: 400 with 54 hits stored in this event\nG4WT3 > Event: 500 with 92 hits stored in this event\nG4WT3 > Event: 600 with 70 hits stored in this event\nG4WT3 > Event: 700 with 60 hits stored in this event\nG4WT0 > Event: 800 with 75 hits stored in this event\nG4WT1 > Event: 900 with 503 hits stored in this event\n  1.001517 seconds (678.66 k allocations: 12.389 MiB)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"SetParticleEnergy(particlegun, 500MeV)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"@time beamOn(app,10000)","category":"page"},{"location":"notebooks/B2a/","page":"Example B2a","title":"Example B2a","text":"G4WT1 > Event: 0 with 224 hits stored in this event\nG4WT0 > Event: 100 with 248 hits stored in this event\nG4WT1 > Event: 1 with 294 hits stored in this event\nG4WT1 > Event: 2 with 158 hits stored in this event\nG4WT1 > Event: 3 with 8 hits stored in this event\nG4WT1 > Event: 4 with 211 hits stored in this event\nG4WT1 > Event: 5 with 199 hits stored in this event\nG4WT1 > Event: 6 with 131 hits stored in this event\nG4WT1 > Event: 7 with 174 hits stored in this event\nG4WT1 > Event: 8 with 135 hits stored in this event\nG4WT1 > Event: 9 with 143 hits stored in this event\nG4WT0 > Event: 200 with 197 hits stored in this event\nG4WT2 > Event: 300 with 239 hits stored in this event\nG4WT0 > Event: 400 with 250 hits stored in this event\nG4WT1 > Event: 500 with 181 hits stored in this event\nG4WT0 > Event: 600 with 136 hits stored in this event\nG4WT2 > Event: 700 with 175 hits stored in this event\nG4WT0 > Event: 800 with 204 hits stored in this event\nG4WT2 > Event: 900 with 244 hits stored in this event\nG4WT3 > Event: 1000 with 246 hits stored in this event\nG4WT2 > Event: 1100 with 155 hits stored in this event\nG4WT0 > Event: 1200 with 198 hits stored in this event\nG4WT2 > Event: 1300 with 209 hits stored in this event\nG4WT0 > Event: 1400 with 142 hits stored in this event\nG4WT2 > Event: 1500 with 224 hits stored in this event\nG4WT0 > Event: 1600 with 151 hits stored in this event\nG4WT1 > Event: 1700 with 152 hits stored in this event\nG4WT0 > Event: 1800 with 145 hits stored in this event\nG4WT2 > Event: 1900 with 193 hits stored in this event\nG4WT0 > Event: 2000 with 256 hits stored in this event\nG4WT2 > Event: 2100 with 217 hits stored in this event\nG4WT0 > Event: 2200 with 141 hits stored in this event\nG4WT1 > Event: 2300 with 171 hits stored in this event\nG4WT3 > Event: 2400 with 137 hits stored in this event\nG4WT1 > Event: 2500 with 212 hits stored in this event\nG4WT3 > Event: 2600 with 111 hits stored in this event\nG4WT1 > Event: 2700 with 126 hits stored in this event\nG4WT3 > Event: 2800 with 0 hits stored in this event\nG4WT1 > Event: 2900 with 0 hits stored in this event\nG4WT3 > Event: 3000 with 205 hits stored in this event\nG4WT2 > Event: 3100 with 180 hits stored in this event\nG4WT1 > Event: 3200 with 152 hits stored in this event\nG4WT3 > Event: 3300 with 171 hits stored in this event\nG4WT2 > Event: 3400 with 156 hits stored in this event\nG4WT3 > Event: 3500 with 124 hits stored in this event\nG4WT1 > Event: 3600 with 200 hits stored in this event\nG4WT2 > Event: 3700 with 163 hits stored in this event\nG4WT1 > Event: 3800 with 483 hits stored in this event\nG4WT3 > Event: 3900 with 139 hits stored in this event\nG4WT1 > Event: 4000 with 10 hits stored in this event\nG4WT3 > Event: 4100 with 28 hits stored in this event\nG4WT1 > Event: 4200 with 165 hits stored in this event\nG4WT3 > Event: 4300 with 132 hits stored in this event\nG4WT1 > Event: 4400 with 142 hits stored in this event\nG4WT0 > Event: 4500 with 223 hits stored in this event\nG4WT1 > Event: 4600 with 147 hits stored in this event\nG4WT0 > Event: 4700 with 142 hits stored in this event\nG4WT1 > Event: 4800 with 152 hits stored in this event\nG4WT2 > Event: 4900 with 153 hits stored in this event\nG4WT1 > Event: 5000 with 162 hits stored in this event\nG4WT2 > Event: 5100 with 176 hits stored in this event\nG4WT1 > Event: 5200 with 320 hits stored in this event\nG4WT3 > Event: 5300 with 155 hits stored in this event\nG4WT2 > Event: 5400 with 175 hits stored in this event\nG4WT3 > Event: 5500 with 171 hits stored in this event\nG4WT0 > Event: 5600 with 147 hits stored in this event\nG4WT1 > Event: 5700 with 3 hits stored in this event\nG4WT2 > Event: 5800 with 145 hits stored in this event\nG4WT1 > Event: 5900 with 156 hits stored in this event\nG4WT2 > Event: 6000 with 212 hits stored in this event\nG4WT1 > Event: 6100 with 8 hits stored in this event\nG4WT2 > Event: 6200 with 277 hits stored in this event\nG4WT1 > Event: 6300 with 0 hits stored in this event\nG4WT3 > Event: 6400 with 227 hits stored in this event\nG4WT0 > Event: 6500 with 208 hits stored in this event\nG4WT3 > Event: 6600 with 104 hits stored in this event\nG4WT2 > Event: 6700 with 200 hits stored in this event\nG4WT3 > Event: 6800 with 4 hits stored in this event\nG4WT0 > Event: 6900 with 153 hits stored in this event\nG4WT3 > Event: 7000 with 166 hits stored in this event\nG4WT0 > Event: 7100 with 141 hits stored in this event\nG4WT2 > Event: 7200 with 182 hits stored in this event\nG4WT0 > Event: 7300 with 140 hits stored in this event\nG4WT3 > Event: 7400 with 249 hits stored in this event\nG4WT1 > Event: 7500 with 8 hits stored in this event\nG4WT3 > Event: 7600 with 233 hits stored in this event\nG4WT1 > Event: 7700 with 155 hits stored in this event\nG4WT3 > Event: 7800 with 0 hits stored in this event\nG4WT2 > Event: 7900 with 201 hits stored in this event\nG4WT3 > Event: 8000 with 8 hits stored in this event\nG4WT2 > Event: 8100 with 161 hits stored in this event\nG4WT2 > Event: 8200 with 143 hits stored in this event\nG4WT3 > Event: 8300 with 3 hits stored in this event\nG4WT2 > Event: 8400 with 170 hits stored in this event\nG4WT3 > Event: 8500 with 186 hits stored in this event\nG4WT2 > Event: 8600 with 146 hits stored in this event\nG4WT0 > Event: 8700 with 142 hits stored in this event\nG4WT2 > Event: 8800 with 177 hits stored in this event\nG4WT3 > Event: 8900 with 192 hits stored in this event\nG4WT2 > Event: 9000 with 115 hits stored in this event\nG4WT1 > Event: 9100 with 119 hits stored in this event\nG4WT2 > Event: 9200 with 156 hits stored in this event\nG4WT3 > Event: 9300 with 3 hits stored in this event\nG4WT2 > Event: 9400 with 155 hits stored in this event\nG4WT1 > Event: 9500 with 132 hits stored in this event\nG4WT2 > Event: 9600 with 144 hits stored in this event\nG4WT3 > Event: 9700 with 270 hits stored in this event\nG4WT0 > Event: 9800 with 1068 hits stored in this event\nG4WT3 > Event: 9900 with 137 hits stored in this event\n  5.443250 seconds (6.54 M allocations: 102.833 MiB)","category":"page"},{"location":"notebooks/WaterPhantom/#Water-Phantom-Simulation-with-Scoring","page":"Example WaterPhantom","title":"Water Phantom Simulation with Scoring","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"Example originated from the example in Geant4Py. It is using a very simple phantom model (a box of water) and exercises the scoring interface.","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"using Geant4\nusing Geant4.SystemOfUnits\nusing Plots","category":"page"},{"location":"notebooks/WaterPhantom/#Detector-description","page":"Example WaterPhantom","title":"Detector description","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"The main parameters are stored in the RE03Detector struct with some default values. ","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"mutable struct RE03Detector <: G4JLDetector\n    const worldXY::Float64\n    const worldZ::Float64\n    const phantomXY::Float64\n    const phantomZ::Float64\n    RE03Detector(;worldXY=100cm, worldZ=300cm, phantomXY=30.5cm, phantomZ=30cm) = new(worldXY, worldZ, phantomXY, phantomZ)\nend\n\nfunction construct(det::RE03Detector)::CxxPtr{G4VPhysicalVolume}\n    #---Materials----------------------------------------------------------------------------------\n    nist = G4NistManager!Instance()\n    fAir = FindOrBuildMaterial(nist, \"G4_AIR\")\n    fWater = FindOrBuildMaterial(nist, \"G4_WATER\")\n\n    #---World--------------------------------------------------------------------------------------\n    worldSolid = G4Box(\"World\",det.worldXY/2, det.worldXY/2, det.worldZ/2)\n    worldLogical = G4LogicalVolume(worldSolid,fAir,\"World\")\n    worldPhys = G4PVPlacement(nothing, G4ThreeVector(), worldLogical, \"World\", nothing,false,0)\n    \n    #---Phantom------------------------------------------------------------------------------------\n    phantomSolid = G4Box(\"Phantom\", det.phantomXY/2, det.phantomXY/2, det.phantomZ/2)\n    phantomLogical = G4LogicalVolume(phantomSolid, fWater, \"Phantom\");\n    phantomPhys = G4PVPlacement(nothing, G4ThreeVector(), phantomLogical, \"Phantom\", worldLogical, false, 0)\n    \n    #---Visualization attributes-------------------------------------------------------------------\n    SetVisAttributes(worldLogical, G4VisAttributes!GetInvisible())\n    simpleBoxVisAtt = G4VisAttributes(G4Colour(1.0, 1.0, 1.0))\n    SetVisibility(simpleBoxVisAtt, true)\n    SetVisAttributes(phantomLogical, simpleBoxVisAtt)\n\n    return worldPhys\nend\n\nGeant4.getConstructor(::RE03Detector)::Function = construct","category":"page"},{"location":"notebooks/WaterPhantom/#Define-the-primary-particle-generator","page":"Example WaterPhantom","title":"Define the primary particle generator","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"We define the MedicalBeam particle generator. This is similar to the particle gun but with direction of the particles randomly distributed within some aperture cone. It consists of","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"MedicalBeamData data structure with the parameters of the beam\nAn init function that will be called at initialization time.\nAn generate function hat is called at each event and create the primary particle and primary vertex.\nA set of setter functions (SetParticleByName, SetParticleEnergy) to change parameters at run time","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"The function to construct the generator is MedicalBeam(...).","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"mutable struct MedicalBeamData <: G4JLGeneratorData\n  particleName::String\n  particlePtr::CxxPtr{G4ParticleDefinition}\n  energy::Float64 \n  ssd::Float64\n  fieldXY::Float64\n  surfaceZ::Float64\nend\n\nfunction generateBeamDir(ssd::Float64, fxy::Float64)\n  dr = √2/2*fxy\n  R = √(ssd^2 + dr^2)\n  cos0 = ssd/R\n  xymax = fxy/ssd/2\n  dx = dy = dz = 0.\n  while true\n    dz = rand()*(1-cos0)+ cos0\n    dsin = √(1-dz^2)\n    dphi = rand()*2π\n    dx = dsin * cos(dphi)\n    dy = dsin * sin(dphi)\n    if abs(dx) < xymax*dz && abs(dy) < xymax*dz \n      break\n    end\n  end\n  G4ThreeVector(dx, dy, dz)\nend\n\nfunction MedicalBeam(;particle=\"e-\", energy=10MeV, ssd=100cm, fieldXY=10cm)\n  data = MedicalBeamData(particle, CxxPtr{G4ParticleDefinition}(C_NULL), energy, ssd, fieldXY, 0.)\n  function init(data::MedicalBeamData, app::G4JLApplication)\n    data.particlePtr = FindParticle(data.particleName)\n    data.surfaceZ = -app.detector.phantomZ/2\n  end\n  function generate( evt::G4Event, data::MedicalBeamData)::Nothing\n    mass = data.particlePtr |> GetPDGMass\n    momemtum = √((mass + data.energy)^2 - mass^2)\n    pvec = momemtum * generateBeamDir(data.ssd, data.fieldXY);\n    primary = G4PrimaryParticle(data.particlePtr, pvec |> x, pvec |> y, pvec |> z )\n    vertex = G4PrimaryVertex(G4ThreeVector(0, 0, data.surfaceZ - data.ssd), 0ns)\n    SetPrimary(vertex, move!(primary))    # note that we give up ownership of the objects just created\n    AddPrimaryVertex(evt, move!(vertex))  # note that we give up ownership of the objects just created\n  end\n  G4JLPrimaryGenerator(\"MedicalBeam\", data; init_method=init, generate_method=generate)\nend\nfunction SetParticleByName(gen::G4JLPrimaryGenerator{MedicalBeamData}, particle::String)\n  gen.data.particleName = particle\n  gen.data.particlePtr = FindParticle(particle)\n  return\nend\nfunction SetParticleEnergy(gen::G4JLPrimaryGenerator{MedicalBeamData}, energy::Float64) \n  gen.data.energy = energy\n  return\nend","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"SetParticleEnergy (generic function with 1 method)","category":"page"},{"location":"notebooks/WaterPhantom/#Setup-the-scoring-with-the-the-scoring-interface","page":"Example WaterPhantom","title":"Setup the scoring with the the scoring interface","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"Create a box shaped mesh and define the number of bins. The quantity to be monitor is dose. Later accessing the attribute dose on the scoring mesh will return a tuple with the sum of dose, sum square and number of entries for each mesh cell.  ","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"sc1 = G4JLScoringMesh(\"boxMesh_1\",\n                      BoxMesh(15.25cm, 15.25cm, 15cm),\n                      bins = (61, 61, 150),\n                      quantities = [ doseDeposit(\"dose\") ]\n                      );","category":"page"},{"location":"notebooks/WaterPhantom/#Instantiate-the-Geant4-Application","page":"Example WaterPhantom","title":"Instantiate the Geant4 Application","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"app = G4JLApplication(;detector = RE03Detector(),                    # detector with parameters\n                       generator = MedicalBeam(),                    # promary partcile generator\n                       nthreads = 8,                                 # define the number of threads\n                       physics_type = FTFP_BERT,                     # what physics list to instantiate\n                       scorers = [sc1]                               # list of scorers \n                      );","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"**************************************************************\n Geant4 version Name: geant4-11-02-patch-01 [MT]   (16-February-2024)\n  << in Multi-threaded mode >> \n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************","category":"page"},{"location":"notebooks/WaterPhantom/#Configure,-initiliaze-and-run","page":"Example WaterPhantom","title":"Configure, initiliaze and run","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"configure(app)\ninitialize(app)\nbeamOn(app, 0)","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"--- G4CoupledTransportation is used \n.... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4ScoringManager has 1 scoring meshes.\nG4ScoringBox : boxMesh_1 --- Shape: Box mesh\n Size (x, y, z): (15.25, 15.25, 15) [cm]\n # of segments: (61, 61, 150)\n displacement: (0, 0, 0) [cm]\n registered primitve scorers : \n   0  dose\nG4WT0 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT0 > G4ScoringManager has 1 scoring meshes.\nG4WT0 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT0 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT0 >  # of segments: (61, 61, 150)\nG4WT7 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT3 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT6 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT1 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT7 > G4ScoringManager has 1 scoring meshes.\nG4WT7 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT4 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT7 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT0 >  displacement: (0, 0, 0) [cm]\nG4WT0 >  registered primitve scorers : \nG4WT0 >    0  dose\nG4WT1 > G4ScoringManager has 1 scoring meshes.\nG4WT3 > G4ScoringManager has 1 scoring meshes.\nG4WT3 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT3 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT4 > G4ScoringManager has 1 scoring meshes.\nG4WT1 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT4 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT1 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT6 > G4ScoringManager has 1 scoring meshes.\nG4WT5 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT6 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT1 >  # of segments: (61, 61, 150)\nG4WT6 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT6 >  # of segments: (61, 61, 150)\nG4WT6 >  displacement: (0, 0, 0) [cm]\nG4WT6 >  registered primitve scorers : \nG4WT1 >  displacement: (0, 0, 0) [cm]\nG4WT1 >  registered primitve scorers : \nG4WT1 >    0  dose\nG4WT4 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT7 >  # of segments: (61, 61, 150)\nG4WT7 >  displacement: (0, 0, 0) [cm]\nG4WT7 >  registered primitve scorers : \nG4WT7 >    0  dose\nG4WT4 >  # of segments: (61, 61, 150)\nG4WT4 >  displacement: (0, 0, 0) [cm]\nG4WT4 >  registered primitve scorers : \nG4WT4 >    0  dose\nG4WT6 >    0  dose\nG4WT5 > G4ScoringManager has 1 scoring meshes.\nG4WT5 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT5 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT5 >  # of segments: (61, 61, 150)\nG4WT5 >  displacement: (0, 0, 0) [cm]\nG4WT5 >  registered primitve scorers : \nG4WT5 >    0  dose\nG4WT3 >  # of segments: (61, 61, 150)\nG4WT3 >  displacement: (0, 0, 0) [cm]\nG4WT3 >  registered primitve scorers : \nG4WT3 >    0  dose\nG4WT2 > .... G4ScoringMessenger::MeshBinCommand - G4ScoringBox\nG4WT2 > G4ScoringManager has 1 scoring meshes.\nG4WT2 > G4ScoringBox : boxMesh_1 --- Shape: Box mesh\nG4WT2 >  Size (x, y, z): (15.25, 15.25, 15) [cm]\nG4WT2 >  # of segments: (61, 61, 150)\nG4WT2 >  displacement: (0, 0, 0) [cm]\nG4WT2 >  registered primitve scorers : \nG4WT2 >    0  dose","category":"page"},{"location":"notebooks/WaterPhantom/#Visualize-the-Detector-Setup","page":"Example WaterPhantom","title":"Visualize the Detector Setup","text":"","category":"section"},{"location":"notebooks/WaterPhantom/#Define-plotting-functions","page":"Example WaterPhantom","title":"Define plotting functions","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"function do_plots(sc)\n      dose, dose2, nentry = sc.dose\n      xaxisvalues = range(0., sc.mesh.dx*2/cm, sc.bins[1])\n      zaxisvalues = range(0., sc.mesh.dz*2/cm, sc.bins[3])\n      cbin = round(Int, (sc.bins[1]+1)/2)\n      fig = plot( layout=(2,1), size=(800,800),\n                  heatmap(zaxisvalues, xaxisvalues, dose[cbin,:,:], title=\"Dose (XZ)\", color=:thermal, xlabel=\"Z (cm)\", ylabel=\"X (cm)\"), \n                  plot(zaxisvalues, dose[cbin,cbin,:], title=\"Depth Dose (center)\", xlabel=\"Z (cm)\", label=\"dose\")\n      )\n      display(\"image/png\", fig)\nend","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"do_plots (generic function with 1 method)","category":"page"},{"location":"notebooks/WaterPhantom/#Electron-20-Mev","page":"Example WaterPhantom","title":"Electron 20 Mev","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"SetParticleByName(app.generator, \"e-\")\nSetParticleEnergy(app.generator, 20MeV)\n\nbeamOn(app, 100000)\ndo_plots(sc1)","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"(Image: png)","category":"page"},{"location":"notebooks/WaterPhantom/#Proton-200-MeV","page":"Example WaterPhantom","title":"Proton 200 MeV","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"SetParticleByName(app.generator, \"proton\")\nSetParticleEnergy(app.generator, 200MeV)\n\nbeamOn(app, 100000)\ndo_plots(sc1)","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"(Image: png)","category":"page"},{"location":"notebooks/WaterPhantom/#Csub12/sub-ion-3-GeV","page":"Example WaterPhantom","title":"C<sub>12</sub> ion 3 GeV","text":"","category":"section"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"SetParticleByName(app.generator, \"C12\")\nSetParticleEnergy(app.generator, 3GeV)\n\nbeamOn(app, 100000)\ndo_plots(sc1)","category":"page"},{"location":"notebooks/WaterPhantom/","page":"Example WaterPhantom","title":"Example WaterPhantom","text":"(Image: png)","category":"page"},{"location":"#Geant4.jl","page":"Introduction","title":"Geant4.jl","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Julia bindings for the Geant4 particle transportation toolkit. It is using CxxWrap.jl package to wrap C++ types and functions to Julia. Since the Geant4 toolkit is rather large and complex, writing the wrapper code by hand is not really an option. For this we use the package WrapIt that automates the generation of the wrapper code making use of the clang library.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Documentation of the concepts and how to write applications with the Geant4 toolkit can be found with the Application Developer Guide or the Classes and Members reference guide for a detailed description of each C++ class. In this document we will only highlight the differences between the Julia and the C++ API. We will document the additional types that have been added on top of the C++ classes to make the user interface more Julia friendly. To distinguish these new types from the types coming directly from C++ via the CxxWrap wrappers, these types are prefixed with G4JL.","category":"page"},{"location":"#Installation","page":"Introduction","title":"Installation","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The Geant4.jl package does no require any special installation. Stable releases are registered into the Julia general registry, and therefore can be deployed with the standard Pkg Julia package manager.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia> using Pkg\njulia> Pkg.add(\"Geant4\")","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Examples are located in a separate repository G4Examples to minimize dependencies since they use additional functionality such as graphics, plotting, analysis tools, etc. To use and play with the examples, the user can clone the examples repository and setup a complete Julia environment with:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"$ git clone https://github.com/JuliaHEP/G4Examples.jl.git\n$ julia --project=G4Examples.jl -e 'import Pkg; Pkg.instantiate()'","category":"page"},{"location":"#Getting-started","page":"Introduction","title":"Getting started","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Import the Geant4 module. All the wrapped Geant4 classes are exported since they are prefixed by G4 minimizing the chances of a name clash with other Julia symbols. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"\njulia> using Geant4\njulia> runManager = G4RunManager()\n**************************************************************\n Geant4 version Name: geant4-11-01-patch-01 [MT]   (10-February-2023)\n                       Copyright : Geant4 Collaboration\n                      References : NIM A 506 (2003), 250-303\n                                 : IEEE-TNS 53 (2006), 270-278\n                                 : NIM A 835 (2016), 186-225\n                             WWW : http://geant4.org/\n**************************************************************\n\nGeant4.G4RunManagerAllocated(Ptr{Nothing} @0x00007f9fcb6f9c50)\n\njulia> methodswith(G4RunManager, supertypes=true)\n[1] convert(t::Type{G4RunManager}, x::T) where T<:G4RunManager in Geant4 at /Users/mato/.julia/packages/CxxWrap/IdOJa/src/CxxWrap.jl:676\n[2] AbortEvent(arg1::Union{CxxWrap.CxxWrapCore.CxxRef{<:G4RunManager}, Union{CxxWrap.CxxWrapCore.SmartPointer{T2}, T2} where T2<:G4RunManager}) in Geant4 at /Users/mato/.julia/packages/CxxWrap/IdOJa/src/CxxWrap.jl:618\n...\n[94] rndmSaveThisRun(arg1::Union{CxxWrap.CxxWrapCore.CxxRef{<:G4RunManager}, Union{CxxWrap.CxxWrapCore.SmartPointer{T2}, T2} where T2<:G4RunManager}) in Geant4 at /Users/mato/.julia/packages/CxxWrap/IdOJa/src/CxxWrap.jl:618\n\njulia> v = GetVersionString(runManager)\nConstCxxRef{G4String}(Ptr{G4String} @0x00007ffed34df2d8)\n\njulia> String(v)\n\" Geant4 version Name: geant4-11-01-patch-01 [MT]   (10-February-2023)\"","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Note that class methods are called with the object instance as first argument. In C++ the GetVersionString method would be called as runManager->GetVersionString() while in Julia it is called as GetVersionString(runManager). Thanks to the Julia multi-dispatch we do not need to prefix the methods with the module name Geant4.GetVersionString(runManager), even for very common function names such as mag.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia> v = G4ThreeVector(1,2,3)\nGeant4.CLHEP!Hep3VectorAllocated(Ptr{Nothing} @0x00007f9fcaf2a710)\n\njulia> mag(v)\n3.7416573867739413","category":"page"},{"location":"#Geant4-Julia-interface","page":"Introduction","title":"Geant4 Julia interface","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The main goal for defining a Geant4 application in the Julia interface is to create an instance of the G4JLApplication type, where all the needed elements for running a Geant4 application are declared, such as the detector geometry, the physics list, the primary particle generator, the type of run manager, the user actions, etc. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"(Image: Figure)","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"These are the needed elements:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"detector. An instance of a detector structure inheriting from the abstract type G4JLDetector, in which all the detector parameters are defined. The user should also provide a method specialization of Geant4.getConstructor(::G4JLDetector)::Function to return the Julia function that toolkit needs to call in order to construct the geometry and return the pointer of the 'world' physical volume. There is no default.\nfield. An instance of the magnetic field class. The G4JLUniformMagField(...) function provides a uniform magnetic field. See later how to define a custom one.\nsimdata. An instance of the simulation data structure that the program will need to collect during the simulation execution. This mutable structure needs to inherit from the abstract type G4JLSimulationData and is completely user defined with counters, data structures to collect the hits or doses, histograms, etc. The default is an instance of type G4JLNoData.\nnthreads. Number of worker threads to be used. The default is 0, which means serial mode. Any number > 0 will use the MT functionality of Geant4, and therefore the user would need to pay attention to the user actions that are run concurrently to avoid data races (see Julia doc on multi-threading)\nverbose. Verbosity level (for physics list). The default is 0.\nphysics_type. The physics list predefined type. Default is FTFP_BERT.\ngenerator_type. The primary generator generator type. The default is G4JLParticleGun, which encapsulates a G4ParticleGun. The underlying G4ParticleGun can be obtained by calling GetGun().\nuser actions. Julia methods defining the different possible user actions (e.g. stepping action, tracking action, run action, event action). The default is no action.\nsdetectors. List of sensitive detectors. This is given as a Vector of pairs lv::String => sd::G4JLSensitiveDetector to associate logical volumes by name to sensitive detector instances (see next section).\nscorers. List of scoring meshes defined with the function G4JLScoringMesh.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Once the G4JLApplication is instantiated (and implicitly an instance of the G4RunManager created), the user can control the application with the following commands:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"configure(::G4JLApplication). It associates the physics list, generator and user actions to the selected G4RunManager instance. \ninitialize(::G4JLApplication). It basically calls the Initialize() method of the run manager and associate the declared sensitive detectors.\nreinitialize(::G4JLApplication, ::G4JLDetector). It re-defines the declared detector geometry with a new instance of G4JLDetector. \nbeamOn(::G4JLApplication, ::Int). Starts a run with a given number of events.","category":"page"},{"location":"#Constructing-the-detector","page":"Introduction","title":"Constructing the detector","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Parameters of the detector are collected in a user defined mutable data structure inheriting from G4JLDetector. The user also needs to provide a Julia method for constructing the geometry. This method needs to have the signature","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"<User_Det_Constructor_Function>(::G4JLDetector)::CxxPtr{G4VPhysicalVolume}","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The only argument of the function gives access to the user defined structure with all the detector parameters.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nThe type CxxPtr{G4VPhysicalVolume} denotes a C++ pointer to the G4VPhysicalVolume type.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can use the native G4 classes for constructing the geometry such as the different type of solids (e.g. G4Box, G4Tubs, etc.), G4LogicalVolume, G4PVPlacement, G4PVReplica, etc. Alternatively can the type G4JLDetectorGDML to construct a detector from a GDML file.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nNote that by default constructed C++ objects from Julia would get automatically deleted by the Julia garbage collector (GC) since a finalizer gets installed to the wrapper classes. This is particularly a problem when constructing the geometry.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Currently for the following classes have the finalizer disabled in the wrapper: G4PVPlacement, G4LogicalVolume, G4PVReplica, G4Material, G4Isotope, G4Element. This means that instances of them will not be deleted by Julia to avoid double deletion (often a crash) when the geometry gets deleted at the finalization of the application from the C++ side. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"A pointer to any of the G4Solid needs to be passed to the G4LogicalVolume using move!(objref) function to transfer the ownership of the referenced object to the C++ side. See the following example:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"trackerS = G4Tubs(\"tracker\", 0, trackerSize, trackerSize, 0, 360deg)\ntrackerLV = G4LogicalVolume(move!(trackerS), m_air, \"Tracker\")\nG4PVPlacement(nothing,              # no rotation\n    G4ThreeVector(0,0,0),           # at (0,0,0)\n    trackerLV,                      # its logical volume\n    \"Tracker\",                      # its name\n    worldLV,                        # its mother  volume\n    false,                          # no boolean operations\n    0,                              # copy number\n    checkOverlaps)                  # checking overlaps","category":"page"},{"location":"#Physics-List","page":"Introduction","title":"Physics List","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can provide one of the pre-defined physics lists, such as QGS_BIC, QBBC or FTFP_BERT. Alternatively, the user can define a Julia structas a subtype ofG4VUserPhysicsList` and modify some of the physcis in the constructor. For example:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"struct ScintPhysicsList <: G4VUserPhysicsList\n    function ScintPhysicsList(verbose)\n        pl = FTFP_BERT(verbose)\n        # replace G4EmStandardPhysics\n        ReplacePhysics(pl, move!(G4EmStandardPhysics_option4(verbose)))\n        # register G4OpticalPhysics\n        RegisterPhysics(pl, move!(G4OpticalPhysics(verbose)))\n        # activate  scintillation\n        optpar = G4OpticalParameters!Instance()\n        SetProcessActivation(optpar, \"Scintillation\", true)\n        # activate cherenkov radiation\n        SetProcessActivation(optpar, \"Cerenkov\", true)\n        return pl\n    end \nend","category":"page"},{"location":"#Magnetic-field","page":"Introduction","title":"Magnetic field","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can define either an uniform magnetic field or a custom one. To define an custom one:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"define first a user structure for the parameters that inherits from the abstract type G4JLFieldData\nthen, define a function with the signature (result::G4ThreeVector, position::G4ThreeVector, params::G4JLFieldData)::Nothing\nand finally, with all this, instantiate the magnetic field calling the function \n  G4JLMagneticField(<name>, <data>; getfield_method=<function>)","category":"page"},{"location":"#Primary-Particle-Generator","page":"Introduction","title":"Primary Particle Generator","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can define either a custom primary particle generator or use one of the two defined ones:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"G4JLGunGenerator. Uses the G4ParticleGun class of Geant4 that generates a single particle type with a fix kinetic energy, position and direction.\nG4JLGunGenerator(particle = \"proton\", \n                 energy = 3GeV, \n                 direction = G4ThreeVector(0,0,1), \n                 position = G4ThreeVector(0,0,-2940.0))\nG4JLGeneralParticleSource. Uses the G4GeneralParticleSource class of Geant4 to generate one of more sources of primary particles with predefined distributions for energy, position and direction. An example can be:\nsrc1 = (particle=\"e+\", intensity=0.5,\n        ene=(type=\"Exp\", min=2MeV, max=10MeV, ezero=2.),\n        pos=(type=\"Plane\", shape=\"Circle\", centre=G4ThreeVector(1cm,2cm,0cm), radius=3cm),\n        ang=(type=\"cos\", mintheta=0deg, maxtheta=180deg))\nsrc2 = (particle=\"gamma\", intensity=0.5,\n        ene=(type=\"Brem\", min=2MeV, max=10MeV, temp=2e12),\n        pos=(type=\"Plane\", shape=\"Ellipse\", centre=G4ThreeVector(3cm,1cm,0cm), halfx=1cm, halfy=2cm),\n        ang=(type=\"iso\", mintheta=0deg, maxtheta=180deg))\ngps = G4JLGeneralParticleSource(sources = [ src1, src2 ])\nthe standard particle gun parameters works as well:\nG4JLGeneralParticleSource(particle = \"proton\", \n                          energy = 3GeV, \n                          direction = G4ThreeVector(0,0,1), \n                          position = G4ThreeVector(0,0,0))\nCustom Generator. It is fairly simple to write a custom generator. It is needed to define a structure for the parameters to configure the generator, and a two functions to initialize and generate the primary particles called for each event. Here is an example:\n# define the data structure with the generator parameters\nmutable struct PlaneSourceData <: G4JLGeneratorData\n  particleName::String\n  particlePtr::CxxPtr{G4ParticleDefinition}\n  energy::Float64 \n  halfx::Float64\n  halfy::Float64\n  position::G4ThreeVector\n  direction::G4ThreeVector\nend\n\n# define the constructor with the default parameters\nfunction PlaneSource(;particle=\"gamma\", energy=0.07MeV, halfx=7cm, halfy=7cm, \n                                      position=G4ThreeVector(0,0,-14.9cm), direction=G4ThreeVector(0,0,1))\n  data = PlaneSourceData(particle, CxxPtr{G4ParticleDefinition}(C_NULL), energy, halfx, halfy, position, direction)\n  function init(data:: PlaneSourceData, app::G4JLApplication)\n      data.particlePtr = FindParticle(data.particleName)\n  end\n  function generate( evt::G4Event, data:: PlaneSourceData)::Nothing\n      mass = data.particlePtr |> GetPDGMass\n      momentum = √((mass + data.energy)^2 - mass^2)\n      pvec = momentum * data.direction\n      pos = data.position + G4ThreeVector( data.halfx * (rand() - 0.5),  data.halfy * (rand() - 0.5), 0)\n      primary = G4PrimaryParticle(data.particlePtr, pvec |> x, pvec |> y, pvec |> z )\n      vertex = G4PrimaryVertex(pos, 0ns)\n      SetPrimary(vertex, move!(primary))    # note that we give up ownership of the objects just created\n      AddPrimaryVertex(evt, move!(vertex))  # note that we give up ownership of the objects just created\n  end\n  G4JLPrimaryGenerator(\"PlaneSource\", data; init_method=init, generate_method=generate)\nend","category":"page"},{"location":"#User-Actions","page":"Introduction","title":"User Actions","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"User actions are native Julia functions that are callbacks of the Geant4 toolkit. They are declared in the constructor of G4JLApplication, so they do not need to be associated to a specific function name. All user actions receive a reference to the G4JLApplication from which the user can obtain details of the actual application, such as the current detector, the physics, the generator, or the running simulation data. There are the available attributes of the application instance:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"    runmanager::G4RunManager    # The C++ G4RunManager instance\n    detector::DET               # User defined detector structure with all parameters\n    simdata::Vector{DAT}        # User defined simulation data structs (each worker has its own)\n    physics::G4VUserPhysicsList # Physics List\n    generator::G4JLPrimaryGenerator # Primary particle generator\n    field::Union{G4Field, G4JLMagneticField} # Magnetic field instance\n    evtdisplay::G4JLDisplay     # Event display instance\n    nthreads::Int32             # number of worker threads\n    verbose::Int32              # verbosity level for physics lists\n    sdetectors::Dict{String,Vector{G4JLSensitiveDetector}} # dictionary of sensitive detectors\n    scorers::Vector{G4JLScoringMesh} # vector of scoring meshes","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The following are the currently defined possible user actions:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"stepping action. Called on each simulation step. The signature is (::G4Step, ::G4JLApplication)::Nothing. Consult the G4Step reference manual to see what you can get from it. \npre-tracking action. Called at the creation of a new participle being tracked. The signature is (::G4Track, ::G4JLApplication)::Nothing. Consult the G4Step reference manual to see what you can get from it.\npost-tracking action. Called at the end of the particle being tracked. The signature is (::G4Track, ::G4JLApplication)::Nothing. Consult the G4Track reference manual to see what you can get from it.\nbegin-event action. Called at the beginning of each event. The signature is (::G4Event, ::G4JLApplication)::Nothing. Consult the G4Event reference manual to see what you can get from it.\nend-event action. Called at the end of each event. The signature is (::G4Event, ::G4JLApplication)::Nothing. Consult the G4Event reference manual to see what you can get from it.\nbegin-run action. Called at the beginning of a run. The signature is (::G4Run, ::G4JLApplication)::Nothing. Consult the G4Run reference manual to see what you can get from it.\nend-run action. Called at the end of a run. The signature is (::G4Run, ::G4JLApplication)::Nothing. Consult the G4Run reference manual to see what you can get from it.","category":"page"},{"location":"#Sensitive-Detectors","page":"Introduction","title":"Sensitive Detectors","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can define sensitive detectors by defining a data structure and 3 callback functions, which will initialize, fill and dispose the defined data structure. Later, the instantiated sensitive detector would be associated to one or more logical volumes of the detector setup. Instantiating a G4JLSensitiveDetector will require the following arguments:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"name. A string to identify the sensitive detector. No default.\nsd data. A instance of a user defined G4JLSDData mutable data structure that will passed to each callback invocation.\ninitialize method. User method that is called at the beginning of each event. The signature is (::B2aSDData, ::G4HCofThisEvent)::Nothing.\nendOfEvent method. User method that is called at the end of each event. The signature is (::B2aSDData, ::G4HCofThisEvent)::Nothing.\nprocessHits method. User method that is called at simulation step that ends at the associated logical volume. The signature is (::B2aSDData, ::G4Step, ::G4TouchableHistory)::Bool. Consult the G4Step reference manual to see what you can get from the G4Step. It returns true if a true hit is generated.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The following is a example on how to define a sensitive detector","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"#--------------------------------------------------------------------------------------------------\n#---Define Crystal Sensitive Detector--------------------------------------------------------------\n#--------------------------------------------------------------------------------------------------\n#---SD collected data------------------------------------------------------------------------------\nstruct CrystalSDData <: G4JLSDData\n    hitcollection::Vector{Hit}   # define a hit collection\n    CrystalSDData() = new(Hit[])\nend\n#---Initialize method------------------------------------------------------------------------------\nfunction crystal_initialize(::G4HCofThisEvent, data::CrystalSDData)::Nothing\n    empty!(data.hitcollection)   # empty the hit collection at every event\n    return\nend\n#---Process Hit method-----------------------------------------------------------------------------\nfunction crystal_processHits(step::G4Step, ::G4TouchableHistory, data::CrystalSDData)::Bool\n    part = step |> GetTrack |> GetParticleDefinition\n    part == G4OpticalPhoton && return false \n    edep = step |> GetTotalEnergyDeposit\n    edep <  0. && return false\n    pos = step |> GetPostStepPoint |> GetPosition\n    push!(data.hitcollection, Hit(0., pos, edep, ScintCryst))  # fill the collection with a new Hit\n    return true\nend\n#---Create SD instance-----------------------------------------------------------------------------\nG4JLSensitiveDetector(\"Crystal_SD\", CrystalSDData();           # name an associated data are mandatory\n                       processhits_method=crystal_processHits, # process hist method (also mandatory)\n                       initialize_method=crystal_initialize)   # intialize method","category":"page"},{"location":"#Scoring-meshes","page":"Introduction","title":"Scoring meshes","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The user can also specify scoring meshes to obtain quantities on the defined grid. In Geant4 this is achieved using a set of UI commands. In this Julia interface this functionality has been encapsulated in a number of data structures. The function to create a scoring mesh is G4JLScoringMesh and receive as arguments the the type and dimensions of the mesh, the position, the rotation, the number of bins in each dimension, and the quantities to accumulate with eventually some filter conditions. See for example the scoring mesh from RE03:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"sc1 = G4JLScoringMesh(\"boxMesh_1\",\n                      BoxMesh(1m,1m,1m),\n                      bins = (30, 30, 30),\n                      quantities = [ energyDeposit(\"eDep\")\n                                     nOfStep(\"nOfStepGamma\", filters=[ParticleFilter(\"gammafilter\", \"gamma\")])\n                                     nOfStep(\"nOfStepEMinus\", filters=[ParticleFilter(\"eMinusFilter\", \"e-\")])\n                                     nOfStep(\"nOfStepEPlus\", filters=[ParticleFilter(\"ePlusFilter\", \"e+\")])\n                                   ]\n                      )","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"The scoring mesh is added into the 'scorersargument when constructing a [G4JLApplication`](@ref). After a run hs been executed, the user can obtain the quantity values (sum, sum2,entries) on the 3D grid just calling by accessing the quantity as an attribute of the scoring mesh. The returned 3D Julia array is shaped to the declared bins. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia> beamOn(app,10000)\njulia> sum, sum2, entries = sc1.eDep\njulia> typeof(sum)\nArray{Float64, 3}\n\njulia> typeof(entries)\nArray{Int64, 3}\n\njulia> size(sum)\n(30, 30, 30)","category":"page"},{"location":"#Detector-and-Event-Display","page":"Introduction","title":"Detector and Event Display","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"For visualization applications, the user can create an instance of G4JLEventDisplay([settings file]) and give it to the constructor of G4JLApplication in the evtdisplay attribute. The constructor accepts a visualization settings file that will overwrite the default settings in the file Geant4.jl/ext/G4Vis/settings.jl. The format of the settings is Julia NamedTuple. Here is an example:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"(\n    display = (\n        show_axis = false,\n    ),\n    trajectories = (\n        color = :yellow,\n    ),\n)","category":"page"},{"location":"#Examples","page":"Introduction","title":"Examples","text":"","category":"section"},{"location":"#basic/B1","page":"Introduction","title":"basic/B1","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This is most basic example. For this example we have kept the interface closer to the native C++ interface. The only difference with respect the C++, is that that we need to instantiate a G4JLDetectorConstruction with the Julia function that will be callback to construct the detector geometry as argument. This is because we cannot inherit from Julia the C++ class G4VUserDetectorConstruction, which is the way foreseen in the native Geant4 toolkit to provide the specific user detector geometry. Similarly, for the user actions and primary particle generator we need to instantiate a G4JLActionInitialization. The interaction with the application is done with the G4UImanager. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To run it execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=examples examples/basic/B1/B1.j","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"or execute the notebook examples/basic/B1/B1.ipynb","category":"page"},{"location":"#basic/B2a","page":"Introduction","title":"basic/B2a","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example fills a vector of TrackerHit that is stored in the B2aSDData simulation data structure for each event. This is achieved with a sensitive detector associated to the Chamber logical volume. The example is using the high-level Julia interface with the instantiation of a G4JLApplication declaring all the elements of the application (geometry, physics, simulation data, user actions, etc.)","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To run it execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=examples examples/basic/B2/B2a.jl","category":"page"},{"location":"#extended/RE03","page":"Introduction","title":"extended/RE03","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example makes use of the built-in scoring capability of Geant4 with a new Julia API interface creating an instance of G4JLScoringMesh, instead of using the native Geant4 UI. The user defines a scoring mesh, and quantities to be collect and gets the results after the run. ","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To run it execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=examples examples/extended/RE03/RE03.jl","category":"page"},{"location":"#WaterPhantom","page":"Introduction","title":"WaterPhantom","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example is similar to RE03 but it defines a custom primary particle generator (MedicalBeam) instead of using the predefined particle gun generator (G4JLGunGenerator). It is a notebook and produces plots after each run.    To run it execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"jupyter notebook examples/WaterPhantom/WaterPhantom.ipynb","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"See the rendered notebook.","category":"page"},{"location":"#TestEm3","page":"Introduction","title":"TestEm3","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example comes from extended/electromagnetic/TestEm3 example. Since it requires additional packages such as FHist for histograms and Plots for their visualization, it has its own Julia environment in the folder examples/TestEm3. It uses the Julia high-level interface with the instantiation of a G4JLApplication declaring all the elements of the application.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To run it, execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=examples -i examples/TestEm3/TestEm3.jl","category":"page"},{"location":"#Scintillator","page":"Introduction","title":"Scintillator","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"Example with optical photons and customized physics list, as well as with a couple of sensitive detectors (for the crystal and silicon) and some simple analysis of the results. To run it, execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=examples -i examples/Scintillator/Scintillator.jl","category":"page"},{"location":"#Visualization-examples","page":"Introduction","title":"Visualization examples","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"The Geant4.jl project includes additional functionality for visualization under the extension directory ext/G4Vis/examples. This is done in a different directory to separate and minimise the dependencies. The julia ext/G4Vis/examples/Project.toml file  has the complete list of dependencies needed for running these examples. In order to load all the required dependencies the user can execute the first time:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"`julia --project=Geant4.jl/ext/G4Vis/examples -e 'import Pkg; Pkg.instantiate()'`","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nNote that depending on the actual platform and the desired interactivity, the user may need to choose a different Makie.jl backend among the existing ones (GLMakie, CairoMakie, WGLMakie,...).","category":"page"},{"location":"#B1vis.jl","page":"Introduction","title":"B1vis.jl","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example uses the GLMakie backend (OpenGL) of Makie. The use may change to other backends depending on his/her setup. To visualize the B1 detector do:","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=ext/G4Vis/examples -i  ext/G4Vis/examples/B1vis.jl","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nNote the option -i to keep the interactive session open","category":"page"},{"location":"#B2aVis.jl","page":"Introduction","title":"B2aVis.jl","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example to visualize the detector and (a very simplistic) visualization of one event.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=ext/G4Vis/examples -i  ext/G4Vis/examples/B2avis.jl","category":"page"},{"location":"#Solids.ipynb","page":"Introduction","title":"Solids.ipynb","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This notebook shows all the possible solids in Geant4. This is work in progress and some solids do not have graphical representation yet.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"jupyter notebook ext/G4Vis/examples/Solids.ipynb","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"See the rendered notebook","category":"page"},{"location":"#HBC30","page":"Introduction","title":"HBC30","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"This example mimics the CERN 30cm liquid hydrogen bubble chamber. It demonstrates the use of a uniform magnetic field (G4JLUniformMagField). It is useful for displaying the detector and the produced particles in a customizable manner.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"To run it, execute","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"julia --project=ext/G4Vis/examples -i ext/G4Vis/examples/HBC30/HBC30.jl","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"It also exists in a notebook format. ","category":"page"},{"location":"#Building-the-wrapper-code","page":"Introduction","title":"Building the wrapper code","text":"","category":"section"},{"location":"","page":"Introduction","title":"Introduction","text":"We use the Geant4 native binary libraries and data from the binary package Geant4_jll, which has been produced with the BinaryBuilder recipe. The wrapper library is downloaded from the binary package Geant4_julia_jll.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"We have the possibility during the development of this package to re-generate locally new C++ wrapper code. For this we need to have wrapit installed, which itself requires libclang to be installed. If the executable is not found (not in the PATH), we can use the wrapper code that is already pre-generated and distributed with this package.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"what C++ classes get wrapped is controlled by the file gen/Geant4.wit.in. See the documentation of WrapIt for the details. \nrun the gen/build.jl script generate the wrapper code (if wrapit found) and build the wrapper library.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"note: Note\nPlease note that compiling the single generated wrapper file takes very long. This is due to the current implementation of WrapIt that places all wrapped types in a single file. This may change in the future.","category":"page"},{"location":"","page":"Introduction","title":"Introduction","text":"Once the wrapper code is stabilized we move the generated code to the repository Geant4_cxxwrap to regenerate the binary package Geant4_julia_jll using the BinaryBuilder.","category":"page"}]
}
