<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example GPS ¬∑ Geant4.jl</title><meta name="title" content="Example GPS ¬∑ Geant4.jl"/><meta property="og:title" content="Example GPS ¬∑ Geant4.jl"/><meta property="twitter:title" content="Example GPS ¬∑ Geant4.jl"/><meta name="description" content="Documentation for Geant4.jl."/><meta property="og:description" content="Documentation for Geant4.jl."/><meta property="twitter:description" content="Documentation for Geant4.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Geant4.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Geant4.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../api/">APIs</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../HBC30/">Example HBC30</a></li><li><a class="tocitem" href="../WaterPhantom/">Example WaterPhantom</a></li><li><a class="tocitem" href="../B1/">Example B1</a></li><li><a class="tocitem" href="../B2a/">Example B2a</a></li><li class="is-active"><a class="tocitem" href>Example GPS</a><ul class="internal"><li><a class="tocitem" href="#Detector-definition-and-drawing"><span>Detector definition and drawing</span></a></li><li><a class="tocitem" href="#Simulation-data"><span>Simulation data</span></a></li><li><a class="tocitem" href="#User-Actions"><span>User Actions</span></a></li><li><a class="tocitem" href="#Particle-Generator"><span>Particle Generator</span></a></li><li><a class="tocitem" href="#Application-definition,-configuration-and-initialization"><span>Application definition, configuration and initialization</span></a></li><li><a class="tocitem" href="#Tests"><span>Tests</span></a></li></ul></li><li><a class="tocitem" href="../Solids/">Example Solids</a></li><li><a class="tocitem" href="../TestEm3/">Example TestEm3</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Example GPS</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example GPS</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaHEP/Geant4.jl/blob/master/docs/src/notebooks/GPS.md#L" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Testing-G4GeneralParticleSource"><a class="docs-heading-anchor" href="#Testing-G4GeneralParticleSource">Testing G4GeneralParticleSource</a><a id="Testing-G4GeneralParticleSource-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-G4GeneralParticleSource" title="Permalink"></a></h1><p>See the <a href="https://geant4-userdoc.web.cern.ch/UsersGuides/ForApplicationDeveloper/html/GettingStarted/generalParticleSource.html">G4GeneralParticleSource documentation</a> for the definition of parameters.</p><pre><code class="language-julia hljs">using Parameters
using Geant4
using Geant4.PhysicalConstants
using Geant4.SystemOfUnits
using Geant4.SystemOfUnits: deg
using FHist
using Plots
#---Choose the Makie backend
#using GLMakie
#using WGLMakie
using CairoMakie
using GeometryBasics, Rotations, IGLWrap_jll  # to force loding G4Vis extension</code></pre><h2 id="Detector-definition-and-drawing"><a class="docs-heading-anchor" href="#Detector-definition-and-drawing">Detector definition and drawing</a><a id="Detector-definition-and-drawing-1"></a><a class="docs-heading-anchor-permalink" href="#Detector-definition-and-drawing" title="Permalink"></a></h2><pre><code class="language-julia hljs"># Define the detector
include(joinpath(@__DIR__, &quot;DetectorGPS.jl&quot;))

# Draw the detector
det = GPSDetector()
world = construct(det)
img = draw(world[])
display(&quot;image/png&quot;, img)</code></pre><p><img src="../GPS_files/GPS_3_0.png" alt="png"/></p><h2 id="Simulation-data"><a class="docs-heading-anchor" href="#Simulation-data">Simulation data</a><a id="Simulation-data-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-data" title="Permalink"></a></h2><p>The simulation data <code>GPSSimData</code> struct is a set of histograms that will be filled in the user tracking action and can be visualised with the function <code>do_plot()</code>. It is using the macro <code>@with_kw</code> from the <code>Parameters.jl</code> package to construct an instance with all the defaults.</p><pre><code class="language-julia hljs">const nbins = 50
@with_kw mutable struct GPSSimData &lt;: G4JLSimulationData
    hKEne     = H1D(&quot;Energy Spectrum&quot;, nbins, 0., 15., :MeV)
    hRad      = H1D(&quot;Radial ditribution&quot;, nbins, 0., 10., :cm)
    hAngcosŒ∏  = H1D(&quot;Angular ditribution cosŒ∏&quot;, nbins, -1., 1.)
    hAngœï     = H1D(&quot;Angular distribution œï&quot;, nbins, 0.,360., :deg)
    hXYpos    = H2D(&quot;Source X-Y distribution&quot;, nbins, -10., 10., nbins, -10., 10., (:cm, :cm))
    hZXpos    = H2D(&quot;Source Z-X distribution&quot;, nbins, -10., 10., nbins, -10., 10., (:cm, :cm))
    hYZpos    = H2D(&quot;Source Y-Z distribution&quot;, nbins, -10., 10., nbins, -10., 10., (:cm, :cm))
    hcosŒ∏œï    = H2D(&quot;Angular cos(Œ∏)-œï distribution&quot;, nbins, -1., 1., nbins, 0., 360., (:nounit, :deg))
    hŒ∏œï       = H2D(&quot;Angular Œ∏-œï distribution&quot;, nbins, 0., 180., nbins, 0., 360., (:deg, :deg))
end
#---merge and empty functions----------------------------------------------------------------------
function Base.merge!(x::D, y::D) where D &lt;: G4JLSimulationData
    for f in fieldnames(D)
        merge!(getfield(x,f), getfield(y,f))
    end
end
function Base.empty!(x::D) where D &lt;: G4JLSimulationData
    for f in fieldnames(D)
        empty!(getfield(x,f))
    end
end
#---plot function----------------------------------------------------------------------------------
function do_plot(data::GPSSimData)
    img = Plots.plot(layout=(3,3), show=true, size=(1400,1000))
    for (i,fn) in enumerate(fieldnames(GPSSimData))
        h = getfield(data, fn)
        Plots.plot!(subplot=i, h.hist, title=h.title, show=true, cgrad=:plasma)
    end
    return img
end</code></pre><pre><code class="nohighlight hljs">do_plot (generic function with 1 method)</code></pre><h2 id="User-Actions"><a class="docs-heading-anchor" href="#User-Actions">User Actions</a><a id="User-Actions-1"></a><a class="docs-heading-anchor-permalink" href="#User-Actions" title="Permalink"></a></h2><p>The begin and end run action is used to initialise and sum (merge) the simulation data. The tracking action is used to fill the histograms.</p><pre><code class="language-julia hljs">#---Run Actions------------------------------------------------------------------------------------
function beginrun(::G4Run, app::G4JLApplication)::Nothing
    data = getSIMdata(app)
    empty!(data) 
    nothing
end
function endrun(::G4Run, app::G4JLApplication)::Nothing
    #---end run action is called for each workwer thread and the master one
    if G4Threading!G4GetThreadId() == -1   
        data = app.simdata[1]
        #---This is the master thread, so we need to add all the simuation results-----------------
        for d in app.simdata[2:end]
            merge!(data, d)
        end
    end
end
#---Tracking Actions-----------------------------------------------------------------------------
function pretrackaction(track::G4Track, app::G4JLApplication)::Nothing
    data = getSIMdata(app)
    ekin = track |&gt; GetKineticEnergy
    vertex = track |&gt; GetPosition
    direction = track |&gt; GetMomentumDirection
    weight = track |&gt; GetWeight

    x = vertex |&gt; getX
    y = vertex |&gt; getY
    z = vertex |&gt; getZ
    Œ∏ = direction |&gt; getTheta
    œï = direction |&gt; getPhi
    œï &lt; 0 &amp;&amp;  (œï += 2œÄ)
    r = vertex |&gt; mag
    dr = binedges(data.hRad.hist).step |&gt; Float64
    dv = 4œÄ * r^2 * dr

    # fill histograms
    push!(data.hKEne, ekin)
    push!(data.hRad, r, 1.0/dv)
    push!(data.hAngcosŒ∏, cos(Œ∏))
    push!(data.hAngœï, œï)
    push!(data.hXYpos, x, y)
    push!(data.hZXpos, z, x)
    push!(data.hYZpos, y, z)
    push!(data.hcosŒ∏œï, cos(Œ∏), œï)
    push!(data.hŒ∏œï, Œ∏, œï)
    nothing
end</code></pre><pre><code class="nohighlight hljs">pretrackaction (generic function with 1 method)</code></pre><h2 id="Particle-Generator"><a class="docs-heading-anchor" href="#Particle-Generator">Particle Generator</a><a id="Particle-Generator-1"></a><a class="docs-heading-anchor-permalink" href="#Particle-Generator" title="Permalink"></a></h2><p>We create a <code>G4JLGeneralParticleSource</code> particle generator. The initial run will be equivalent to the <code>G4JLParticleGun</code> with the same parameters.</p><pre><code class="language-julia hljs">#---Particle Gun initialization--------------------------------------------------------------------
gps = G4JLGeneralParticleSource(particle = &quot;geantino&quot;, 
                                energy = 10MeV, 
                                direction = G4ThreeVector(1,0,0), 
                                position = G4ThreeVector(1,2,1))</code></pre><pre><code class="nohighlight hljs">G4JLGeneralParticleSource(&quot;GPS&quot;, Geant4.G4JLGPSData(nothing, @NamedTuple{particle::String, energy::Float64, direction::Geant4.CLHEP!Hep3VectorAllocated, position::Geant4.CLHEP!Hep3VectorAllocated}[(particle = &quot;geantino&quot;, energy = 10.0, direction = G4ThreeVector(1.0,0.0,0.0), position = G4ThreeVector(1.0,2.0,1.0))], false, false), Geant4.initGPS, Geant4.var&quot;#gen#22&quot;(), G4JLGeneratorAction[])</code></pre><h2 id="Application-definition,-configuration-and-initialization"><a class="docs-heading-anchor" href="#Application-definition,-configuration-and-initialization">Application definition, configuration and initialization</a><a id="Application-definition,-configuration-and-initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Application-definition,-configuration-and-initialization" title="Permalink"></a></h2><pre><code class="language-julia hljs">#---Create the Application-------------------------------------------------------------------------
app = G4JLApplication(detector = GPSDetector(),                   # detector with parameters
                      simdata = GPSSimData(),                     # simulation data structure
                      generator = gps,                            # primary particle generator 
                      nthreads = VERSION &gt; v&quot;1.9&quot; ? 4 : 0,        # number of threads (MT)
                      physics_type = FTFP_BERT,                   # what physics list to instantiate
                      #----Actions--------------------------------
                      pretrackaction_method = pretrackaction,     # pre-tracking action
                      beginrunaction_method = beginrun,           # begin-run action (initialize counters and histograms)
                      endrunaction_method = endrun,               # end-run action (print summary)               
                      );
configure(app)
initialize(app)</code></pre><pre><code class="nohighlight hljs">**************************************************************
 Geant4 version Name: geant4-11-02 [MT]   (8-December-2023)
  &lt;&lt; in Multi-threaded mode &gt;&gt; 
                       Copyright : Geant4 Collaboration
                      References : NIM A 506 (2003), 250-303
                                 : IEEE-TNS 53 (2006), 270-278
                                 : NIM A 835 (2016), 186-225
                             WWW : http://geant4.org/
**************************************************************

G4Material WARNING: duplicate name of material Vacuum
G4Material WARNING: duplicate name of material Aluminium
G4Material WARNING: duplicate name of material Silicon oxide</code></pre><h2 id="Tests"><a class="docs-heading-anchor" href="#Tests">Tests</a><a id="Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Tests" title="Permalink"></a></h2><p>Taken from <code>examples\extended\eventgenerator\exgps\macros</code></p><h3 id="Initial-Particle-Gun"><a class="docs-heading-anchor" href="#Initial-Particle-Gun">Initial Particle Gun</a><a id="Initial-Particle-Gun-1"></a><a class="docs-heading-anchor-permalink" href="#Initial-Particle-Gun" title="Permalink"></a></h3><pre><code class="language-julia hljs">beamOn(app, 1000)
img = do_plot(app.simdata[1])
display(&quot;image/png&quot;, img)</code></pre><pre><code class="nohighlight hljs">[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m


[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m</code></pre><p><img src="../GPS_files/GPS_13_2.png" alt="png"/></p><h3 id="Test01"><a class="docs-heading-anchor" href="#Test01">Test01</a><a id="Test01-1"></a><a class="docs-heading-anchor-permalink" href="#Test01" title="Permalink"></a></h3><pre><code class="language-text hljs">/gps/particle proton
/gps/pos/type Point
/gps/pos/centre 1. 2. 1. cm
/gps/ang/type iso
/gps/energy 2. MeV</code></pre><pre><code class="language-julia hljs">reinitialize(app.generator;  particle=&quot;geantino&quot;,
                             energy=2MeV,
                             pos=(type=&quot;Point&quot;, centre=G4ThreeVector(1cm,2cm,1cm)),
                             ang=(type=&quot;iso&quot;))
beamOn(app, 1000)
img = do_plot(app.simdata[1])
display(&quot;image/png&quot;, img)</code></pre><pre><code class="nohighlight hljs">[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m</code></pre><p><img src="../GPS_files/GPS_15_1.png" alt="png"/></p><h3 id="Test02"><a class="docs-heading-anchor" href="#Test02">Test02</a><a id="Test02-1"></a><a class="docs-heading-anchor-permalink" href="#Test02" title="Permalink"></a></h3><pre><code class="language-text hljs"># square plane source
/gps/pos/type Plane
/gps/pos/shape Square
/gps/pos/centre 1. 2. 1. cm
/gps/pos/halfx 2. cm
/gps/pos/halfy 2. cm

#cosine-law distribution
/gps/ang/type cos

# linear energy distr.
/gps/ene/type Lin
/gps/ene/min 2. MeV
/gps/ene/max 10. MeV
/gps/ene/gradient 1.
/gps/ene/intercept 1.</code></pre><pre><code class="language-julia hljs">reinitialize(app.generator;  particle=&quot;geantino&quot;,
                             ene=(type=&quot;Lin&quot;, min=2MeV, max=10MeV, gradient=1, intercept=1),
                             pos=(type=&quot;Plane&quot;, shape=&quot;Square&quot;, centre=G4ThreeVector(1cm,2cm,1cm), halfx=2cm, halfy=2cm),
                             ang=(type=&quot;cos&quot;,mintheta=10deg, maxtheta=80deg))
beamOn(app, 10000)
img = do_plot(app.simdata[1])
display(&quot;image/png&quot;, img)</code></pre><pre><code class="nohighlight hljs">[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m</code></pre><p><img src="../GPS_files/GPS_17_1.png" alt="png"/></p><h3 id="Test03"><a class="docs-heading-anchor" href="#Test03">Test03</a><a id="Test03-1"></a><a class="docs-heading-anchor-permalink" href="#Test03" title="Permalink"></a></h3><pre><code class="language-text hljs">#rectangle plane source
/gps/pos/type Plane
/gps/pos/shape Rectangle
/gps/pos/centre 0. 2. 1. cm
/gps/pos/halfx 1. cm
/gps/pos/halfy 3. cm

# isotropic angular distri.
/gps/ang/type iso

# power-law energy distr.
/gps/ene/type Pow
/gps/ene/min 2. MeV
/gps/ene/max 10. MeV
/gps/ene/alpha -2.</code></pre><pre><code class="language-julia hljs">reinitialize(app.generator;  particle=&quot;geantino&quot;,
                             ene=(type=&quot;Pow&quot;, min=2MeV, max=10MeV, alpha=-2),
                             pos=(type=&quot;Plane&quot;, shape=&quot;Rectangle&quot;, centre=G4ThreeVector(1cm,2cm,1cm), halfx=1cm, halfy=3cm),
                             ang=(type=&quot;iso&quot;, mintheta=0deg, maxtheta=180deg))
beamOn(app, 10000)
img = do_plot(app.simdata[1])
display(&quot;image/png&quot;, img)</code></pre><pre><code class="nohighlight hljs">[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m</code></pre><p><img src="../GPS_files/GPS_19_1.png" alt="png"/></p><h3 id="Test04-and-Test05-Together"><a class="docs-heading-anchor" href="#Test04-and-Test05-Together">Test04 and Test05 Together</a><a id="Test04-and-Test05-Together-1"></a><a class="docs-heading-anchor-permalink" href="#Test04-and-Test05-Together" title="Permalink"></a></h3><ul><li>source 1</li></ul><pre><code class="language-text hljs">    #circular plane source
    /gps/pos/type Plane
    /gps/pos/shape Circle
    /gps/pos/centre 2. 1. 0. cm
    /gps/pos/radius 3. cm

    # cosine-law 
    /gps/ang/type cos

    # exponential energy distri.
    /gps/ene/type Exp
    /gps/ene/min 2. MeV
    /gps/ene/max 10. MeV
    /gps/ene/ezero 2.</code></pre><ul><li>source 2</li></ul><pre><code class="language-text hljs">    # ellipse plane source
    /gps/pos/type Plane
    /gps/pos/shape Ellipse
    /gps/pos/centre 3. 1. 0. cm
    /gps/pos/halfx 1. cm
    /gps/pos/halfy 2. cm

    #isotropic angular distribution
    /gps/ang/type iso

    # brems energy distr.
    /gps/ene/type Brem
    /gps/ene/min 2. MeV
    /gps/ene/max 10. MeV
    /gps/ene/temp 2e12</code></pre><pre><code class="language-julia hljs">reinitialize(app.generator;  sources = [(particle=&quot;geantino&quot;, intensity=0.5,
                                           ene=(type=&quot;Exp&quot;, min=2MeV, max=10MeV, ezero=2.),
                                           pos=(type=&quot;Plane&quot;, shape=&quot;Circle&quot;, centre=G4ThreeVector(1cm,2cm,0cm), radius=3cm),
                                           ang=(type=&quot;cos&quot;, mintheta=0deg, maxtheta=180deg)),
                                         (particle=&quot;geantino&quot;, intensity=0.5,
                                           ene=(type=&quot;Brem&quot;, min=2MeV, max=10MeV, temp=2e12),
                                           pos=(type=&quot;Plane&quot;, shape=&quot;Ellipse&quot;, centre=G4ThreeVector(3cm,1cm,0cm), halfx=1cm, halfy=2cm),
                                           ang=(type=&quot;iso&quot;, mintheta=0deg, maxtheta=180deg))])
beamOn(app, 100000)
img = do_plot(app.simdata[1])
display(&quot;image/png&quot;, img)</code></pre><pre><code class="nohighlight hljs">[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m
[33m[1m‚îå [22m[39m[33m[1mWarning: [22m[39mWeights was probably used but StatsBase.Histogram doesn&#39;t record # of entries
[33m[1m‚îî [22m[39m[90m@ FHist ~/.julia/packages/FHist/smrpp/src/FHist.jl:35[39m</code></pre><p><img src="../GPS_files/GPS_21_1.png" alt="png"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../B2a/">¬´ Example B2a</a><a class="docs-footer-nextpage" href="../Solids/">Example Solids ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 22 January 2024 14:34">Monday 22 January 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
